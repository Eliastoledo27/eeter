(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4004],{20067:function(){},72061:function(){},17054:function(e,t,a){Promise.resolve().then(a.bind(a,16177)),Promise.resolve().then(a.bind(a,28449)),Promise.resolve().then(a.bind(a,44923)),Promise.resolve().then(a.bind(a,71620)),Promise.resolve().then(a.bind(a,76737)),Promise.resolve().then(a.bind(a,35156)),Promise.resolve().then(a.bind(a,71054)),Promise.resolve().then(a.bind(a,95798)),Promise.resolve().then(a.bind(a,60351)),Promise.resolve().then(a.bind(a,69546)),Promise.resolve().then(a.bind(a,91343)),Promise.resolve().then(a.bind(a,35694)),Promise.resolve().then(a.bind(a,2725))},88127:function(e,t,a){"use strict";a.d(t,{V:function(){return r},p:function(){return l}}),a(83079);var s=a(12119),r=(0,s.$)("d3e60b8492f88875e66a64d3749c194a38497fbd"),l=(0,s.$)("b930a451f011450766ab7e765c8fb7456103dc96")},69649:function(e,t,a){"use strict";a.d(t,{C:function(){return r},h:function(){return l}}),a(83079);var s=a(12119),r=(0,s.$)("79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2"),l=(0,s.$)("b9fdf25a15fb84304180adce81eea9b6b985602a")},38893:function(e,t,a){"use strict";a.d(t,{AU:function(){return l},E7:function(){return i},ex:function(){return r}}),a(83079);var s=a(12119);(0,s.$)("0963c52e3d0d38eaf6ceb3f4b61c834aa8a997dc");var r=(0,s.$)("6351432df3e44edfcb8453490de17a143b0c5e26"),l=(0,s.$)("578b188545d16cd2a826e5b634755f4bfde26286"),i=(0,s.$)("3b790d46d78ec4aa5c227581a09039c9638ab494")},16177:function(e,t,a){"use strict";a.d(t,{AdminDashboard:function(){return tN}});var s=a(57437),r=a(2265),l=a(11259);let i=()=>(0,l.createBrowserClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o");class o{async findAll(e){let t=this.supabase.from("productos").select("*").order("created_at",{ascending:!1});(null==e?void 0:e.category)&&"Todos"!==e.category&&(t=t.eq("category",e.category));let{data:a,error:s}=await t;if(s)throw Error(s.message);let r=a.map(this.mapToEntity);if(null==e?void 0:e.query){let t=e.query.toLowerCase();r=r.filter(e=>e.name.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}return r}async findById(e){let{data:t,error:a}=await this.supabase.from("productos").select("*").eq("id",e).single();return a?null:this.mapToEntity(t)}async create(e){let{data:t,error:a}=await this.supabase.from("productos").insert({name:e.name,description:e.description,category:e.category,price:e.basePrice,images:e.images,image:e.images[0]||null,stock_by_size:e.stockBySize,stock:e.totalStock,status:"active"===e.status?"activo":"inactivo"}).select().single();if(a)throw Error(a.message);return this.mapToEntity(t)}async update(e,t){let a={};t.name&&(a.name=t.name),t.description&&(a.description=t.description),t.category&&(a.category=t.category),t.basePrice&&(a.price=t.basePrice),t.images&&(a.images=t.images,a.image=t.images[0]||null),t.stockBySize&&(a.stock_by_size=t.stockBySize,a.stock=Object.values(t.stockBySize).reduce((e,t)=>e+t,0)),t.status&&(a.status="active"===t.status?"activo":"inactivo"),a.updated_at=new Date().toISOString();let{data:s,error:r}=await this.supabase.from("productos").update(a).eq("id",e).select().single();if(r)throw Error(r.message);return this.mapToEntity(s)}async delete(e){let{error:t}=await this.supabase.from("productos").delete().eq("id",e);if(t)throw Error(t.message)}mapToEntity(e){return{id:e.id,name:e.name,description:e.description||"",category:e.category||"Sin categor\xeda",basePrice:Number(e.price)||0,images:e.images||(e.image?[e.image]:[]),stockBySize:e.stock_by_size||{},totalStock:e.stock||0,status:"activo"===e.status?"active":"inactive",margin:Number(e.margin)||0,createdAt:new Date(e.created_at),updatedAt:e.updated_at?new Date(e.updated_at):void 0}}constructor(){this.supabase=i()}}var n=a(14438),d=a(29501),c=a(13590),x=a(35897);let m=x.Ryn({name:x.Z_8().min(3,"El nombre debe tener al menos 3 caracteres"),description:x.Z_8().min(10,"La descripci\xf3n debe ser detallada"),category:x.Z_8().min(1,"Selecciona una categor\xeda"),basePrice:x.oQ2.number().min(.01,"El precio debe ser mayor a 0"),images:x.Z_8().url("URL de imagen inv\xe1lida").optional().or(x.i0J("")),totalStock:x.oQ2.number().min(0,"El stock no puede ser negativo").default(0)});x.Ryn({email:x.Z_8().email("Email inv\xe1lido"),password:x.Z_8().min(6,"M\xednimo 6 caracteres")});var u=a(12381),h=a(40279),p=a(23675),b=a(75060),g=a(88127),f=a(51817),v=a(17689),j=a(32489),N=a(82023),w=a(24937),y=a(33145);function k(e){var t;let{initialData:a,onSubmit:l,onCancel:o}=e,[x,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(0),[z,E]=(0,r.useState)(!1),_=i(),{register:A,handleSubmit:Z,setValue:P,watch:F,getValues:D,formState:{errors:I,isSubmitting:B}}=(0,d.cI)({resolver:(0,c.F)(m),defaultValues:{name:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",category:(null==a?void 0:a.category)||"",basePrice:(null==a?void 0:a.basePrice)||0,totalStock:(null==a?void 0:a.totalStock)||0,images:(null==a?void 0:null===(t=a.images)||void 0===t?void 0:t[0])||""}}),M=F("images"),R=async()=>{let{name:e,category:t,basePrice:a}=D();if(!e||!t){n.A.error("Completa el nombre y la categor\xeda para generar la descripci\xf3n.");return}E(!0);try{let s=await (0,g.p)(e,t,Number(a)||0);s.success&&s.text?(P("description",s.text),n.A.success("Descripci\xf3n generada con IA ✨")):n.A.error(s.error||"No se pudo generar la descripci\xf3n.")}catch(e){n.A.error("Error al conectar con la IA.")}finally{E(!1)}},T=async e=>{try{if(k(!0),S(0),!e.target.files||0===e.target.files.length)return;let t=e.target.files[0];if(!["image/jpeg","image/png","image/webp"].includes(t.type))throw Error("Formato no permitido. Solo se aceptan JPG, PNG o WEBP.");if(t.size>5242880)throw Error("La imagen es demasiado pesada (m\xe1x 5MB).");S(20);let a=await new Promise(e=>{let a=new FileReader;a.onload=()=>{let t=new window.Image;t.onload=()=>e({w:t.naturalWidth,h:t.naturalHeight}),t.src=a.result},a.readAsDataURL(t)}),s=Math.max(a.w,a.h),r=await (0,w.Z)(t,{maxSizeMB:1,maxWidthOrHeight:s>2500?1920:1200,useWebWorker:!0,fileType:"image/webp"});S(40);let l=r.name.split(".").pop(),i="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(7),".").concat(l),o="".concat(i);S(60);let{error:d}=await _.storage.from("products").upload(o,r,{cacheControl:"3600",upsert:!1});if(d){if(d.message.includes("Bucket not found"))throw n.A.error('Error Cr\xedtico: El bucket "products" no existe.',{description:"Por favor ejecuta el script de migraci\xf3n SQL en el Dashboard de Supabase para crearlo.",duration:1e4}),Error('Error de configuraci\xf3n: El bucket "products" no existe en Supabase. Ejecuta el script SQL de migraci\xf3n.');throw d}S(80);let{data:c}=_.storage.from("products").getPublicUrl(o);P("images",c.publicUrl),S(100),n.A.success("Imagen optimizada y subida correctamente")}catch(e){console.error("Upload error:",e),n.A.error(e.message||"Error al subir la imagen"),S(0)}finally{k(!1),e.target.value=""}};return(0,s.jsxs)("form",{onSubmit:Z(e=>{try{let t={name:e.name,description:e.description,category:e.category,basePrice:e.basePrice,images:e.images?[e.images]:[],stockBySize:{Unique:e.totalStock},totalStock:e.totalStock,status:"active"};l(t),n.A.success(a?"Producto actualizado":"Producto creado")}catch(e){n.A.error("Error al guardar el producto")}}),className:"space-y-4 text-left",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"name",className:"text-gray-700",children:"Nombre del Producto"}),(0,s.jsx)(h.I,{id:"name",...A("name"),placeholder:"Ej: Nike Air Max",className:"bg-white border-gray-200 text-gray-900 shadow-sm"}),I.name&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:I.name.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"category",className:"text-gray-700",children:"Categor\xeda"}),(0,s.jsx)(h.I,{id:"category",...A("category"),placeholder:"Ej: Zapatillas",className:"bg-white border-gray-200 text-gray-900 shadow-sm"}),I.category&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:I.category.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"basePrice",className:"text-gray-700",children:"Precio ($)"}),(0,s.jsx)(h.I,{id:"basePrice",type:"number",step:"0.01",...A("basePrice"),className:"bg-white border-gray-200 text-gray-900 shadow-sm"}),I.basePrice&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:I.basePrice.message})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"totalStock",className:"text-gray-700",children:"Stock Total"}),(0,s.jsx)(h.I,{id:"totalStock",type:"number",...A("totalStock"),className:"bg-white border-gray-200 text-gray-900 shadow-sm"}),I.totalStock&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:I.totalStock.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"image-upload",className:"text-gray-700",children:"Imagen del Producto"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(h.I,{id:"images",...A("images"),placeholder:"URL de la imagen o subir archivo...",className:"bg-white border-gray-200 text-gray-900 flex-1 shadow-sm",readOnly:x}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"file",id:"image-upload",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed",onChange:T,disabled:x,accept:"image/png, image/jpeg, image/webp"}),(0,s.jsx)(u.z,{type:"button",variant:"secondary",disabled:x,className:"bg-gray-100 hover:bg-gray-200 text-gray-700",children:x?(0,s.jsx)(f.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(v.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formatos: PNG, JPG, WEBP. M\xe1x 5MB (optimizada autom.)."}),x&&(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-2 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(C,"%")}})}),M&&(0,s.jsxs)("div",{className:"mt-2 relative w-full h-40 bg-gray-50 rounded-md overflow-hidden border border-gray-200 group",children:[(0,s.jsx)(y.default,{src:M,alt:"Preview",fill:!0,className:"object-contain"}),(0,s.jsx)("button",{type:"button",onClick:()=>P("images",""),className:"absolute top-2 right-2 p-1 bg-red-500/80 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(j.Z,{size:14})})]}),I.images&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:I.images.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(b._,{htmlFor:"description",className:"text-gray-700",children:"Descripci\xf3n"}),(0,s.jsxs)(u.z,{type:"button",variant:"ghost",size:"sm",onClick:R,disabled:z,className:"text-primary hover:text-primary/80 hover:bg-primary/10 h-6 text-xs gap-1.5",children:[z?(0,s.jsx)(f.Z,{className:"w-3 h-3 animate-spin"}):(0,s.jsx)(N.Z,{className:"w-3 h-3"}),z?"Generando...":"Completar con IA"]})]}),(0,s.jsx)(p.g,{id:"description",...A("description"),className:"bg-white border-gray-200 text-gray-900 min-h-[100px] shadow-sm"}),I.description&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:I.description.message})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-100 mt-6",children:[(0,s.jsx)(u.z,{type:"button",variant:"ghost",onClick:o,className:"text-gray-500 hover:text-gray-900 hover:bg-gray-100",disabled:B||x,children:"Cancelar"}),(0,s.jsxs)(u.z,{type:"submit",disabled:B||x,className:"bg-primary hover:bg-primary/90 text-white shadow-md",children:[B?(0,s.jsx)(f.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,B?"Guardando...":a?"Actualizar Producto":"Crear Producto"]})]})]})}a(83079);var C=a(12119),S=(0,C.$)("ecbce8da19ebef56e49982efb9e7efd14fd2f7c0"),z=(0,C.$)("fb12ccb96b2e451645061970795dfe5910cdc6f3"),E=(0,C.$)("6eddd26a4302e1b6f8ed7c36231e178db18ebfa6"),_=(0,C.$)("6853ccbc56f0d770fd65e278d296db834a4265cc"),A=(0,C.$)("197801779373472057917955eb08dc056d65e73c"),Z=(0,C.$)("a5f078fbd7f40fbe6edec152b4ca638a63b71caa"),P=(0,C.$)("1d1ecad8c7a07318f0eb63fd9b7ad167522cbe49"),F=a(44794),D=a(62720),I=a(88893),B=a(18930),M=a(49322);let R=e=>{var t;let{product:a,onDelete:l,onEdit:i,isSelected:o,onToggleSelect:n}=e,[d,c]=(0,r.useState)(!1),x=async()=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este producto?")){c(!0);try{(await S(a.id)).success?null==l||l():alert("Error al eliminar")}catch(e){alert("Error al eliminar")}finally{c(!1)}}},m=a.stock_by_size?Object.values(a.stock_by_size).reduce((e,t)=>e+Number(t),0):0;return(0,s.jsxs)("div",{className:"group relative bg-white border rounded-3xl overflow-hidden hover:shadow-2xl hover:shadow-orange-500/10 transition-all duration-300 hover:-translate-y-1 ".concat(o?"border-orange-500 ring-2 ring-orange-500/20":"border-slate-100"," ").concat(a.is_active?"":"opacity-85"),children:[n&&(0,s.jsx)("div",{className:"absolute top-3 right-3 z-30",children:(0,s.jsx)("div",{onClick:e=>{e.stopPropagation(),n()},className:"w-6 h-6 rounded-lg border-2 flex items-center justify-center cursor-pointer transition-all shadow-sm ".concat(o?"bg-orange-500 border-orange-500":"border-white bg-white/90 hover:border-orange-300"),children:o&&(0,s.jsx)("div",{className:"w-2.5 h-2.5 bg-white rounded-sm"})})}),(0,s.jsxs)("div",{className:"relative h-[180px] overflow-hidden bg-slate-50",children:[(null===(t=a.images)||void 0===t?void 0:t[0])?(0,s.jsx)(y.default,{src:a.images[0],alt:a.name,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy",className:"object-cover transition-transform duration-500 group-hover:scale-105 w-full h-full"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:(0,s.jsx)(F.Z,{size:48})}),(0,s.jsxs)("div",{className:"absolute top-3 left-3 flex flex-wrap gap-2",children:[(0,s.jsxs)("span",{className:"px-2.5 py-1 rounded-full bg-white/90 backdrop-blur-sm border border-slate-100 text-[10px] font-bold text-slate-700 flex items-center gap-1 shadow-sm",children:[(0,s.jsx)(D.Z,{size:10,className:"text-orange-500"}),a.category||"Sin categor\xeda"]}),!a.is_active&&(0,s.jsx)("span",{className:"px-2.5 py-1 rounded-full bg-slate-900/90 text-[10px] font-bold text-white shadow-sm",children:"Inactivo"})]}),(i||l)&&(0,s.jsxs)("div",{className:"absolute inset-x-3 bottom-3 translate-y-full group-hover:translate-y-0 transition-transform duration-300 flex gap-2",children:[i&&(0,s.jsxs)("button",{onClick:i,className:"flex-1 bg-white/95 backdrop-blur text-slate-900 py-2.5 rounded-xl font-bold text-xs flex items-center justify-center gap-2 hover:bg-orange-50 hover:text-orange-700 transition-colors shadow-lg shadow-black/5",children:[(0,s.jsx)(I.Z,{size:14})," Editar"]}),l&&(0,s.jsx)("button",{onClick:x,disabled:d,className:"w-10 bg-white/95 backdrop-blur text-red-500 rounded-xl flex items-center justify-center hover:bg-red-50 transition-all shadow-lg shadow-black/5",children:d?(0,s.jsx)("div",{className:"animate-spin w-3 h-3 border-2 border-current rounded-full border-t-transparent"}):(0,s.jsx)(B.Z,{size:16})})]})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-start gap-2 mb-2",children:(0,s.jsx)("h3",{className:"text-base font-bold text-slate-900 line-clamp-1 group-hover:text-orange-600 transition-colors",title:a.name,children:a.name})}),(0,s.jsx)("p",{className:"text-slate-500 text-xs line-clamp-2 mb-4 h-8 leading-relaxed",children:a.description||"Sin descripci\xf3n disponible para este producto."}),(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-slate-100 pt-3 mt-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:"Precio"}),(0,s.jsxs)("span",{className:"text-lg font-black text-slate-900 flex items-center gap-0.5",children:[(0,s.jsx)("span",{className:"text-sm text-slate-400",children:"$"}),a.base_price]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:"Stock"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-bold ".concat(m>0?"text-emerald-700 bg-emerald-50":"text-red-700 bg-red-50"),children:[0===m&&(0,s.jsx)(M.Z,{size:10}),m," ",(0,s.jsx)("span",{className:"font-normal opacity-70",children:"uds"})]})]})]})]})]})},T=e=>{let{products:t,selectedIds:a,onToggleSelect:l,onSelectAll:i,onEdit:o,onDelete:n}=e,[d,c]=(0,r.useState)(null),x=t.length>0&&a.size===t.length,m=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este producto?")){c(e);try{(await S(e)).success?null==n||n(e):alert("Error al eliminar")}catch(e){console.error(e),alert("Error al eliminar")}finally{c(null)}}};return(0,s.jsx)("div",{className:"bg-white rounded-3xl shadow-sm border border-orange-100 overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-orange-50/50 border-b border-orange-100",children:[(0,s.jsx)("th",{className:"p-4 w-12",children:(0,s.jsx)("div",{onClick:i,className:"w-4 h-4 rounded border cursor-pointer flex items-center justify-center transition-colors ".concat(x?"bg-orange-500 border-orange-500":"border-orange-200 bg-white hover:border-orange-400"),children:x&&(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-[1px]"})})}),(0,s.jsx)("th",{className:"p-4 text-xs font-bold text-orange-900 uppercase tracking-wider",children:"Producto"}),(0,s.jsx)("th",{className:"p-4 text-xs font-bold text-orange-900 uppercase tracking-wider",children:"Categor\xeda"}),(0,s.jsx)("th",{className:"p-4 text-xs font-bold text-orange-900 uppercase tracking-wider text-right",children:"Precio"}),(0,s.jsx)("th",{className:"p-4 text-xs font-bold text-orange-900 uppercase tracking-wider text-right",children:"Stock"}),(0,s.jsx)("th",{className:"p-4 text-xs font-bold text-orange-900 uppercase tracking-wider",children:"Estado"}),(0,s.jsx)("th",{className:"p-4 w-20"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-orange-50",children:t.map(e=>{var t;let r=e.stock_by_size?Object.values(e.stock_by_size).reduce((e,t)=>e+Number(t),0):0,i=a.has(e.id);return(0,s.jsxs)("tr",{className:"group transition-colors hover:bg-orange-50/30 ".concat(i?"bg-orange-50":""),children:[(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("div",{onClick:()=>l(e.id),className:"w-5 h-5 rounded border cursor-pointer flex items-center justify-center transition-colors ".concat(i?"bg-orange-500 border-orange-500":"border-slate-300 bg-white hover:border-orange-400"),children:i&&(0,s.jsx)("div",{className:"w-2.5 h-2.5 bg-white rounded-[1px]"})})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-slate-100 border border-slate-200 flex-shrink-0",children:(null===(t=e.images)||void 0===t?void 0:t[0])?(0,s.jsx)(y.default,{src:e.images[0],alt:e.name,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:(0,s.jsx)("div",{className:"w-4 h-4 bg-slate-200 rounded-full"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-slate-900 line-clamp-1",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-slate-500 line-clamp-1",children:e.description})]})]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:e.category||"Sin categor\xeda"})}),(0,s.jsxs)("td",{className:"p-4 text-right font-mono font-medium text-slate-700",children:["$",Number(e.base_price).toLocaleString()]}),(0,s.jsx)("td",{className:"p-4 text-right",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-bold ".concat(r>0?"text-emerald-700 bg-emerald-50":"text-red-700 bg-red-50"),children:[0===r&&(0,s.jsx)(M.Z,{size:12}),r," uds"]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold ".concat(e.is_active?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-500"),children:e.is_active?"Activo":"Inactivo"})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o&&(0,s.jsx)("button",{onClick:()=>o(e),className:"p-2 text-slate-400 hover:text-orange-600 hover:bg-orange-50 rounded-full transition-colors",children:(0,s.jsx)(I.Z,{size:16})}),n&&(0,s.jsx)("button",{onClick:()=>m(e.id),disabled:d===e.id,className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",children:d===e.id?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full animate-spin"}):(0,s.jsx)(B.Z,{size:16})})]})})]},e.id)})})]})})})};var W=a(83229),L=a(3011),O=a(89134);let $=(0,L.U)()((0,O.tJ)(e=>({geminiApiKey:"",setGeminiApiKey:t=>e({geminiApiKey:t})}),{name:"eter-settings-storage"})),V=e=>{var t,a,l;let{product:i,onSuccess:o,onCancel:d}=e,[c,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[b,g]=(0,r.useState)((null==i?void 0:i.name)||""),[w,k]=(0,r.useState)((null==i?void 0:i.description)||""),[C,S]=(0,r.useState)((null==i?void 0:i.category)||"Sneakers"),[z,E]=(0,r.useState)((null==i?void 0:null===(t=i.base_price)||void 0===t?void 0:t.toString())||""),[_,A]=(0,r.useState)((null==i?void 0:null===(a=i.images)||void 0===a?void 0:a[0])||""),[F,D]=(0,r.useState)(null),[I,B]=(0,r.useState)((null==i?void 0:null===(l=i.images)||void 0===l?void 0:l[0])||""),[M,R]=(0,r.useState)((null==i?void 0:i.stock_by_size)||{}),{geminiApiKey:T}=$(),L=(e,t)=>{let a=parseInt(t);if(isNaN(a)){let t={...M};delete t[e],R(t)}else R({...M,[e]:a})},O=async()=>{if(!T){n.A.error("Configura tu API Key de Gemini primero.");return}if(!b||!C){n.A.error("Completa el nombre y la categor\xeda para generar la descripci\xf3n.");return}u(!0);try{var e,t,a,s,r;let l="Escribe una descripci\xf3n comercial atractiva y persuasiva para vender este producto en una tienda online premium de zapatillas.\n      \n      Detalles del producto:\n      - Nombre: ".concat(b,"\n      - Categor\xeda: ").concat(C,"\n      - Precio: $").concat(z||"No especificado","\n      \n      La descripci\xf3n debe:\n      - Ser corta (m\xe1ximo 3 p\xe1rrafos breves).\n      - Resaltar la calidad, confort y estilo.\n      - Usar un tono profesional pero entusiasta.\n      - Incluir emojis relevantes.\n      - Estar en espa\xf1ol de Argentina (vos).\n      \n      No incluyas t\xedtulos ni markdown, solo el texto de la descripci\xf3n."),i=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=".concat(T),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:l}]}]})}),o=await i.json();if(o.error)throw Error(o.error.message||"Error en la API de Gemini");let d=null===(r=o.candidates)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:null===(a=s.content)||void 0===a?void 0:null===(t=a.parts)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.text;d?(k(d),n.A.success("Descripci\xf3n generada con IA ✨")):n.A.error("La IA no devolvi\xf3 ning\xfan texto.")}catch(e){console.error(e),n.A.error("Error al conectar con Gemini AI.")}finally{u(!1)}},V=async e=>{e.preventDefault(),x(!0);try{let e;let a=new FormData;if(a.append("name",b),a.append("description",w),a.append("category",C),a.append("base_price",z),a.append("stock_by_size",JSON.stringify(M)),a.append("image_url",_),F&&a.append("image_file",F),(e=(null==i?void 0:i.id)?await P(i.id,a):await Z(a)).error)p(e.error);else{var t;let a=e.product||{...i,name:b,description:w,category:C,base_price:Number(z),images:[_],stock_by_size:M,id:(null==i?void 0:i.id)||"",is_active:null===(t=null==i?void 0:i.is_active)||void 0===t||t,created_at:(null==i?void 0:i.created_at)||new Date().toISOString()};o(a)}}catch(e){p("Ocurri\xf3 un error inesperado")}finally{x(!1)}};return(0,s.jsxs)("form",{onSubmit:V,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:i?"Editar Producto":"Nuevo Producto"}),(0,s.jsx)("button",{type:"button",onClick:d,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 hover:bg-slate-100 rounded-lg",children:(0,s.jsx)(j.Z,{size:24})})]}),h&&(0,s.jsxs)("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl text-sm border border-red-100 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),h]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"Nombre del Producto"}),(0,s.jsx)("input",{required:!0,type:"text",value:b,onChange:e=>g(e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all placeholder:text-slate-400 font-medium",placeholder:"Ej. Nike Air Force 1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"Categor\xeda"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"w-full appearance-none bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all font-medium",children:[(0,s.jsx)("option",{value:"Sneakers",children:"Sneakers"}),(0,s.jsx)("option",{value:"Running",children:"Running"}),(0,s.jsx)("option",{value:"Formal",children:"Formal"}),(0,s.jsx)("option",{value:"Botas",children:"Botas"}),(0,s.jsx)("option",{value:"Accesorios",children:"Accesorios"})]}),(0,s.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"Precio Base ($)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:"$"}),(0,s.jsx)("input",{required:!0,type:"number",min:"0",step:"0.01",value:z,onChange:e=>E(e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl pl-8 pr-4 py-3 text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all font-mono font-bold",placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1.5",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700",children:"Descripci\xf3n"}),(0,s.jsxs)("button",{type:"button",onClick:O,disabled:m,className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50 px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 transition-colors",children:[m?(0,s.jsx)(f.Z,{className:"animate-spin",size:12}):(0,s.jsx)(N.Z,{size:12}),m?"Generando...":"Completar con IA"]})]}),(0,s.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),rows:4,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none resize-none transition-all placeholder:text-slate-400",placeholder:"Detalles del producto..."})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"Imagen del Producto"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"relative group cursor-pointer border-2 border-dashed border-slate-200 hover:border-orange-400 hover:bg-orange-50/50 rounded-2xl p-8 transition-all text-center bg-slate-50",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];D(t),B(URL.createObjectURL(t))}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 text-slate-400 group-hover:text-orange-600 transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center border border-slate-100 group-hover:scale-110 transition-transform",children:(0,s.jsx)(v.Z,{size:20})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-slate-700",children:"Click para subir imagen"}),(0,s.jsx)("span",{className:"text-xs text-slate-400",children:"JPG, PNG (M\xe1x. 5MB)"})]})]})]}),I&&(0,s.jsxs)("div",{className:"relative aspect-video rounded-xl overflow-hidden border border-slate-200 bg-slate-100 group shadow-sm",children:[(0,s.jsx)(y.default,{src:I,alt:"Preview",fill:!0,className:"object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>{D(null),B(""),A("")},className:"p-2 bg-white text-red-500 rounded-full hover:bg-red-50 transition-colors shadow-lg transform hover:scale-110",children:(0,s.jsx)(j.Z,{size:20})})})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Stock por Talle"}),(0,s.jsx)("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-200",children:(0,s.jsx)("div",{className:"grid grid-cols-5 gap-3",children:["36","37","38","39","40","41","42","43","44","45"].map(e=>(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-500",children:e}),(0,s.jsx)("input",{type:"number",min:"0",placeholder:"0",value:M[e]||"",onChange:t=>L(e,t.target.value),className:"w-full bg-white border border-slate-200 rounded-lg px-1 py-2 text-center text-sm font-bold text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all placeholder:text-slate-300"})]},e))})})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end pt-6 mt-2 border-t border-slate-100",children:[(0,s.jsx)("button",{type:"button",onClick:d,className:"px-6 py-3.5 rounded-xl font-bold text-slate-500 hover:text-slate-800 hover:bg-slate-50 mr-3 transition-colors",children:"Cancelar"}),(0,s.jsxs)("button",{type:"submit",disabled:c,className:"bg-orange-600 hover:bg-orange-700 text-white px-8 py-3.5 rounded-xl font-bold flex items-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-orange-600/20 hover:shadow-orange-600/30 hover:-translate-y-0.5",children:[c?(0,s.jsx)(f.Z,{className:"animate-spin",size:20}):(0,s.jsx)(W.Z,{size:20}),i?"Guardar Cambios":"Crear Producto"]})]})]})};var U=a(61649),G=a(92735),q=a(41671),H=a(2093);function Q(e){let{onClose:t,onSuccess:a}=e,[l,i]=(0,r.useState)(null),[o,d]=(0,r.useState)([]),[c,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)("idle"),[p,b]=(0,r.useState)([]),g=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){i(a),h("parsing"),b([]);try{let e=await N(a);d(e),h("idle"),b(["Archivo parseado correctamente: ".concat(e.length," filas encontradas.")])}catch(e){h("error"),b(["Error al leer el archivo. Aseg\xfarate de que sea un CSV o Excel v\xe1lido."])}}},N=e=>new Promise((t,a)=>{let s=new FileReader;s.onload=e=>{try{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result,r=H.ij(a,{type:"binary"}),l=r.SheetNames[0],i=r.Sheets[l],o=H.P6.sheet_to_json(i);t(o)}catch(e){a(e)}},s.onerror=e=>a(e),s.readAsBinaryString(e)}),w=async()=>{if(0!==o.length){x(!0),b(e=>[...e,"Iniciando carga masiva..."]);try{let e=await z(o);e.success?(b(t=>[...t,"✅ Carga completada. ".concat(e.successCount," productos importados.")]),e.errors&&e.errors.length>0&&e.errors.forEach(e=>{b(t=>[...t,"⚠️ Fila ".concat(e.row,": ").concat(e.error)])}),n.A.success("Se importaron ".concat(e.successCount," productos")),setTimeout(()=>{a(),t()},2e3)):(b(t=>[...t,"❌ Error: ".concat(e.error||"Fall\xf3 la importaci\xf3n")]),e.errors&&e.errors.forEach(e=>{b(t=>[...t,"⚠️ Fila ".concat(e.row,": ").concat(e.error)])}))}catch(e){b(e=>[...e,"❌ Error de red o servidor."])}finally{x(!1)}}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl bg-white border border-slate-200 rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[(0,s.jsx)(U.Z,{className:"text-orange-600"}),"Carga Masiva de Productos"]}),(0,s.jsx)("p",{className:"text-slate-500 text-sm mt-1 font-medium",children:"Sube un archivo Excel (.xlsx) o CSV para importar productos."})]}),(0,s.jsx)("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 hover:bg-slate-200 rounded-lg",children:(0,s.jsx)(j.Z,{size:24})})]}),(0,s.jsxs)("div",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:(0,s.jsx)(G.Z,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-blue-900 font-bold text-sm",children:"Plantilla de Importaci\xf3n"}),(0,s.jsx)("p",{className:"text-blue-600/80 text-xs",children:"Descarga el formato correcto para evitar errores."})]})]}),(0,s.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>{let e=[{name:"Ejemplo Zapatilla",description:"Descripci\xf3n del producto",category:"Sneakers",base_price:150,stock_by_size:JSON.stringify({40:10,42:5}),image_url:"https://example.com/image.jpg"}],t=H.P6.json_to_sheet(e),a=H.P6.book_new();H.P6.book_append_sheet(a,t,"Plantilla"),H.NC(a,"plantilla_productos.xlsx")},className:"border-blue-200 text-blue-700 hover:bg-blue-100 bg-white shadow-sm",children:"Descargar Plantilla"})]}),(0,s.jsxs)("div",{className:"relative border-2 border-dashed border-slate-300 hover:border-orange-500 rounded-2xl p-8 transition-all bg-slate-50 text-center group hover:bg-orange-50/30",children:[(0,s.jsx)("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:g,disabled:c,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,s.jsx)("div",{className:"flex flex-col items-center gap-3 text-slate-400 group-hover:text-orange-600 transition-colors",children:"parsing"===m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{size:48,className:"text-orange-500 animate-spin"}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:"Analizando archivo..."})]}):l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.Z,{size:48,className:"text-emerald-500"}),(0,s.jsx)("span",{className:"font-bold text-slate-900",children:l.name}),(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:[(l.size/1024).toFixed(1)," KB"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{size:48,className:"text-slate-300 group-hover:text-orange-400 transition-colors"}),(0,s.jsx)("span",{className:"font-bold text-slate-700",children:"Arrastra tu archivo aqu\xed o haz clic para buscar"}),(0,s.jsx)("span",{className:"text-xs text-slate-500",children:"Soporta .xlsx y .csv"})]})})]}),p.length>0&&(0,s.jsx)("div",{className:"bg-slate-900 rounded-xl p-4 border border-slate-800 max-h-40 overflow-y-auto font-mono text-xs shadow-inner",children:p.map((e,t)=>(0,s.jsx)("div",{className:"mb-1 ".concat(e.includes("❌")||e.includes("⚠️")?"text-red-400":e.includes("✅")?"text-emerald-400":"text-slate-400"),children:e},t))}),o.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600 bg-emerald-50 p-3 rounded-lg border border-emerald-100",children:[(0,s.jsx)(q.Z,{size:16,className:"text-emerald-600"}),(0,s.jsxs)("span",{children:["Listo para importar ",(0,s.jsx)("strong",{children:o.length})," productos."]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3",children:[(0,s.jsx)(u.z,{variant:"ghost",onClick:t,disabled:c,className:"text-slate-500 hover:text-slate-900 hover:bg-slate-100 font-medium",children:"Cancelar"}),(0,s.jsx)(u.z,{onClick:w,disabled:!l||0===o.length||c,className:"bg-orange-600 hover:bg-orange-700 text-white min-w-[140px] font-bold shadow-lg shadow-orange-600/20",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):"Importar Productos"})]})]})})}var J=a(53113),K=a(99397),Y=(0,C.$)("cd11925c668d782d8c1d1c2768a9fe538a09c15a");function X(e){let{onClose:t,onSuccess:a}=e,[l,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!1),[c,x]=(0,r.useState)([]),[m,h]=(0,r.useState)("upload"),[p,b]=(0,r.useState)(!1),[g,N]=(0,r.useState)({}),w=(0,r.useRef)(null),k=async()=>{if(0===l.length)return;d(!0);let e=new FormData;l.forEach(t=>e.append("files",t));try{let t=await Y(e);if(t.success){let e=t.results.filter(e=>!!e&&"url"in e&&!!e.url&&!("error"in e)).map(e=>({fileName:e.fileName,url:e.url}));x(e);let a={};e.forEach(e=>{let t=e.fileName.split(".").slice(0,-1).join(".").replace(/[-_]/g," ").replace(/\d+/g,"").trim();a[e.url]={name:t||"Nuevo Producto",price:"0",category:"Sneakers"}}),N(a),h("associate"),n.A.success("".concat(e.length," im\xe1genes subidas correctamente"))}else n.A.error("Error al subir im\xe1genes")}catch(e){n.A.error("Error de conexi\xf3n")}finally{d(!1)}},C=async()=>{b(!0);let e=0;try{for(let t of c){let a=g[t.url];if(!a)continue;let s=new FormData;s.append("name",a.name),s.append("base_price",a.price),s.append("category",a.category),s.append("description","Producto creado desde carga masiva de im\xe1genes"),s.append("image_url",t.url),s.append("stock_by_size",JSON.stringify({Unique:10})),await Z(s),e++}n.A.success("".concat(e," productos creados exitosamente")),a(),t()}catch(t){let e=t instanceof Error?t.message:"Error al crear algunos productos";n.A.error(e)}finally{b(!1)}},S=(e,t,a)=>{N(s=>({...s,[e]:{...s[e],[t]:a}}))};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl bg-white border border-slate-200 rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[(0,s.jsx)(J.Z,{className:"text-orange-500"}),"Carga Masiva de Im\xe1genes"]}),(0,s.jsx)("p",{className:"text-slate-500 text-sm mt-1 font-medium",children:"upload"===m?"Sube m\xfaltiples im\xe1genes para crear productos autom\xe1ticamente.":"Asocia detalles a las im\xe1genes subidas."})]}),(0,s.jsx)("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 hover:bg-slate-200 rounded-lg",children:(0,s.jsx)(j.Z,{size:24})})]}),(0,s.jsxs)("div",{className:"p-6 flex-1 overflow-y-auto",children:["upload"===m&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed border-slate-300 hover:border-orange-500 rounded-2xl p-12 transition-all bg-slate-50 text-center group cursor-pointer hover:bg-orange-50/30",children:[(0,s.jsx)("input",{ref:w,type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",onChange:e=>{e.target.files&&e.target.files.length>0&&i(Array.from(e.target.files))},className:"hidden"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 text-slate-400 group-hover:text-orange-600",children:[(0,s.jsx)(v.Z,{size:64,className:"text-slate-300 group-hover:text-orange-400 transition-colors"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-lg text-slate-900 block mb-1",children:l.length>0?"".concat(l.length," archivos seleccionados"):"Seleccionar im\xe1genes"}),(0,s.jsx)("span",{className:"text-sm text-slate-500",children:"JPG, PNG, WEBP"})]})]})]}),l.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:l.map((e,t)=>(0,s.jsx)("div",{className:"relative aspect-square bg-slate-100 rounded-xl overflow-hidden border border-slate-200 shadow-sm",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-slate-500 text-xs p-2 text-center font-medium",children:e.name})},t))})]}),"associate"===m&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:c.map((e,t)=>{var a,r,l;return(0,s.jsxs)("div",{className:"flex gap-4 bg-slate-50 p-4 rounded-2xl border border-slate-200 items-start shadow-sm",children:[(0,s.jsx)("div",{className:"relative w-24 h-24 bg-white rounded-xl overflow-hidden flex-shrink-0 border border-slate-200",children:(0,s.jsx)(y.default,{src:e.url,alt:"Uploaded",fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-500 block mb-1.5",children:"Nombre"}),(0,s.jsx)("input",{type:"text",value:(null===(a=g[e.url])||void 0===a?void 0:a.name)||"",onChange:t=>S(e.url,"name",t.target.value),className:"w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all font-medium"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-500 block mb-1.5",children:"Categor\xeda"}),(0,s.jsx)("input",{type:"text",value:(null===(r=g[e.url])||void 0===r?void 0:r.category)||"",onChange:t=>S(e.url,"category",t.target.value),className:"w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all font-medium"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-500 block mb-1.5",children:"Precio ($)"}),(0,s.jsx)("input",{type:"number",value:(null===(l=g[e.url])||void 0===l?void 0:l.price)||"",onChange:t=>S(e.url,"price",t.target.value),className:"w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900 focus:ring-2 focus:ring-orange-200 focus:border-orange-400 outline-none transition-all font-bold font-mono"})]})]})]},t)})})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3",children:[(0,s.jsx)(u.z,{variant:"ghost",onClick:t,disabled:o||p,className:"text-slate-500 hover:text-slate-900 hover:bg-slate-100 font-medium",children:"Cancelar"}),"upload"===m?(0,s.jsx)(u.z,{onClick:k,disabled:0===l.length||o,className:"bg-orange-600 hover:bg-orange-700 text-white min-w-[140px] font-bold shadow-lg shadow-orange-600/20",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Subiendo..."]}):"Subir Im\xe1genes"}):(0,s.jsx)(u.z,{onClick:C,disabled:p,className:"bg-emerald-600 hover:bg-emerald-700 text-white min-w-[140px] font-bold shadow-lg shadow-emerald-600/20",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.Z,{className:"mr-2 h-4 w-4"}),"Crear Productos"]})})]})]})})}var ee=a(15291),et=a(30401);function ea(e){let{selectedIds:t,products:a,onClearSelection:l,onSuccess:i}=e,[o,d]=(0,r.useState)("price"),[c,x]=(0,r.useState)(""),[m,p]=(0,r.useState)("fixed"),[b,g]=(0,r.useState)(!1),v=async()=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar ".concat(t.length," productos? Esta acci\xf3n no se puede deshacer."))){g(!0);try{let e=await _(t);e.success?(n.A.success("".concat(e.count," productos eliminados.")),i(),l()):n.A.error("Error al eliminar productos.")}catch(e){n.A.error("Error al procesar la eliminaci\xf3n.")}finally{g(!1)}}},j=async()=>{if(c||"status"===o){g(!0);try{let e=t.map(e=>{let t=a.find(t=>t.id===e);if(!t)return{id:e,data:{}};let s={};if("price"===o){let e=Number(t.base_price),a=Number(c);"fixed"===m&&(s.base_price=a),"percent_inc"===m&&(s.base_price=e*(1+a/100)),"percent_dec"===m&&(s.base_price=e*(1-a/100))}if("stock"===o){let e=Number(c),a=t.stock_by_size||{},r=Object.keys(a)[0]||"Unique";if("set"===m)s.stock_by_size={[r]:e};else if("add"===m){let t=Number(a[r]||0);s.stock_by_size={...a,[r]:t+e}}}return"category"===o&&(s.category=c),"description"===o&&("set"===m?s.description=c:"append"===m&&(s.description=(t.description||"")+" "+c)),"status"===o&&(s.is_active="active"===c),{id:e,data:s}}),s=await E(e);s.success?(n.A.success("".concat(s.successCount," productos actualizados.")),i(),l()):n.A.error("Hubo errores al actualizar algunos productos.")}catch(e){n.A.error("Error al procesar la edici\xf3n masiva.")}finally{g(!1)}}};return(0,s.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-40 bg-white border border-slate-200 shadow-2xl shadow-orange-900/10 rounded-2xl p-4 flex items-center gap-4 animate-in slide-in-from-bottom-10 fade-in duration-300 w-[95%] max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 border-r border-slate-200 pr-4",children:[(0,s.jsxs)("div",{className:"bg-orange-100 text-orange-700 px-3 py-1.5 rounded-full text-xs font-bold border border-orange-200 flex items-center gap-1.5",children:[(0,s.jsx)(et.Z,{size:12,strokeWidth:3}),t.length," Seleccionados"]}),(0,s.jsx)("button",{onClick:l,className:"text-slate-400 hover:text-slate-600 text-sm font-medium transition-colors",children:"Cancelar"})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-wrap items-center gap-3",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-slate-700 hidden sm:inline",children:"Acci\xf3n:"}),(0,s.jsxs)(ee.Ph,{value:o,onValueChange:e=>d(e),children:[(0,s.jsx)(ee.i4,{className:"w-[130px] bg-slate-50 border-slate-200 text-slate-900 font-medium",children:(0,s.jsx)(ee.ki,{})}),(0,s.jsxs)(ee.Bw,{children:[(0,s.jsx)(ee.Ql,{value:"price",children:"Precio"}),(0,s.jsx)(ee.Ql,{value:"category",children:"Categor\xeda"}),(0,s.jsx)(ee.Ql,{value:"stock",children:"Stock"}),(0,s.jsx)(ee.Ql,{value:"description",children:"Descripci\xf3n"}),(0,s.jsx)(ee.Ql,{value:"status",children:"Estado"})]})]}),"price"===o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ee.Ph,{value:m,onValueChange:e=>p(e),children:[(0,s.jsx)(ee.i4,{className:"w-[140px] bg-slate-50 border-slate-200 text-slate-900 font-medium",children:(0,s.jsx)(ee.ki,{})}),(0,s.jsxs)(ee.Bw,{children:[(0,s.jsx)(ee.Ql,{value:"fixed",children:"Fijo ($)"}),(0,s.jsx)(ee.Ql,{value:"percent_inc",children:"Aumentar %"}),(0,s.jsx)(ee.Ql,{value:"percent_dec",children:"Descontar %"})]})]}),(0,s.jsx)(h.I,{type:"number",placeholder:"Valor",value:c,onChange:e=>x(e.target.value),className:"w-[100px] bg-slate-50 border-slate-200 text-slate-900"})]}),"stock"===o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ee.Ph,{value:m,onValueChange:e=>p(e),children:[(0,s.jsx)(ee.i4,{className:"w-[140px] bg-slate-50 border-slate-200 text-slate-900 font-medium",children:(0,s.jsx)(ee.ki,{})}),(0,s.jsxs)(ee.Bw,{children:[(0,s.jsx)(ee.Ql,{value:"set",children:"Establecer"}),(0,s.jsx)(ee.Ql,{value:"add",children:"A\xf1adir (+)"})]})]}),(0,s.jsx)(h.I,{type:"number",placeholder:"Cantidad",value:c,onChange:e=>x(e.target.value),className:"w-[100px] bg-slate-50 border-slate-200 text-slate-900"})]}),"category"===o&&(0,s.jsx)(h.I,{type:"text",placeholder:"Nueva categor\xeda...",value:c,onChange:e=>x(e.target.value),className:"flex-1 min-w-[200px] bg-slate-50 border-slate-200 text-slate-900"}),"description"===o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ee.Ph,{value:m,onValueChange:e=>p(e),children:[(0,s.jsx)(ee.i4,{className:"w-[140px] bg-slate-50 border-slate-200 text-slate-900 font-medium",children:(0,s.jsx)(ee.ki,{})}),(0,s.jsxs)(ee.Bw,{children:[(0,s.jsx)(ee.Ql,{value:"set",children:"Reemplazar"}),(0,s.jsx)(ee.Ql,{value:"append",children:"Agregar al final"})]})]}),(0,s.jsx)(h.I,{type:"text",placeholder:"Texto de descripci\xf3n...",value:c,onChange:e=>x(e.target.value),className:"flex-1 min-w-[200px] bg-slate-50 border-slate-200 text-slate-900"})]}),"status"===o&&(0,s.jsxs)(ee.Ph,{value:c,onValueChange:x,children:[(0,s.jsx)(ee.i4,{className:"w-[200px] bg-slate-50 border-slate-200 text-slate-900 font-medium",children:(0,s.jsx)(ee.ki,{placeholder:"Seleccionar estado"})}),(0,s.jsxs)(ee.Bw,{children:[(0,s.jsx)(ee.Ql,{value:"active",children:"Activo"}),(0,s.jsx)(ee.Ql,{value:"inactive",children:"Inactivo"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 pl-4 border-l border-slate-200",children:[(0,s.jsxs)(u.z,{onClick:j,disabled:b||!c,className:"bg-slate-900 hover:bg-slate-800 text-white font-bold shadow-lg shadow-slate-900/20",children:[b?(0,s.jsx)(f.Z,{className:"animate-spin"}):(0,s.jsx)(W.Z,{size:18,className:"mr-2"}),"Aplicar"]}),(0,s.jsx)("div",{className:"w-px h-8 bg-slate-200 mx-2"}),(0,s.jsx)(u.z,{variant:"outline",size:"icon",onClick:()=>{let e=a.filter(e=>t.includes(e.id));if(0===e.length)return;let s=new Blob([["ID,Nombre,Categor\xeda,Precio,Stock,Estado,Descripci\xf3n",...e.map(e=>{let t=e.stock_by_size?Object.values(e.stock_by_size).reduce((e,t)=>Number(e)+Number(t),0):0;return[e.id,'"'.concat(e.name.replace(/"/g,'""'),'"'),e.category||"",e.base_price,t,e.is_active?"Activo":"Inactivo",'"'.concat((e.description||"").replace(/"/g,'""'),'"')].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),l=document.createElement("a");l.setAttribute("href",r),l.setAttribute("download","productos_export_".concat(new Date().toISOString().slice(0,10),".csv")),document.body.appendChild(l),l.click(),document.body.removeChild(l),n.A.success("Exportaci\xf3n completada")},disabled:b,title:"Exportar CSV",className:"border-slate-200 hover:bg-slate-50 text-slate-600",children:(0,s.jsx)(G.Z,{size:18})}),(0,s.jsx)(u.z,{variant:"outline",size:"icon",onClick:v,disabled:b,title:"Eliminar seleccionados",className:"border-red-100 bg-red-50 hover:bg-red-100 text-red-600",children:(0,s.jsx)(B.Z,{size:18})})]})]})}var es=a(74291),er=a(54001),el=a(87769),ei=a(42208);function eo(e){let{isOpen:t,onClose:a}=e,{geminiApiKey:l,setGeminiApiKey:i}=$(),[o,d]=(0,r.useState)(l),[c,x]=(0,r.useState)(!1);return(0,s.jsx)(es.Vq,{open:t,onOpenChange:a,children:(0,s.jsxs)(es.cZ,{className:"sm:max-w-md",children:[(0,s.jsxs)(es.fK,{children:[(0,s.jsxs)(es.$N,{className:"flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"text-purple-500",size:20}),"Configuraci\xf3n de IA"]}),(0,s.jsx)(es.Be,{children:"Ingresa tu API Key de Google Gemini para habilitar la generaci\xf3n autom\xe1tica de descripciones."})]}),(0,s.jsx)("div",{className:"space-y-4 py-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b._,{htmlFor:"api-key",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(er.Z,{size:14})," Gemini API Key"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.I,{id:"api-key",type:c?"text":"password",value:o,onChange:e=>d(e.target.value),placeholder:"Pegar API Key aqu\xed...",className:"pr-10"}),(0,s.jsx)("button",{type:"button",onClick:()=>x(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:c?(0,s.jsx)(el.Z,{size:16}):(0,s.jsx)(ei.Z,{size:16})})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Tu clave se guarda localmente en tu navegador. Puedes obtener una en"," ",(0,s.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-purple-600 hover:underline font-medium",children:"Google AI Studio"}),"."]})]})}),(0,s.jsxs)(es.cN,{children:[(0,s.jsx)(u.z,{variant:"outline",onClick:a,children:"Cancelar"}),(0,s.jsxs)(u.z,{onClick:()=>{i(o),n.A.success("Configuraci\xf3n de AI guardada correctamente"),a()},className:"bg-purple-600 hover:bg-purple-700 text-white gap-2",children:[(0,s.jsx)(W.Z,{size:16}),"Guardar Configuraci\xf3n"]})]})]})})}var en=(0,C.$)("bb421e508a2433ac30ad53de4b420790a765d26e"),ed=a(28842),ec=a(73559),ex=a(73247),em=a(3577),eu=a(55736),eh=a(7586),ep=a(35363),eb=a(21563),eg=a(57586),ef=a(48279),ev=a(99376),ej=a(84603);let eN=()=>{let{user:e}=(0,ej.a)(),t=(null==e?void 0:e.role)==="admin",a=(0,ev.useSearchParams)(),l=a.get("search")||"",[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[w,y]=(0,r.useState)(void 0),[k,C]=(0,r.useState)(l),[S,z]=(0,r.useState)(l),[E,_]=(0,r.useState)("all"),[Z,P]=(0,r.useState)("grid"),[F,D]=(0,r.useState)("active"),[I,B]=(0,r.useState)("all"),[M,W]=(0,r.useState)("newest"),[L,O]=(0,r.useState)(""),[$,G]=(0,r.useState)(""),[q,H]=(0,r.useState)(5),[Y,ee]=(0,r.useState)(!1),[et,es]=(0,r.useState)(new Set),er=a.get("search");(0,r.useEffect)(()=>{er&&C(er)},[er]),(0,r.useEffect)(()=>{let e=window.localStorage.getItem("catalogViewMode");("grid"===e||"table"===e)&&P(e)},[]),(0,r.useEffect)(()=>{window.localStorage.setItem("catalogViewMode",Z)},[Z]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{z(k.trim())},350);return()=>clearTimeout(e)},[k]);let el=(0,r.useCallback)(async()=>{c(!0);try{let e=t?F:"active",a=await A(S,void 0,e);o(a||[])}catch(e){console.error("Fetch products error:",e)}finally{c(!1)}},[S,F,t]);(0,r.useEffect)(()=>{el()},[el]),(0,r.useEffect)(()=>{t||"active"===F||D("active")},[t,F]),(0,r.useEffect)(()=>{es(e=>{let t=new Set(i.map(e=>e.id));return new Set([...e].filter(e=>t.has(e)))})},[i]);let ei=e=>{let t=new Set(et);t.has(e)?t.delete(e):t.add(e),es(t)},eN=()=>{et.size===eE.length?es(new Set):es(new Set(eE.map(e=>e.id)))},ew=()=>{el()},ey=(0,r.useCallback)(e=>e.stock_by_size?Object.values(e.stock_by_size).reduce((e,t)=>Number(e)+Number(t),0):0,[]),ek=(0,r.useMemo)(()=>{let e=i;if("all"!==E&&(e=e.filter(e=>e.category===E)),t&&"all"!==F){let t="active"===F;e=e.filter(e=>e.is_active===t)}"all"!==I&&(e=e.filter(e=>{let t=ey(e);return"out"===I?0===t:"low"===I?t>0&&t<=q:"healthy"!==I||t>q}));let a=L?Number(L):void 0,s=$?Number($):void 0;return void 0===a||Number.isNaN(a)||(e=e.filter(e=>Number(e.base_price)>=a)),void 0===s||Number.isNaN(s)||(e=e.filter(e=>Number(e.base_price)<=s)),e},[i,E,F,I,L,$,q,t,ey]),eC=(0,r.useMemo)(()=>{let e=[...ek];switch(M){case"name_asc":e.sort((e,t)=>e.name.localeCompare(t.name));break;case"name_desc":e.sort((e,t)=>t.name.localeCompare(e.name));break;case"price_asc":e.sort((e,t)=>Number(e.base_price)-Number(t.base_price));break;case"price_desc":e.sort((e,t)=>Number(t.base_price)-Number(e.base_price));break;case"stock_asc":e.sort((e,t)=>ey(e)-ey(t));break;case"stock_desc":e.sort((e,t)=>ey(t)-ey(e));break;default:e.sort((e,t)=>{let a=e.created_at?new Date(e.created_at).getTime():0;return(t.created_at?new Date(t.created_at).getTime():0)-a})}return e},[ek,M,ey]),eS=(0,r.useMemo)(()=>["all",...Array.from(new Set(i.map(e=>e.category).filter(e=>!!e)))],[i]),ez=(0,r.useMemo)(()=>{let e=i.length,t=i.filter(e=>e.is_active).length,a=i.filter(e=>0===ey(e)).length;return{totalProducts:e,lowStock:i.filter(e=>{let t=ey(e);return t>0&&t<=q}).length,outOfStock:a,totalValue:i.reduce((e,t)=>{let a=ey(t);return e+Number(t.base_price)*a},0),activeCount:t,inactiveCount:e-t}},[i,q,ey]),eE=eC,e_=async()=>{let e=en();n.A.promise(e,{loading:"Inicializando talles...",success:e=>(el(),"Se actualizaron ".concat(e.count," productos con talles por defecto.")),error:"Error al inicializar talles"})},eA="all"!==E||"all"!==I||t&&"active"!==F||""!==L||""!==$||5!==q||"newest"!==M||""!==k.trim(),eZ=()=>{C(""),_("all"),B("all"),W("newest"),O(""),G(""),H(5),t&&D("active")},eP=(0,r.useCallback)(()=>{if(0===eE.length)return;let e=new Blob([["ID,Nombre,Categor\xeda,Precio,Stock,Estado,Descripci\xf3n",...eE.map(e=>{let t=ey(e);return[e.id,'"'.concat(e.name.replace(/"/g,'""'),'"'),e.category||"",e.base_price,t,e.is_active?"Activo":"Inactivo",'"'.concat((e.description||"").replace(/"/g,'""'),'"')].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","catalogo_filtrado_".concat(new Date().toISOString().slice(0,10),".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)},[eE,ey]);return(0,s.jsxs)("div",{className:"space-y-8 pb-20 relative min-h-screen",children:[(0,s.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-end justify-between gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tighter mb-3",children:["Gesti\xf3n de ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-amber-600",children:"Cat\xe1logo"})]}),(0,s.jsx)("p",{className:"text-slate-500 text-lg max-w-xl font-medium",children:"Administra tu inventario de forma visual e intuitiva."}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600",children:[eE.length," resultados"]}),t&&(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-emerald-50 text-emerald-700",children:[ez.activeCount," activos"]}),t&&ez.inactiveCount>0&&(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600",children:[ez.inactiveCount," inactivos"]}),eA&&(0,s.jsxs)("button",{onClick:eZ,className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-orange-50 text-orange-700 hover:bg-orange-100 transition-colors",children:[(0,s.jsx)(j.Z,{size:12})," Limpiar filtros"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-1 max-w-4xl",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center",children:[(0,s.jsx)("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Total Productos"}),(0,s.jsx)("span",{className:"text-2xl font-black text-slate-900",children:ez.totalProducts})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center",children:[(0,s.jsx)("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Bajo Stock"}),(0,s.jsx)("span",{className:"text-2xl font-black ".concat(ez.lowStock>0?"text-amber-600":"text-emerald-500"),children:ez.lowStock})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center",children:[(0,s.jsx)("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Sin Stock"}),(0,s.jsx)("span",{className:"text-2xl font-black ".concat(ez.outOfStock>0?"text-red-500":"text-emerald-500"),children:ez.outOfStock})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center text-center",children:[(0,s.jsx)("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Valor Inventario"}),(0,s.jsxs)("span",{className:"text-2xl font-black text-slate-900",children:["$",ez.totalValue.toLocaleString()]})]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>{y(void 0),m(!0)},className:"flex-1 md:flex-none px-6 py-3.5 rounded-2xl font-bold text-sm text-white bg-slate-900 hover:bg-slate-800 transition-all shadow-xl shadow-slate-900/10 flex items-center justify-center gap-2",children:[(0,s.jsx)(K.Z,{size:18})," Nuevo Producto"]}),(0,s.jsxs)("button",{onClick:()=>b(!0),className:"px-6 py-3.5 rounded-2xl font-bold text-sm text-slate-700 bg-white border border-slate-200 hover:bg-slate-50 transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(J.Z,{size:18})," Carga Masiva"]}),(0,s.jsxs)("button",{onClick:()=>h(!0),className:"px-6 py-3.5 rounded-2xl font-bold text-sm text-slate-700 bg-white border border-slate-200 hover:bg-slate-50 transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(U.Z,{size:18})," Importar CSV"]}),(0,s.jsxs)("button",{onClick:eP,className:"px-6 py-3.5 rounded-2xl font-bold text-sm text-slate-700 bg-white border border-slate-200 hover:bg-slate-50 transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(ed.Z,{size:18})," Exportar vista"]}),(0,s.jsx)("button",{onClick:()=>v(!0),className:"px-3 py-3.5 rounded-2xl font-bold text-sm text-purple-600 bg-purple-50 border border-purple-100 hover:bg-purple-100 transition-all flex items-center justify-center gap-2",title:"Configuraci\xf3n de IA",children:(0,s.jsx)(N.Z,{size:18})}),(0,s.jsx)("button",{onClick:e_,className:"px-3 py-3.5 rounded-2xl font-bold text-sm text-blue-600 bg-blue-50 border border-blue-100 hover:bg-blue-100 transition-all flex items-center justify-center gap-2",title:"Inicializar Talles (Migraci\xf3n)",children:(0,s.jsx)(ec.Z,{size:18})})]})}),(0,s.jsx)("div",{className:"sticky top-4 z-30 bg-white/80 backdrop-blur-xl border border-white/20 rounded-2xl p-3 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,s.jsx)(ex.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por nombre...",value:k,onChange:e=>C(e.target.value),className:"w-full bg-slate-50/50 border-none rounded-xl py-3 pl-12 pr-10 text-base text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-orange-100 outline-none transition-all"}),k.trim()&&(0,s.jsx)("button",{onClick:()=>C(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:(0,s.jsx)(j.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"relative min-w-[190px] w-full md:w-auto",children:[(0,s.jsx)(em.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),(0,s.jsxs)("select",{value:E,onChange:e=>_(e.target.value),className:"w-full appearance-none bg-slate-50/50 border-none rounded-xl py-3 pl-10 pr-8 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none cursor-pointer",children:[(0,s.jsx)("option",{value:"all",children:"Todas las categor\xedas"}),eS.map(e=>"all"!==e&&(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"relative min-w-[190px] w-full md:w-auto",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),(0,s.jsxs)("select",{value:M,onChange:e=>W(e.target.value),className:"w-full appearance-none bg-slate-50/50 border-none rounded-xl py-3 pl-10 pr-8 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none cursor-pointer",children:[(0,s.jsx)("option",{value:"newest",children:"M\xe1s recientes"}),(0,s.jsx)("option",{value:"name_asc",children:"Nombre (A-Z)"}),(0,s.jsx)("option",{value:"name_desc",children:"Nombre (Z-A)"}),(0,s.jsx)("option",{value:"price_asc",children:"Precio (menor)"}),(0,s.jsx)("option",{value:"price_desc",children:"Precio (mayor)"}),(0,s.jsx)("option",{value:"stock_desc",children:"Stock (mayor)"}),(0,s.jsx)("option",{value:"stock_asc",children:"Stock (menor)"})]})]}),(0,s.jsxs)("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:[(0,s.jsx)("button",{onClick:()=>P("grid"),className:"p-2 rounded-lg transition-all ".concat("grid"===Z?"bg-white text-orange-600 shadow-sm":"text-slate-400 hover:text-slate-600"),children:(0,s.jsx)(eu.Z,{size:20})}),(0,s.jsx)("button",{onClick:()=>P("table"),className:"p-2 rounded-lg transition-all ".concat("table"===Z?"bg-white text-orange-600 shadow-sm":"text-slate-400 hover:text-slate-600"),children:(0,s.jsx)(eh.Z,{size:20})})]}),(0,s.jsxs)("button",{onClick:()=>ee(e=>!e),className:"px-4 py-2 text-sm font-bold rounded-xl flex items-center gap-2 transition-colors ".concat(Y?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600 hover:text-orange-600"),children:[(0,s.jsx)(ep.Z,{size:16})," Filtros"]}),et.size>0&&(0,s.jsx)("div",{className:"flex items-center gap-2 px-4 py-2 bg-orange-50 text-orange-700 rounded-xl text-sm font-bold border border-orange-100 animate-pulse",children:(0,s.jsxs)("span",{children:[et.size," seleccionados"]})}),eE.length>0&&(0,s.jsx)("button",{onClick:eN,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-orange-600 hover:bg-orange-50 rounded-xl transition-colors",children:et.size===eE.length?"Deseleccionar todo":"Seleccionar todo"})]}),Y&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{value:I,onChange:e=>B(e.target.value),className:"w-full appearance-none bg-slate-50/50 border-none rounded-xl py-3 px-4 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none cursor-pointer",children:[(0,s.jsx)("option",{value:"all",children:"Stock: Todos"}),(0,s.jsx)("option",{value:"out",children:"Stock: Sin stock"}),(0,s.jsx)("option",{value:"low",children:"Stock: Bajo"}),(0,s.jsx)("option",{value:"healthy",children:"Stock: Saludable"})]})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("select",{value:F,onChange:e=>D(e.target.value),disabled:!t,className:"w-full appearance-none bg-slate-50/50 border-none rounded-xl py-3 px-4 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none cursor-pointer disabled:opacity-60",children:[(0,s.jsx)("option",{value:"active",children:"Estado: Activos"}),(0,s.jsx)("option",{value:"inactive",children:"Estado: Inactivos"}),(0,s.jsx)("option",{value:"all",children:"Estado: Todos"})]})}),(0,s.jsx)("input",{type:"number",min:1,value:q,onChange:e=>H(Number(e.target.value)||1),className:"w-full bg-slate-50/50 border-none rounded-xl py-3 px-4 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none",placeholder:"Umbral bajo stock"}),(0,s.jsx)("input",{type:"number",min:0,value:L,onChange:e=>O(e.target.value),className:"w-full bg-slate-50/50 border-none rounded-xl py-3 px-4 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none",placeholder:"Precio min"}),(0,s.jsx)("input",{type:"number",min:0,value:$,onChange:e=>G(e.target.value),className:"w-full bg-slate-50/50 border-none rounded-xl py-3 px-4 text-sm font-medium text-slate-700 focus:ring-2 focus:ring-orange-100 outline-none",placeholder:"Precio max"})]})]})}),d?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 opacity-50",children:[(0,s.jsx)(f.Z,{className:"animate-spin text-orange-500 mb-4",size:48}),(0,s.jsx)("p",{className:"text-slate-400 font-mono text-sm uppercase tracking-widest",children:"Cargando inventario..."})]}):0===eE.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 text-center border-2 border-dashed border-slate-200 rounded-[3rem] bg-slate-50/50",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mb-6 shadow-xl shadow-orange-100 border border-orange-50",children:(0,s.jsx)(eb.Z,{className:"text-orange-400",size:48})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No se encontraron productos"}),(0,s.jsx)("p",{className:"text-slate-500 max-w-md mx-auto mb-8",children:"Intenta ajustar tu b\xfasqueda o crea un nuevo producto para comenzar."}),t&&(0,s.jsx)("button",{onClick:()=>m(!0),className:"text-orange-600 hover:text-orange-700 font-bold text-sm uppercase tracking-wider hover:underline",children:"Crear producto ahora"}),eA&&(0,s.jsx)("button",{onClick:eZ,className:"mt-4 text-slate-600 hover:text-orange-600 font-bold text-sm uppercase tracking-wider",children:"Limpiar filtros y reintentar"})]}):(0,s.jsx)(s.Fragment,{children:"grid"===Z?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(0,s.jsx)(eg.M,{mode:"popLayout",children:eE.map((e,a)=>(0,s.jsx)(ef.E.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.05*a},children:(0,s.jsx)(R,{product:e,onDelete:t?()=>ew():void 0,onEdit:t?()=>{y(e),m(!0)}:void 0,isSelected:et.has(e.id),onToggleSelect:()=>ei(e.id)})},e.id))})}):(0,s.jsx)(T,{products:eE,selectedIds:et,onToggleSelect:ei,onSelectAll:eN,onEdit:t?e=>{y(e),m(!0)}:void 0,onDelete:t?ew:void 0})}),(0,s.jsx)(eg.M,{children:x&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:(0,s.jsx)(ef.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-white rounded-3xl shadow-2xl",children:(0,s.jsx)(V,{product:w,onSuccess:()=>{m(!1),y(void 0),el()},onCancel:()=>{m(!1),y(void 0)}})})})}),u&&(0,s.jsx)(Q,{onClose:()=>h(!1),onSuccess:el}),p&&(0,s.jsx)(X,{onClose:()=>b(!1),onSuccess:el}),(0,s.jsx)(eo,{isOpen:g,onClose:()=>v(!1)}),et.size>0&&t&&(0,s.jsx)(ea,{selectedIds:Array.from(et),products:i,onClearSelection:()=>es(new Set),onSuccess:el})]})};var ew=a(95252),ey=a(70525),ek=a(95805);let eC=e=>{let{stats:t}=e,a=t.totalRevenue,r=t.totalOrders,l=t.totalProducts,i=t.activeCustomers,o=[{title:"Ingresos Totales",value:"$".concat(a.toLocaleString("es-AR")),change:"+".concat(t.revenueGrowth,"% vs mes anterior"),icon:ew.Z,color:"text-emerald-400",bg:"bg-emerald-500/10",borderColor:"border-emerald-500/20"},{title:"Pedidos del Mes",value:r.toString(),change:"+".concat(t.ordersGrowth,"% vs mes anterior"),icon:F.Z,color:"text-blue-400",bg:"bg-blue-500/10",borderColor:"border-blue-500/20"},{title:"Productos Activos",value:l.toString(),change:"Inventario actual",icon:ey.Z,color:"text-purple-400",bg:"bg-purple-500/10",borderColor:"border-purple-500/20"},{title:"Clientes Activos",value:i.toString(),change:"Total registrados",icon:ek.Z,color:"text-orange-400",bg:"bg-orange-500/10",borderColor:"border-orange-500/20"}];return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-white to-slate-50 rounded-2xl border border-slate-200/60 shadow-lg shadow-slate-900/5"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-blue-500/10 to-transparent rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,s.jsxs)("div",{className:"relative p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br ".concat(0===t?"from-emerald-500 to-emerald-600":1===t?"from-blue-500 to-blue-600":2===t?"from-purple-500 to-purple-600":"from-amber-500 to-amber-600"," shadow-lg shadow-").concat(0===t?"emerald":1===t?"blue":2===t?"purple":"amber","-600/30 group-hover:scale-110 group-hover:rotate-3 transition-all duration-300"),children:(0,s.jsx)(e.icon,{size:24,className:"text-white",strokeWidth:2.5})}),(0,s.jsx)("div",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-1 border border-emerald-100",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:e.title}),(0,s.jsx)("div",{className:"text-3xl font-black text-slate-900 tracking-tight mb-1",children:e.value}),(0,s.jsx)("p",{className:"text-slate-400 text-xs font-medium",children:e.change})]})]})]},t))})};var eS=a(38893),ez=a(54405),eE=a(12258),e_=a(71519),eA=a(65432),eZ=a(57240),eP=a(91723),eF=a(40340),eD=a(92934),eI=a(99388),eB=a(82431),eM=a(42449),eR=a(67782),eT=a(92451),eW=a(10407),eL=a(92369),eO=a(82718),e$=a(32060);let eV={pendiente:{label:"Pendiente",color:"bg-amber-500/10 text-amber-600 border-amber-500/20",icon:eP.Z},procesando:{label:"Procesando",color:"bg-blue-500/10 text-blue-600 border-blue-500/20",icon:F.Z},enviado:{label:"Enviado",color:"bg-purple-500/10 text-purple-600 border-purple-500/20",icon:eF.Z},completado:{label:"Completado",color:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",icon:eD.Z},cancelado:{label:"Cancelado",color:"bg-red-500/10 text-red-600 border-red-500/20",icon:eI.Z}};function eU(e){var t,a,l,i,o,d,c,x,m,h,p;let{}=e,[b,g]=(0,r.useState)([]),[v,j]=(0,r.useState)(!0),[N,w]=(0,r.useState)(""),[k,C]=(0,r.useState)("all"),[S,z]=(0,r.useState)(null),[E,_]=(0,r.useState)(1),[A]=(0,r.useState)(10),[Z,P]=(0,r.useState)(new Set),[D,I]=(0,r.useState)({start:"",end:""}),B=(0,r.useCallback)(async()=>{j(!0);try{let e=await (0,eS.AU)({status:"all"!==k?k:void 0});g(e)}catch(e){console.error("Error loading orders:",e),n.A.error("Error al cargar los pedidos")}finally{j(!1)}},[k]);(0,r.useEffect)(()=>{B()},[B]),(0,r.useEffect)(()=>{_(1),P(new Set)},[N,k,D]);let M=async(e,t)=>{try{let a=await (0,eS.E7)(e,t);a.success?(n.A.success("Estado actualizado"),B(),(null==S?void 0:S.id)===e&&z(e=>e?{...e,status:t}:null)):n.A.error(a.message)}catch(e){n.A.error("Error al actualizar")}},R=async e=>{if(0!==Z.size&&window.confirm("\xbfEst\xe1s seguro de cambiar el estado de ".concat(Z.size,' pedidos a "').concat(e,'"?')))try{let t=0;for(let a of Z)(await (0,eS.E7)(a,e)).success&&t++;n.A.success("".concat(t," pedidos actualizados")),B(),P(new Set)}catch(e){n.A.error("Error en actualizaci\xf3n masiva")}},T=(0,r.useMemo)(()=>b.filter(e=>{var t,a;let s=(null===(t=e.customer_name)||void 0===t?void 0:t.toLowerCase().includes(N.toLowerCase()))||e.reference_code.toLowerCase().includes(N.toLowerCase())||(null===(a=e.customer_email)||void 0===a?void 0:a.toLowerCase().includes(N.toLowerCase())),r=!0;return D.start&&new Date(e.created_at)<(0,ez.b)((0,eE.D)(D.start))&&(r=!1),D.end&&r&&new Date(e.created_at)>(0,e_.i)((0,eE.D)(D.end))&&(r=!1),s&&r}),[b,N,D]),W=(0,r.useMemo)(()=>{let e=(E-1)*A;return T.slice(e,e+A)},[T,E,A]),L=Math.ceil(T.length/A),O=e=>{let t=new Set(Z);t.has(e)?t.delete(e):t.add(e),P(t)},$={total:b.length,pendiente:b.filter(e=>"pendiente"===e.status).length,completado:b.filter(e=>"completado"===e.status).length,revenue:b.filter(e=>"completado"===e.status).reduce((e,t)=>e+t.total_amount,0)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight mb-2",children:"Pedidos"}),(0,s.jsx)("p",{className:"text-slate-500",children:"Gestiona y supervisa todas las transacciones de tu tienda."})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(u.z,{onClick:B,variant:"outline",className:"bg-white hover:bg-slate-50 border-slate-200 text-slate-700",children:[(0,s.jsx)(eB.Z,{className:"mr-2 h-4 w-4 ".concat(v?"animate-spin":"")}),"Actualizar"]}),(0,s.jsxs)(u.z,{variant:"outline",className:"bg-white hover:bg-slate-50 border-slate-200 text-slate-700",children:[(0,s.jsx)(G.Z,{className:"mr-2 h-4 w-4"}),"Exportar"]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total",value:$.total,icon:eM.Z,color:"text-blue-600",bg:"bg-blue-50"},{label:"Pendientes",value:$.pendiente,icon:eP.Z,color:"text-amber-600",bg:"bg-amber-50"},{label:"Completados",value:$.completado,icon:eD.Z,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Ingresos",value:(0,s.jsxs)("span",{suppressHydrationWarning:!0,children:["$",$.revenue.toLocaleString("es-AR")]}),icon:ew.Z,color:"text-indigo-600",bg:"bg-indigo-50"}].map(e=>(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(e.bg," flex items-center justify-center"),children:(0,s.jsx)(e.icon,{size:20,className:e.color})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-500",children:e.label}),(0,s.jsx)("p",{className:"text-xl font-bold text-slate-900",children:e.value})]})]},e.label))}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(ex.Z,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar pedido, cliente...",value:N,onChange:e=>w(e.target.value),className:"w-full h-10 pl-10 pr-4 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"date",value:D.start,onChange:e=>I(t=>({...t,start:e.target.value})),className:"h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-600 focus:outline-none focus:border-blue-500"})}),(0,s.jsx)("span",{className:"text-slate-400",children:"-"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"date",value:D.end,onChange:e=>I(t=>({...t,end:e.target.value})),className:"h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-600 focus:outline-none focus:border-blue-500"})})]})]}),(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:["all","pendiente","procesando","enviado","completado","cancelado"].map(e=>(0,s.jsx)("button",{onClick:()=>C(e),className:"px-3 py-2 rounded-lg text-xs font-semibold uppercase tracking-wide whitespace-nowrap transition-all ".concat(k===e?"bg-slate-900 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:"all"===e?"Todos":e},e))})]}),(0,s.jsx)(eg.M,{children:Z.size>0&&(0,s.jsxs)(ef.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex items-center gap-4 pt-4 border-t border-slate-100 overflow-hidden",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-slate-600",children:[Z.size," seleccionados"]}),(0,s.jsx)("div",{className:"h-4 w-px bg-slate-200"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.z,{size:"sm",variant:"outline",onClick:()=>R("procesando"),className:"h-8 text-xs border-blue-200 text-blue-700 hover:bg-blue-50",children:"Marcar Procesando"}),(0,s.jsx)(u.z,{size:"sm",variant:"outline",onClick:()=>R("enviado"),className:"h-8 text-xs border-purple-200 text-purple-700 hover:bg-purple-50",children:"Marcar Enviado"}),(0,s.jsx)(u.z,{size:"sm",variant:"outline",onClick:()=>R("completado"),className:"h-8 text-xs border-emerald-200 text-emerald-700 hover:bg-emerald-50",children:"Marcar Completado"}),(0,s.jsx)(u.z,{size:"sm",variant:"outline",onClick:()=>R("cancelado"),className:"h-8 text-xs border-red-200 text-red-700 hover:bg-red-50",children:"Cancelar"})]})]})})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:v?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,s.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-blue-500 mb-4"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium",children:"Cargando pedidos..."})]}):0===T.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,s.jsx)(ex.Z,{size:24,className:"text-slate-400"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No se encontraron pedidos"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm max-w-xs",children:"Intenta ajustar los filtros o la b\xfasqueda."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-slate-50/50 border-b border-slate-200",children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left w-12",children:(0,s.jsx)("input",{type:"checkbox",className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:Z.size===W.length&&W.length>0,onChange:()=>{Z.size===W.length?P(new Set):P(new Set(W.map(e=>e.id)))}})}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Referencia"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Cliente"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Estado"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Fecha"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:W.map(e=>{var t,a,r,l,i;let o=(null===(t=eV[e.status])||void 0===t?void 0:t.icon)||F.Z;return(0,s.jsxs)("tr",{className:"hover:bg-slate-50/80 transition-colors cursor-pointer ".concat(Z.has(e.id)?"bg-blue-50/30":""),onClick:()=>z(e),children:[(0,s.jsx)("td",{className:"px-6 py-4",onClick:e=>e.stopPropagation(),children:(0,s.jsx)("input",{type:"checkbox",className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500",checked:Z.has(e.id),onChange:()=>O(e.id)})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"font-mono text-xs font-medium text-slate-700 bg-slate-100 px-2 py-1 rounded",children:e.reference_code})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 text-xs font-bold",children:(null===(a=e.customer_name)||void 0===a?void 0:a.charAt(0).toUpperCase())||"?"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:e.customer_name}),e.customer_email&&(0,s.jsx)("p",{className:"text-xs text-slate-500",children:e.customer_email})]})]})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsxs)("span",{suppressHydrationWarning:!0,className:"text-sm font-bold text-slate-900",children:["$",Number(e.total_amount).toLocaleString("es-AR")]}),(0,s.jsxs)("div",{className:"text-xs text-slate-500 mt-0.5",children:[(null===(r=e.items)||void 0===r?void 0:r.length)||0," items"]})]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ".concat(null===(l=eV[e.status])||void 0===l?void 0:l.color),children:[(0,s.jsx)(o,{size:12}),null===(i=eV[e.status])||void 0===i?void 0:i.label]})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"text-sm text-slate-600",children:(0,eA.WU)(new Date(e.created_at),"d MMM, yy",{locale:eZ.es})}),(0,s.jsx)("div",{className:"text-xs text-slate-400",children:(0,eA.WU)(new Date(e.created_at),"HH:mm")})]}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)(e$.h_,{children:[(0,s.jsx)(e$.$F,{asChild:!0,children:(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-slate-700 rounded-lg",children:(0,s.jsx)(eR.Z,{size:16})})}),(0,s.jsxs)(e$.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(e$.Xi,{onClick:()=>z(e),children:[(0,s.jsx)(ei.Z,{className:"mr-2 h-4 w-4"})," Ver Detalles"]}),"completado"!==e.status&&"cancelado"!==e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e$.Xi,{onClick:()=>M(e.id,"completado"),children:[(0,s.jsx)(eD.Z,{className:"mr-2 h-4 w-4 text-emerald-500"})," Completar"]}),(0,s.jsxs)(e$.Xi,{onClick:()=>M(e.id,"cancelado"),children:[(0,s.jsx)(eI.Z,{className:"mr-2 h-4 w-4 text-red-500"})," Cancelar"]})]})]})]})})]},e.id)})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-100 bg-slate-50/30",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-500",children:["Mostrando ",(0,s.jsx)("span",{className:"font-medium text-slate-900",children:W.length})," de ",(0,s.jsx)("span",{className:"font-medium text-slate-900",children:T.length})," pedidos"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===E,className:"h-8 px-2",children:(0,s.jsx)(eT.Z,{size:16})}),(0,s.jsxs)("div",{className:"flex items-center px-2 text-sm font-medium text-slate-700",children:["P\xe1gina ",E," de ",Math.max(1,L)]}),(0,s.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>_(e=>Math.min(L,e+1)),disabled:E===L||0===L,className:"h-8 px-2",children:(0,s.jsx)(eW.Z,{size:16})})]})]})]})}),(0,s.jsx)(es.Vq,{open:!!S,onOpenChange:e=>!e&&z(null),children:(0,s.jsx)(es.cZ,{className:"max-w-2xl p-0 bg-white border-none rounded-2xl shadow-2xl overflow-hidden max-h-[85vh] flex flex-col",children:S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Detalle del Pedido"}),(0,s.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[S.reference_code,(0,s.jsx)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ".concat(null===(t=eV[S.status])||void 0===t?void 0:t.color),children:null===(a=eV[S.status])||void 0===a?void 0:a.label})]}),(0,s.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:["Realizado el ",(0,eA.WU)(new Date(S.created_at),"d 'de' MMMM, yyyy 'a las' HH:mm",{locale:eZ.es})]})]}),(0,s.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>z(null),children:(0,s.jsx)(eI.Z,{className:"text-slate-400 hover:text-slate-700"})})]})}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto flex-1 space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider flex items-center gap-2",children:[(0,s.jsx)(eL.Z,{size:16})," Cliente"]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Nombre"}),(0,s.jsx)("p",{className:"text-sm font-bold text-slate-900",children:S.customer_name})]}),S.customer_email&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Email"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:S.customer_email})]}),(S.customer_phone||(null===(l=S.shippingDetails)||void 0===l?void 0:l.phone))&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Tel\xe9fono"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:S.customer_phone||(null===(i=S.shippingDetails)||void 0===i?void 0:i.phone)})]}),(null===(o=S.shippingDetails)||void 0===o?void 0:o.dni)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"DNI"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:null===(d=S.shippingDetails)||void 0===d?void 0:d.dni})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider flex items-center gap-2",children:[(0,s.jsx)(eF.Z,{size:16})," Env\xedo"]}),(0,s.jsx)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 space-y-3",children:(null===(c=S.shippingDetails)||void 0===c?void 0:c.address)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Direcci\xf3n"}),(0,s.jsx)("p",{className:"text-sm font-bold text-slate-900",children:S.shippingDetails.address})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Ciudad"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:S.shippingDetails.city||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Provincia"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:S.shippingDetails.province||"-"})]})]}),S.shippingDetails.postalCode&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"C\xf3digo Postal"}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:S.shippingDetails.postalCode})]})]}):(0,s.jsx)("p",{className:"text-sm text-slate-500 italic",children:"No hay informaci\xf3n de env\xedo disponible"})})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider flex items-center gap-2",children:[(0,s.jsx)(F.Z,{size:16})," Productos (",(null===(x=S.items)||void 0===x?void 0:x.length)||0,")"]}),(0,s.jsx)("div",{className:"border rounded-xl border-slate-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left font-medium text-slate-500",children:"Producto"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center font-medium text-slate-500",children:"Cant."}),(0,s.jsx)("th",{className:"px-4 py-3 text-right font-medium text-slate-500",children:"Precio"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right font-medium text-slate-500",children:"Total"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:null===(m=S.items)||void 0===m?void 0:m.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-slate-100 relative overflow-hidden flex-shrink-0",children:e.image?(0,s.jsx)(y.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"flex items-center justify-center w-full h-full text-slate-300",children:(0,s.jsx)(F.Z,{size:16})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-slate-900",children:e.name}),e.size&&(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Talle: ",e.size]})]})]})}),(0,s.jsx)("td",{className:"px-4 py-3 text-center text-slate-600",children:e.quantity}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right text-slate-600",suppressHydrationWarning:!0,children:["$",Number(e.price).toLocaleString("es-AR")]}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right font-bold text-slate-900",suppressHydrationWarning:!0,children:["$",(Number(e.price)*e.quantity).toLocaleString("es-AR")]})]},t))}),(0,s.jsx)("tfoot",{className:"bg-slate-50 border-t border-slate-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:3,className:"px-4 py-3 text-right font-bold text-slate-700",children:"Total"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right font-black text-lg text-slate-900",suppressHydrationWarning:!0,children:["$",Number(S.total_amount).toLocaleString("es-AR")]})]})})]})})]}),(null===(h=S.shippingDetails)||void 0===h?void 0:h.notes)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider",children:"Notas del Pedido"}),(0,s.jsx)("div",{className:"p-4 bg-yellow-50 text-yellow-800 rounded-xl text-sm border border-yellow-100",children:S.shippingDetails.notes})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex justify-between items-center gap-3",children:[(0,s.jsx)("div",{children:(S.customer_phone||(null===(p=S.shippingDetails)||void 0===p?void 0:p.phone))&&(0,s.jsxs)(u.z,{variant:"outline",className:"border-green-200 text-green-700 hover:bg-green-50 hover:text-green-800 bg-white",onClick:()=>{var e,t,a;if(!S||!S)return;let s=S.customer_phone||(null===(e=S.shippingDetails)||void 0===e?void 0:e.phone);if(!s){n.A.error("No hay tel\xe9fono registrado para este cliente");return}let r=s.replace(/\D/g,""),l=(null===(t=S.items)||void 0===t?void 0:t.map(e=>"• ".concat(e.quantity,"x ").concat(e.name)).join("%0A"))||"",i=Number(S.total_amount).toLocaleString("es-AR"),o=(S.customer_name||"Cliente").split(" ")[0],d="Hola *".concat(o,"*! \uD83D\uDC4B%0A%0A")+"Te escribimos de *Eter Store* por tu pedido *#".concat(S.reference_code,"*.%0A%0A")+"*Resumen del pedido:*%0A".concat(l,"%0A%0A")+"*Total: $".concat(i,"*%0A")+"Estado actual: ".concat((null===(a=eV[S.status])||void 0===a?void 0:a.label)||S.status,"%0A%0A")+"\xbfNecesitas ayuda para finalizar tu compra o coordinar el env\xedo?";window.open("https://wa.me/".concat(r,"?text=").concat(d),"_blank")},children:[(0,s.jsx)(eO.Z,{className:"mr-2 h-4 w-4"})," Enviar WhatsApp"]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:["completado"!==S.status&&"cancelado"!==S.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.z,{variant:"outline",className:"border-red-200 text-red-700 hover:bg-red-50 hover:text-red-800",onClick:()=>{confirm("\xbfCancelar este pedido?")&&M(S.id,"cancelado")},children:[(0,s.jsx)(eI.Z,{className:"mr-2 h-4 w-4"})," Cancelar Pedido"]}),(0,s.jsxs)(u.z,{className:"bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>M(S.id,"completado"),children:[(0,s.jsx)(eD.Z,{className:"mr-2 h-4 w-4"})," Marcar Completado"]})]}),(0,s.jsx)(u.z,{variant:"secondary",onClick:()=>z(null),children:"Cerrar"})]})]})]})})})]})}var eG=a(69174);let eq=e=>{let{orders:t}=e,a=e=>{switch(e.toLowerCase()){case"completado":case"pagado":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"pendiente":case"procesando":return"bg-amber-50 text-amber-700 border-amber-200";case"cancelado":return"bg-red-50 text-red-700 border-red-200";default:return"bg-slate-50 text-slate-700 border-slate-200"}},r=e=>{switch(e.toLowerCase()){case"completado":return(0,s.jsx)(q.Z,{size:14,className:"mr-1"});case"pendiente":return(0,s.jsx)(eP.Z,{size:14,className:"mr-1"});case"cancelado":return(0,s.jsx)(eI.Z,{size:14,className:"mr-1"});default:return null}};return 0===t.length?(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white border border-slate-200/60 p-12 text-center shadow-lg shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-48 h-48 bg-gradient-to-bl from-slate-100 to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,s.jsx)(eP.Z,{className:"text-slate-400",size:40,strokeWidth:1.5})}),(0,s.jsx)("h3",{className:"text-xl font-black text-slate-900 mb-2 tracking-tight",children:"No hay pedidos recientes"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium",children:"Cuando recibas ventas, aparecer\xe1n aqu\xed en tiempo real."})]})]}):(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white border border-slate-200/60 shadow-lg shadow-slate-900/5",children:[(0,s.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-50 to-white p-6 border-b border-slate-200/60",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-500/10 to-transparent rounded-full blur-2xl"}),(0,s.jsxs)("div",{className:"relative flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-black text-slate-900 tracking-tight",children:"Pedidos Recientes"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm font-medium",children:"Gestiona las \xfaltimas transacciones"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ex.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:14}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar pedido...",className:"bg-white border border-slate-200 rounded-xl py-2 pl-9 pr-4 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 w-[200px] transition-all shadow-sm focus:shadow-md"})]}),(0,s.jsx)(u.z,{variant:"outline",size:"icon",className:"border-slate-200 bg-white hover:bg-slate-50 rounded-xl shadow-sm hover:shadow-md transition-all",children:(0,s.jsx)(em.Z,{size:16,className:"text-slate-600"})})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-slate-200/60 bg-slate-50/50",children:[(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-black text-slate-600 uppercase tracking-wider",children:"ID Pedido"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-black text-slate-600 uppercase tracking-wider",children:"Cliente"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-black text-slate-600 uppercase tracking-wider",children:"Fecha"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-black text-slate-600 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-black text-slate-600 uppercase tracking-wider",children:"Estado"}),(0,s.jsx)("th",{className:"text-right py-4 px-6 text-xs font-black text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-200/60",children:t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,s.jsxs)("td",{className:"py-4 px-6 text-sm font-bold text-slate-900",children:["#",e.id.toString().padStart(4,"0")]}),(0,s.jsx)("td",{className:"py-4 px-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-sm font-black text-white shadow-lg shadow-blue-600/30 group-hover:scale-110 transition-transform",children:e.customer_name.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-slate-900 font-bold",children:e.customer_name}),(0,s.jsx)("div",{className:"text-xs text-slate-500 font-medium",children:e.customer_email})]})]})}),(0,s.jsx)("td",{className:"py-4 px-6 text-sm text-slate-600 font-medium",children:e.created_at?(0,eA.WU)(new Date(e.created_at),"d MMM, yyyy",{locale:eZ.es}):"-"}),(0,s.jsxs)("td",{className:"py-4 px-6 text-sm font-black text-slate-900",children:["$",Number(e.total_amount).toLocaleString("es-AR")]}),(0,s.jsx)("td",{className:"py-4 px-6",children:(0,s.jsxs)(eG.C,{variant:"outline",className:"border ".concat(a(e.status)," flex w-fit items-center px-3 py-1 capitalize font-bold text-xs"),children:[r(e.status),e.status]})}),(0,s.jsx)("td",{className:"py-4 px-6 text-right",children:(0,s.jsxs)(e$.h_,{children:[(0,s.jsx)(e$.$F,{asChild:!0,children:(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-slate-900 hover:bg-slate-100 rounded-lg",children:(0,s.jsx)(eR.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(e$.AW,{align:"end",className:"bg-white border-slate-200 text-slate-900",children:[(0,s.jsxs)(e$.Xi,{className:"hover:bg-slate-100 cursor-pointer",children:[(0,s.jsx)(ei.Z,{className:"mr-2 h-4 w-4"})," Ver detalles"]}),(0,s.jsx)(e$.Xi,{className:"hover:bg-slate-100 cursor-pointer text-emerald-600",children:"Marcar completado"})]})]})})]},e.id))})]})})]})};var eH=a(89345);(0,C.$)("e93798509a1fd70dc8e2db5195f6fb70fa22eca7");var eQ=(0,C.$)("3db7ffc74a394fdfe10ca7e80b449bf3ff9296f0"),eJ=(0,C.$)("302b49e5f20f0af30ab22b90aee0ea802f561eef"),eK=(0,C.$)("37da93aa0c42b826648240c842f6961c9754683c");(0,C.$)("2746bc55659fb0008e91b2cf9ead04d2b1281ce4"),(0,C.$)("4dbc5683de8df870087b67ee819b2e0af904ed66"),(0,C.$)("c3caf166d0f66d38175837de4d1d065e8c0b6188"),(0,C.$)("2f75d584fc4e1047853eca9ff9375ea7561812f6"),(0,C.$)("e4fde36465fe08a1ae6bad70b34d65c32c611934"),(0,C.$)("6a3a241b59a78b9056f17e89fbafbdff296d4464"),(0,C.$)("73b3b86161ccf87c127752da2506a9401fff077c"),(0,C.$)("d353b3a5b9d9325cd9a5fcfd2a4bb03e151bddb7"),(0,C.$)("73ce737187dd257f922a90bd848174dd9b79e515");var eY=(0,C.$)("720b95cfd0d80a6054a0f749684f8f4f1ff34112");function eX(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let e=await eY();t(e)}catch(e){console.error("Error loading customers:",e),n.A.error("Error al cargar clientes")}finally{l(!1)}})()},[]),a)?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(f.Z,{className:"w-6 h-6 animate-spin text-emerald-500"})}):(0,s.jsx)("div",{className:"rounded-md border border-white/10 overflow-hidden bg-black/20 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"text-xs uppercase bg-white/5 text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3",children:"ID"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Nombre"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,s.jsx)("th",{className:"px-4 py-3",children:"\xdaltima Compra"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Total Gastado"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-slate-500",children:"No hay clientes registrados a\xfan."})}):e.map(e=>(0,s.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,s.jsxs)("td",{className:"px-4 py-3 text-gray-500",children:["#",e.id.substring(0,8),"..."]}),(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-white",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-3 text-gray-400",children:e.email}),(0,s.jsx)("td",{className:"px-4 py-3 text-gray-400",children:e.lastPurchase}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right font-mono text-green-400",children:["$",e.totalSpent.toLocaleString()]}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)(u.z,{variant:"ghost",size:"sm",className:"gap-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10",children:[(0,s.jsx)(eH.Z,{className:"h-3 w-3"})," Contactar"]})})]},e.id))})]})})})}var e0=a(9945);(0,C.$)("d45e70126d277ede2137a0abca321b2d38e13862");var e1=(0,C.$)("3f53c1206f029410a2e5519c9ffd354de1a6c4c8");(0,C.$)("41f915dcb5a4075e1a7fa4e807a463296323c231"),(0,C.$)("6e64552964e49d59443d867c16370816f1db57bb");var e2=(0,C.$)("fbb454817d33aff3655806a648e4c72490f8aee8"),e5=(0,C.$)("afe1661a8f9c305985aba2d0f7a76ed44b5613ac"),e4=(0,C.$)("b3edf6199b68eaeb01aec3fe7115f3ba65160ee2"),e6=(0,C.$)("4aeb9814632a7a1192941db4168cdc68c7d65916"),e3=a(28434),e9=a(99801),e8=a(40519),e7=a(44743),te=a(93448),tt=a(25458),ta=a(32660),ts=a(59196),tr=a(71422),tl=a(76980),ti=a(48662),to=a(65346);let tn=e=>{let{threadId:t,initialMessages:a,user:l,onBack:i,onRefresh:o,isAdminView:d}=e,[c,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)([]),N=(0,r.useRef)(null),w=(0,r.useRef)(null),y=(0,to.e)();(0,r.useEffect)(()=>{j([...a].sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()))},[a]),(0,r.useEffect)(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[v]),(0,r.useEffect)(()=>{let e=v.filter(e=>"unread"===e.status&&!e.is_admin_reply).filter(e=>d?!e.is_admin_reply:e.is_admin_reply).map(e=>e.id);e.length>0&&e.forEach(e=>{e6(e).catch(()=>{})})},[v,d]),(0,r.useEffect)(()=>{let e=y.channel("messages-thread").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},e=>{let a=e.new;(a.sender_id===t||a.receiver_id===t)&&j(e=>e.some(e=>e.id===a.id)?e:[...e,a].sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()))}).subscribe();return()=>{y.removeChannel(e)}},[t,y]);let k=async()=>{if(c.trim()){h(!0);try{let e=[...v].reverse().find(e=>!e.is_admin_reply),a=e?await e2(e.id,c):await e5(t,c);a.success?(x(""),o(),n.A.success("Respuesta enviada")):n.A.error(a.error||"Error al enviar")}catch(e){n.A.error("Error de conexi\xf3n")}finally{h(!1)}}};(0,r.useEffect)(()=>{w.current&&(w.current.style.height="auto",w.current.style.height=w.current.scrollHeight+"px")},[c]);let C=l.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-gradient-to-br from-white to-slate-50/50 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center gap-4 p-5 border-b border-slate-200/60 bg-white/80 backdrop-blur-xl shadow-sm",children:[(0,s.jsx)(ef.E.button,{onClick:i,whileHover:{scale:1.05,x:-2},whileTap:{scale:.95},className:"md:hidden p-2.5 -ml-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-xl transition-all",children:(0,s.jsx)(ta.Z,{size:20,strokeWidth:2})}),(0,s.jsxs)(ef.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"relative flex-shrink-0",children:[(0,s.jsx)("div",{className:(0,te.cn)("w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center text-white font-black text-lg shadow-lg",(e=>{let t=["from-blue-500 to-blue-600","from-purple-500 to-purple-600","from-pink-500 to-pink-600","from-emerald-500 to-emerald-600","from-amber-500 to-amber-600"],a=e.charCodeAt(0)%t.length;return t[a]})(l.name)),children:C}),(0,s.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-emerald-500 rounded-full border-2 border-white shadow-md"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-black text-lg text-slate-900 truncate",children:l.name}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 font-medium truncate flex items-center gap-1.5",children:[l.email,b&&(0,s.jsxs)("span",{className:"flex gap-0.5 ml-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,s.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,s.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(ef.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2.5 text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-xl transition-all",children:(0,s.jsx)(J.Z,{size:18,strokeWidth:2})})})]}),(0,s.jsx)("div",{ref:N,className:"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin relative z-10",children:0===v.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center h-full gap-4",children:[(0,s.jsx)(ef.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-2xl shadow-blue-600/30",children:(0,s.jsx)(M.Z,{size:36,className:"text-white",strokeWidth:2})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-black text-slate-900 text-lg mb-1",children:"Sin mensajes a\xfan"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 max-w-xs",children:"Env\xeda el primer mensaje para iniciar la conversaci\xf3n."})]})]}):(0,s.jsx)(eg.M,{children:v.map((e,t)=>{let a=e.is_admin_reply,r=a===d,l=0===t||new Date(e.created_at).toDateString()!==new Date(v[t-1].created_at).toDateString();return(0,s.jsxs)(ef.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.8},transition:{delay:.05*t},children:[l&&(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsx)("span",{className:"text-[11px] font-extrabold text-slate-500 bg-white px-4 py-2 rounded-full uppercase tracking-wider shadow-sm border border-slate-200/60",children:(0,eA.WU)(new Date(e.created_at),"d 'de' MMMM",{locale:eZ.es})})}),(0,s.jsx)("div",{className:(0,te.cn)("flex w-full mb-3",r?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:(0,te.cn)("max-w-[85%] md:max-w-[70%] rounded-2xl p-4 shadow-lg relative group transition-all duration-300 hover:shadow-xl",r?"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-tr-md":"bg-white border border-slate-200/80 text-slate-700 rounded-tl-md backdrop-blur-sm"),children:[!r&&(0,s.jsxs)("div",{className:"text-[11px] font-extrabold text-slate-500 mb-2 flex items-center gap-1.5",children:[(0,s.jsx)(eL.Z,{size:11,strokeWidth:3})," ",a?"Soporte \xc9ter":e.name]}),(0,s.jsx)("div",{className:"text-sm whitespace-pre-wrap leading-relaxed font-medium",children:e.message}),(0,s.jsxs)("div",{className:(0,te.cn)("text-[10px] mt-3 flex items-center gap-1.5 font-bold",r?"text-blue-200 justify-end":"text-slate-400"),children:[(0,eA.WU)(new Date(e.created_at),"HH:mm"),r&&(0,s.jsx)(ts.Z,{size:13,strokeWidth:2.5})]}),(0,s.jsx)("div",{className:(0,te.cn)("absolute top-0 w-4 h-4",r?"right-0 translate-x-2 bg-gradient-to-br from-blue-600 to-blue-700":"left-0 -translate-x-2 bg-white border-l border-t border-slate-200/80","rotate-45"),style:{borderRadius:r?"0 4px 0 0":"4px 0 0 0"}})]})})]},e.id)})})}),(0,s.jsx)("div",{className:"relative z-10 p-5 bg-white/90 backdrop-blur-xl border-t border-slate-200/60 shadow-lg",children:(0,s.jsxs)("div",{className:"relative flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,s.jsx)(ef.E.button,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},className:"p-2 text-slate-400 hover:text-amber-500 hover:bg-amber-50 rounded-lg transition-all",title:"Emoji",children:(0,s.jsx)(tr.Z,{size:18,strokeWidth:2})}),(0,s.jsx)(ef.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-all",title:"Adjuntar",children:(0,s.jsx)(tl.Z,{size:18,strokeWidth:2})}),(0,s.jsx)(ef.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-slate-400 hover:text-emerald-500 hover:bg-emerald-50 rounded-lg transition-all",title:"Voz",children:(0,s.jsx)(ti.Z,{size:18,strokeWidth:2})}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsxs)("span",{className:"text-xs text-slate-400 font-medium",children:[c.length," / 1000"]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.g,{ref:w,value:c,onChange:e=>{x(e.target.value),g(!0),setTimeout(()=>g(!1),1e3)},placeholder:"Escribe tu mensaje...",maxLength:1e3,className:"min-h-[80px] max-h-[200px] resize-none pr-14 bg-slate-50/80 border-slate-200 focus:ring-blue-500/30 focus:border-blue-500/50 rounded-2xl font-medium text-sm placeholder:text-slate-400 transition-all shadow-sm focus:shadow-md",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())}}),(0,s.jsx)(ef.E.div,{className:"absolute bottom-3 right-3",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(u.z,{onClick:k,disabled:!c.trim()||m,size:"icon",className:(0,te.cn)("w-10 h-10 rounded-xl transition-all duration-300 shadow-lg",c.trim()?"bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-blue-600/30":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:m?(0,s.jsx)(f.Z,{className:"animate-spin",size:18,strokeWidth:2.5}):(0,s.jsx)(e7.Z,{size:18,strokeWidth:2.5})})})]}),(0,s.jsx)("div",{className:"flex items-center justify-between px-2",children:(0,s.jsxs)("p",{className:"text-xs text-slate-500 font-medium",children:[(0,s.jsx)("kbd",{className:"font-mono bg-slate-100 px-2 py-0.5 rounded border border-slate-200 text-[10px]",children:"Shift"})," + ",(0,s.jsx)("kbd",{className:"font-mono bg-slate-100 px-2 py-0.5 rounded border border-slate-200 text-[10px]",children:"Enter"})," ","para nueva l\xednea"]})})]})})]})},td=e=>{let{isAdmin:t,refreshToken:a,currentUserId:l}=e,[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[b,g]=(0,r.useState)(null),[f,v]=(0,r.useState)(""),[j,N]=(0,r.useState)("all"),w=(0,to.e)(),[y,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[z,E]=(0,r.useState)(null),[_,A]=(0,r.useState)(""),[Z,P]=(0,r.useState)(!1),F=(0,r.useRef)(!1),D=async()=>{F.current||m(!0);try{let e=await e1();o(e||[]),F.current=!0}catch(e){console.error("Error fetching messages:",e),n.A.error("Error al cargar mensajes")}finally{m(!1)}},I=(0,r.useRef)(D);(0,r.useEffect)(()=>{I.current=D});let B=(0,r.useRef)(null),M=()=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{I.current()},500)};(0,r.useEffect)(()=>{let e=w.channel("realtime-messages").on("postgres_changes",{event:"*",schema:"public",table:"messages"},e=>{if(t){if(M(),"INSERT"===e.eventType){let t=e.new;t.is_admin_reply||n.A.info("Nuevo mensaje de ".concat(t.name||"Usuario"))}}else{let t=e.new;(t.sender_id===l||t.receiver_id===l)&&(I.current(),"INSERT"===e.eventType&&t.receiver_id===l&&n.A.info("Nuevo mensaje recibido"))}}).subscribe();return()=>{w.removeChannel(e),B.current&&clearTimeout(B.current)}},[t,l,w]),(0,r.useEffect)(()=>{D()},[a]),(0,r.useEffect)(()=>{t&&(async()=>{try{let{data:e,error:t}=await (0,e3.A9)();if(t)return;c((e||[]).filter(e=>e.id!==l))}catch(e){console.error("Error loading profiles",e)}})()},[t,l]);let R=e=>{if(!e)return new Date;let t=new Date(e);return isNaN(t.getTime())?new Date:t},T=(0,r.useMemo)(()=>{let e=new Map;try{i.forEach(t=>{let a="",s="",r="";if(t.is_admin_reply?a=t.receiver_id||"unknown":(a=t.sender_id||"anonymous",s=t.name||"An\xf3nimo",r=t.email||""),"anonymous"!==a&&a||(a=t.email||"anon-".concat(Math.random())),!e.has(a)){let l=d.find(e=>e.id===a);e.set(a,{userId:a,name:(null==l?void 0:l.full_name)||s||t.name||"Usuario",email:(null==l?void 0:l.email)||r||t.email||"",lastMessage:t,unreadCount:0,messages:[]})}let l=e.get(a);l.messages.push(t);let i=R(t.created_at),o=R(l.lastMessage.created_at);i>o&&(l.lastMessage=t,d.find(e=>e.id===a)||t.is_admin_reply||!t.name||(l.name=t.name,l.email=t.email||l.email)),"unread"===t.status&&!t.is_admin_reply&&l.unreadCount++}),d.forEach(t=>{if(!t.id||e.has(t.id))return;let a={id:"empty-".concat(t.id),sender_id:t.id,receiver_id:void 0,name:t.full_name||t.email||"Usuario",email:t.email||"",subject:"Nuevo mensaje",message:"",status:"read",created_at:t.created_at||new Date().toISOString(),is_admin_reply:!0};e.set(t.id,{userId:t.id,name:t.full_name||t.email||"Usuario",email:t.email||"",lastMessage:a,unreadCount:0,messages:[]})})}catch(e){return console.error("Error processing threads:",e),[]}return Array.from(e.values()).sort((e,t)=>R(t.lastMessage.created_at).getTime()-R(e.lastMessage.created_at).getTime())},[i,d]),W=(0,r.useMemo)(()=>T.filter(e=>{let t=(e.name||"").toLowerCase(),a=(e.email||"").toLowerCase(),s=f.toLowerCase(),r=t.includes(s)||a.includes(s);return"unread"===j?r&&e.unreadCount>0:r}),[T,f,j]),L=b?T.find(e=>e.userId===b):null,O=e=>{if(!e)return"from-blue-500 to-blue-600";let t=["from-blue-500 to-blue-600","from-purple-500 to-purple-600","from-pink-500 to-pink-600","from-emerald-500 to-emerald-600","from-amber-500 to-amber-600","from-rose-500 to-rose-600","from-indigo-500 to-indigo-600","from-cyan-500 to-cyan-600"];try{let a=e.charCodeAt(0)%t.length;return t[isNaN(a)?0:a]}catch(e){return t[0]}},$=async()=>{if(!z||!_.trim())return;P(!0);let e=await e5(z.id,_.trim());P(!1),e.success?(n.A.success("Mensaje enviado"),k(!1),A(""),E(null),D(),g(z.id)):n.A.error(e.error||"Error al enviar mensaje")},V=d.filter(e=>{var t,a;return(null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(C.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(C.toLowerCase()))});return(0,s.jsxs)("div",{className:"flex h-[calc(100vh-140px)] min-h-[600px] bg-gradient-to-br from-slate-50 via-white to-slate-50 rounded-2xl overflow-hidden border border-slate-200/80 shadow-2xl shadow-slate-900/5 backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:(0,te.cn)("w-full md:w-[420px] flex flex-col bg-white/40 backdrop-blur-xl border-r border-slate-200/60",b?"hidden md:flex":"flex"),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-200/60 space-y-4 bg-gradient-to-b from-white/80 to-white/40 backdrop-blur-xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center shadow-lg shadow-blue-600/30",children:(0,s.jsx)(e9.Z,{size:20,className:"text-white",strokeWidth:2.5})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-black text-xl text-slate-900 tracking-tight",children:"Mensajes"}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 font-medium",children:[W.length," conversaciones"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(ef.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>k(!0),className:"p-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl shadow-md shadow-blue-600/20 transition-all",title:"Nueva Conversaci\xf3n",children:(0,s.jsx)(K.Z,{size:20,strokeWidth:2.5})}),(0,s.jsx)(ef.E.button,{whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},className:"p-2.5 hover:bg-slate-100 rounded-xl text-slate-400 hover:text-slate-700 transition-all duration-300 hover:shadow-md",children:(0,s.jsx)(eR.Z,{size:20,strokeWidth:2})})]})]}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(ex.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",size:18,strokeWidth:2}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar conversaciones...",value:f,onChange:e=>v(e.target.value),className:"w-full bg-white/80 border border-slate-200 rounded-xl py-3 pl-12 pr-4 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 outline-none transition-all shadow-sm focus:shadow-md placeholder:text-slate-400"})]}),(0,s.jsxs)("div",{className:"flex gap-2 p-1 bg-slate-100/80 rounded-xl backdrop-blur-sm",children:[(0,s.jsxs)("button",{onClick:()=>N("all"),className:(0,te.cn)("flex-1 px-4 py-2.5 rounded-lg text-xs font-bold transition-all duration-300 flex items-center justify-center gap-2","all"===j?"bg-white text-slate-900 shadow-md shadow-slate-900/10":"text-slate-600 hover:text-slate-900"),children:[(0,s.jsx)(eH.Z,{size:14}),"Todos",(0,s.jsx)("span",{className:(0,te.cn)("px-1.5 py-0.5 rounded-full text-[10px] font-extrabold","all"===j?"bg-slate-100 text-slate-700":"bg-slate-200/50 text-slate-500"),children:T.length})]}),(0,s.jsxs)("button",{onClick:()=>N("unread"),className:(0,te.cn)("flex-1 px-4 py-2.5 rounded-lg text-xs font-bold transition-all duration-300 flex items-center justify-center gap-2","unread"===j?"bg-gradient-to-br from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-600/30":"text-slate-600 hover:text-slate-900"),children:[(0,s.jsx)(e8.Z,{size:14,className:"unread"===j?"fill-white":""}),"No le\xeddos",T.filter(e=>e.unreadCount>0).length>0&&(0,s.jsx)("span",{className:(0,te.cn)("px-1.5 py-0.5 rounded-full text-[10px] font-extrabold","unread"===j?"bg-white/20 text-white":"bg-blue-100 text-blue-700"),children:T.filter(e=>e.unreadCount>0).length})]})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:x?(0,s.jsxs)("div",{className:"p-12 flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center animate-pulse",children:(0,s.jsx)(e9.Z,{size:32,className:"text-white"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Cargando mensajes..."})]}):0===W.length?(0,s.jsxs)("div",{className:"p-12 flex flex-col items-center text-center space-y-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-slate-100 flex items-center justify-center",children:(0,s.jsx)(e9.Z,{size:40,className:"text-slate-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-bold text-slate-700 mb-1",children:"No hay conversaciones"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Los mensajes aparecer\xe1n aqu\xed"})]})]}):(0,s.jsx)(eg.M,{mode:"popLayout",children:W.map((e,t)=>{let a=O(e.name),r=(e.name||"U").split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,s.jsxs)(ef.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},transition:{delay:Math.min(.03*t,.5)},onClick:()=>g(e.userId),className:(0,te.cn)("relative mx-2 mb-2 p-4 cursor-pointer rounded-xl transition-all duration-300 group",b===e.userId?"bg-gradient-to-br from-blue-50 to-blue-100/50 border-2 border-blue-200 shadow-lg shadow-blue-900/10":"bg-white/60 hover:bg-white border-2 border-transparent hover:border-slate-200/80 hover:shadow-md backdrop-blur-sm"),children:[e.unreadCount>0&&(0,s.jsx)("div",{className:"absolute left-0 top-4 bottom-4 w-1 bg-gradient-to-b from-blue-600 to-blue-700 rounded-r-full"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,s.jsx)("div",{className:(0,te.cn)("w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center text-white font-black text-sm shadow-lg transition-all duration-300",a,"group-hover:scale-110 group-hover:rotate-3"),children:r}),e.unreadCount>0&&(0,s.jsx)(ef.E.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white text-[10px] font-extrabold shadow-lg shadow-blue-600/50 ring-2 ring-white",children:e.unreadCount})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,s.jsx)("h3",{className:(0,te.cn)("font-bold text-sm truncate pr-2 transition-colors",e.unreadCount>0?"text-slate-900":"text-slate-700 group-hover:text-slate-900"),children:e.name||e.email}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-400 whitespace-nowrap",children:[(0,s.jsx)(eP.Z,{size:10}),(0,s.jsx)("span",{className:"font-medium",children:e.messages.length>0&&e.lastMessage.created_at?(0,tt.Q)(R(e.lastMessage.created_at),{locale:eZ.es,addSuffix:!1}):"Nuevo"})]})]}),(0,s.jsx)("p",{className:(0,te.cn)("text-xs line-clamp-2 mb-2 leading-relaxed",e.unreadCount>0?"text-slate-700 font-medium":"text-slate-500"),children:e.messages.length>0?(0,s.jsxs)(s.Fragment,{children:[e.lastMessage.is_admin_reply&&(0,s.jsx)("span",{className:"text-blue-600 font-bold mr-1",children:"T\xfa:"}),e.lastMessage.message||"Sin mensajes a\xfan"]}):"Inicia una conversaci\xf3n"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 bg-slate-100/80 px-2 py-1 rounded-md backdrop-blur-sm",children:[(0,s.jsx)(eH.Z,{size:10}),(0,s.jsx)("span",{className:"truncate max-w-[140px] font-medium",children:e.email})]}),e.messages.length>0&&(0,s.jsxs)("div",{className:"text-[10px] text-slate-400 bg-slate-100/60 px-2 py-1 rounded-md font-medium",children:[e.messages.length," ",1===e.messages.length?"mensaje":"mensajes"]})]})]})]})]},e.userId)})})})]}),(0,s.jsx)("div",{className:(0,te.cn)("flex-1 flex flex-col bg-gradient-to-br from-slate-50/50 to-white/50 backdrop-blur-xl",b?"flex":"hidden md:flex"),children:L?(0,s.jsx)(tn,{threadId:L.userId,initialMessages:L.messages,user:{name:L.name,email:L.email},onBack:()=>g(null),onRefresh:D,isAdminView:t}):(0,s.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:(0,s.jsxs)(ef.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4},className:"space-y-6 flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl flex items-center justify-center mb-6 shadow-2xl shadow-blue-600/30 relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-xl group-hover:bg-white/20 transition-all"}),(0,s.jsx)(eL.Z,{size:64,className:"text-white relative z-10",strokeWidth:1.5}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-600/50 to-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Selecciona una conversaci\xf3n"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 max-w-md font-medium leading-relaxed mb-6",children:"Elige un hilo de la lista para ver el historial completo y responder a tus clientes, o inicia una nueva conversaci\xf3n."}),(0,s.jsxs)(u.z,{onClick:()=>k(!0),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-6 py-6 shadow-lg shadow-blue-600/20 hover:shadow-blue-600/40 transition-all transform hover:-translate-y-1",children:[(0,s.jsx)(K.Z,{className:"mr-2",size:20}),"Nueva Conversaci\xf3n"]})]})]})})}),(0,s.jsx)(es.Vq,{open:y,onOpenChange:k,children:(0,s.jsxs)(es.cZ,{className:"max-w-md",children:[(0,s.jsx)(es.fK,{children:(0,s.jsx)(es.$N,{children:"Nueva Conversaci\xf3n"})}),(0,s.jsx)("div",{className:"space-y-4 pt-2",children:z?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-xl border border-blue-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold",children:(z.full_name||"U")[0].toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-bold text-slate-900",children:["Para: ",z.full_name||z.email]}),(0,s.jsx)("p",{className:"text-xs text-blue-600/80",children:z.email})]})]}),(0,s.jsx)(u.z,{variant:"ghost",size:"sm",onClick:()=>E(null),className:"text-slate-400 hover:text-slate-600",children:"Cambiar"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Mensaje Inicial"}),(0,s.jsx)(p.g,{placeholder:"Escribe tu mensaje aqu\xed...",value:_,onChange:e=>A(e.target.value),className:"min-h-[100px] resize-none",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,s.jsx)(u.z,{variant:"ghost",onClick:()=>k(!1),children:"Cancelar"}),(0,s.jsxs)(u.z,{onClick:$,disabled:!_.trim()||Z,className:"bg-blue-600 hover:bg-blue-700",children:[Z?(0,s.jsx)(ef.E.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"mr-2",children:(0,s.jsx)(eP.Z,{size:16})}):(0,s.jsx)(e7.Z,{size:16,className:"mr-2"}),"Enviar Mensaje"]})]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Buscar Usuario"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ex.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),(0,s.jsx)(h.I,{placeholder:"Nombre o email...",value:C,onChange:e=>S(e.target.value),className:"pl-9",autoFocus:!0})]}),(0,s.jsx)("div",{className:"border border-slate-100 rounded-lg max-h-[200px] overflow-y-auto mt-2 divide-y divide-slate-50",children:0===V.length?(0,s.jsx)("div",{className:"p-4 text-center text-xs text-slate-400",children:"No se encontraron usuarios"}):V.map(e=>(0,s.jsxs)("div",{onClick:()=>E(e),className:"p-3 hover:bg-slate-50 cursor-pointer flex items-center gap-3 transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold",children:(e.full_name||"U")[0].toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900 truncate",children:e.full_name||"Sin nombre"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.email})]}),(0,s.jsx)("div",{className:"text-[10px] text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded capitalize",children:e.role})]},e.id))})]})})]})})]})},tc=()=>{let{profile:e,checkSession:t,isLoading:a}=(0,e0.t)(),l=(null==e?void 0:e.role)==="admin"||(null==e?void 0:e.role)==="support",[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[h,b]=(0,r.useState)(0);(0,r.useEffect)(()=>{t()},[t]);let g=async()=>{if(!d.trim())return;m(!0);let e=await e4(d.trim());e.success?(n.A.success("Mensaje enviado a ".concat(e.count," usuarios")),c(""),o(!1),b(e=>e+1)):n.A.error(e.error||"Error al enviar el mensaje"),m(!1)};return(0,s.jsxs)("div",{className:"space-y-6 pb-20 relative min-h-screen animate-in fade-in duration-500",children:[(0,s.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-end justify-between gap-8 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tighter mb-3",children:l?"Centro de Mensajes":"Soporte y Ayuda"}),(0,s.jsx)("p",{className:"text-slate-500 text-lg max-w-xl font-medium",children:l?"Gestiona todas las conversaciones con tus clientes en un solo lugar.":"\xbfTienes dudas? Escr\xedbenos y te responderemos a la brevedad."}),(0,s.jsx)("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1 text-[11px] font-semibold text-slate-600",children:a?(0,s.jsx)("span",{children:"Cargando rol..."}):(0,s.jsxs)("span",{children:["Rol: ",(null==e?void 0:e.role)||"desconocido"]})})]}),l&&(0,s.jsx)(u.z,{onClick:()=>o(!0),className:"bg-[#1E40AF] hover:bg-[#1E3A8A] text-white rounded-xl px-6",children:"Enviar a todos"})]}),(0,s.jsx)(td,{isAdmin:l,refreshToken:h,currentUserId:null==e?void 0:e.id}),i&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white border border-slate-200 shadow-xl",children:[(0,s.jsxs)("div",{className:"p-5 border-b border-slate-100",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Mensaje masivo"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Se enviara a todos los perfiles registrados (excepto admin/soporte)."})]}),(0,s.jsxs)("div",{className:"p-5 space-y-4",children:[(0,s.jsx)(p.g,{value:d,onChange:e=>c(e.target.value),placeholder:"Escribe el mensaje que veran todos los usuarios...",className:"min-h-[140px] resize-none"}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(u.z,{variant:"outline",onClick:()=>o(!1),disabled:x,children:"Cancelar"}),(0,s.jsx)(u.z,{onClick:g,disabled:!d.trim()||x,children:x?"Enviando...":"Enviar"})]})]})]})})]})};var tx=a(79820);function tm(){return(0,s.jsx)("div",{className:"space-y-6 max-w-2xl",children:(0,s.jsxs)(tx.Zb,{className:"bg-white/5 border-white/10 backdrop-blur-sm text-white",children:[(0,s.jsxs)(tx.Ol,{children:[(0,s.jsx)(tx.ll,{children:"Configuraci\xf3n General"}),(0,s.jsx)(tx.SZ,{children:"Informaci\xf3n b\xe1sica de la tienda."})]}),(0,s.jsx)(tx.aY,{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.A.success("Configuraci\xf3n guardada correctamente")},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"storeName",children:"Nombre de la Tienda"}),(0,s.jsx)(h.I,{id:"storeName",defaultValue:"\xc9ter Store",className:"bg-black/20 border-white/10"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"storeDescription",children:"Descripci\xf3n"}),(0,s.jsx)(p.g,{id:"storeDescription",defaultValue:"Descubre nuestra plataforma especializada en calzados premium para revendedores.",className:"bg-black/20 border-white/10 min-h-[100px]"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"storeEmail",children:"Email de Contacto"}),(0,s.jsx)(h.I,{id:"storeEmail",defaultValue:"equiporeveter@gmail.com",className:"bg-black/20 border-white/10"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"storePhone",children:"Tel\xe9fono"}),(0,s.jsx)(h.I,{id:"storePhone",defaultValue:"223 502 5196",className:"bg-black/20 border-white/10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(b._,{htmlFor:"storeAddress",children:"Direcci\xf3n"}),(0,s.jsx)(h.I,{id:"storeAddress",defaultValue:"Mar del Plata, Argentina",className:"bg-black/20 border-white/10"})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)(u.z,{type:"submit",className:"w-full md:w-auto",children:"Guardar Cambios"})})]})})]})})}var tu=a(98617),th=a(33276),tp=a(66337),tb=a(24459);let tg=e=>{let{isPremium:t,items:a}=e,[l,i]=(0,r.useState)(a),[o,d]=(0,r.useState)(t),[c,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)("all"),[h,p]=(0,r.useState)(!1),[b,g]=(0,r.useState)(""),f=(0,r.useCallback)(async()=>{x(!0);try{let e=new URLSearchParams;"all"!==m&&e.append("type",m),h&&e.append("vip","true"),b&&e.append("q",b);let t=await fetch("/api/academy?".concat(e.toString()));if(!t.ok)throw Error("Error al cargar contenido");let a=await t.json();i(a.items),d(a.isPremium)}catch(e){n.A.error("No se pudo actualizar el cat\xe1logo")}finally{x(!1)}},[m,h,b]);return(0,r.useEffect)(()=>{let e=setTimeout(()=>{f()},500);return()=>clearTimeout(e)},[f]),(0,s.jsxs)(ef.E.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[(0,s.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Academia \xc9ter Store"}),(0,s.jsx)("p",{className:"text-slate-400 mt-1",children:"Capacitate y desbloque\xe1 nuevos niveles de ganancias."})]}),!o&&(0,s.jsxs)("button",{className:"bg-amber-500 text-amber-950 px-6 py-3 rounded-2xl font-black text-sm uppercase tracking-widest flex items-center gap-2 shadow-lg shadow-amber-500/20 hover:scale-105 transition-transform",children:[(0,s.jsx)(tu.Z,{size:18})," Ser Premium"]})]}),(0,s.jsxs)("div",{className:"bg-white/5 border border-white/10 p-4 rounded-2xl flex flex-col md:flex-row gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,s.jsx)(ex.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar contenido...",value:b,onChange:e=>g(e.target.value),className:"w-full bg-slate-950/50 border border-slate-800 rounded-xl py-2 pl-10 pr-4 text-sm text-white focus:outline-none focus:border-purple-500/50 transition-colors"})]}),(0,s.jsxs)("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[(0,s.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"bg-slate-950/50 border border-slate-800 rounded-xl px-4 py-2 text-sm text-slate-300 focus:outline-none focus:border-purple-500/50",children:[(0,s.jsx)("option",{value:"all",children:"Todos los formatos"}),(0,s.jsx)("option",{value:"video",children:"Videos"}),(0,s.jsx)("option",{value:"pdf",children:"Gu\xedas PDF"}),(0,s.jsx)("option",{value:"audio",children:"Audios"})]}),(0,s.jsxs)("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold border transition-colors ".concat(h?"bg-amber-500/20 border-amber-500/50 text-amber-500":"bg-slate-950/50 border-slate-800 text-slate-400 hover:text-white"),children:[(0,s.jsx)(tu.Z,{size:16}),h?"Solo VIP":"Ver VIP"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 relative min-h-[200px]",children:[c&&(0,s.jsx)("div",{className:"absolute inset-0 bg-slate-950/50 backdrop-blur-sm z-20 flex items-center justify-center rounded-3xl",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}),0===l.length?(0,s.jsxs)("div",{className:"col-span-full py-12 text-center text-slate-500",children:[(0,s.jsx)(em.Z,{size:48,className:"mx-auto mb-4 opacity-20"}),(0,s.jsx)("p",{children:"No se encontr\xf3 contenido con estos filtros."})]}):l.map(e=>(0,s.jsxs)(tb.W,{className:"relative group overflow-hidden border-white/5 hover:border-purple-500/30 transition-all duration-500 hover:shadow-2xl hover:shadow-purple-500/10 flex flex-col",children:[(0,s.jsxs)("div",{className:"p-6 flex flex-col h-full ".concat(e.is_vip&&!o?"blur-[2px] opacity-60 select-none grayscale-[0.5]":""),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center transition-colors ".concat("video"===e.type?"bg-sky-500/10 text-sky-400 group-hover:bg-sky-500 group-hover:text-white":"pdf"===e.type?"bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500 group-hover:text-white":"bg-purple-500/10 text-purple-400 group-hover:bg-purple-500 group-hover:text-white"),children:"video"===e.type?(0,s.jsx)(th.Z,{size:24,className:"ml-1"}):"pdf"===e.type?(0,s.jsx)(G.Z,{size:24}):(0,s.jsx)(eO.Z,{size:24})}),e.is_vip&&(0,s.jsx)(tb.C,{variant:"gold",className:"text-[10px] px-2 py-0.5",children:"VIP"})]}),(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-2 leading-tight group-hover:text-purple-300 transition-colors",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-slate-400 font-medium leading-relaxed mb-6 flex-1",children:e.description||"Contenido exclusivo para potenciar tus ventas."}),(0,s.jsx)("button",{disabled:e.is_vip&&!o,className:"w-full py-3 border border-slate-700 rounded-xl text-xs font-bold hover:bg-white hover:text-slate-950 transition-all text-white mt-auto disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-white",children:"video"===e.type?"Ver Video":"pdf"===e.type?"Descargar PDF":"Escuchar Audio"})]}),e.is_vip&&!o&&(0,s.jsxs)("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center p-6 text-center bg-slate-950/60 backdrop-blur-sm",children:[(0,s.jsx)("div",{className:"bg-amber-500/20 p-4 rounded-full mb-4 animate-pulse",children:(0,s.jsx)(tp.Z,{className:"text-amber-500",size:32})}),(0,s.jsx)("h4",{className:"text-white font-bold text-lg",children:"Contenido Exclusivo"}),(0,s.jsx)("p",{className:"text-xs text-slate-300 mt-2 max-w-[200px]",children:"Desbloque\xe1 este material convirti\xe9ndote en socio Premium."})]})]},e.id))]})]})},tf=e=>{let{ranking:t,currentUserId:a}=e;return(0,s.jsxs)(tb.W,{className:"p-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,s.jsx)(tu.Z,{size:20,className:"text-amber-500"})," Top de la Semana"]}),(0,s.jsx)("button",{className:"text-sky-400 text-xs font-bold hover:underline",children:"Ver todo"})]}),(0,s.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>{var r,l,i,o;let n=null!==(o=null==(r=e.name)?void 0:null===(i=r.trim())||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.toUpperCase())&&void 0!==o?o:"?";return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-2xl transition-all ".concat(e.id===a?"bg-sky-500/10 border border-sky-500/30":"bg-slate-800/30"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"w-6 font-black text-center ".concat(0===t?"text-amber-500":"text-slate-500"),children:t+1}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center font-bold text-white uppercase shadow-inner",children:n}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-sm text-slate-100",children:e.name}),(0,s.jsxs)("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:[e.streak," d\xedas de racha"]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-black text-sky-400",children:[e.points," ",(0,s.jsx)("span",{className:"text-[10px]",children:"pts"})]})})]},e.id)})})]})};var tv=a(39360);function tj(e){let{initialView:t="dashboard"}=e,a=(0,ev.useSearchParams)().get("view")||t,{products:l,updateProduct:d,addProduct:c}=function(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[l,d]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>new o,[]),x=(0,r.useMemo)(()=>i(),[]),m=(0,r.useCallback)(async()=>{s(!0);try{let e=await c.findAll();t(e)}catch(e){n.A.error("Error al cargar productos")}finally{s(!1)}},[c]);(0,r.useEffect)(()=>{d(!0),m();let e=x.channel("catalog_changes").on("postgres_changes",{event:"*",schema:"public",table:"productos"},()=>{m()}).subscribe();return()=>{x.removeChannel(e)}},[m,x]);let u=async e=>{try{await c.create(e),n.A.success("Producto agregado correctamente"),m()}catch(t){console.error("Error adding product:",t);let e=t instanceof Error?t.message:"Unknown error";e.includes("row-level security")?n.A.error("Error de Permisos: No tienes permiso para crear productos.",{description:'Ejecuta el script SQL de "SETUP.md" en Supabase para habilitar la escritura.',duration:1e4}):n.A.error("Error al crear producto: ".concat(e))}},h=async e=>{try{await c.update(e.id,e),n.A.success("Producto actualizado correctamente"),m()}catch(t){let e=t instanceof Error?t.message:"Unknown error";n.A.error("Error al actualizar: ".concat(e))}},p=async e=>{try{await c.delete(e),n.A.success("Producto eliminado"),m()}catch(e){console.error("Error deleting product:",e),n.A.error("Error al eliminar producto")}},b=(0,r.useMemo)(()=>l?["Todos",...Array.from(new Set(e.map(e=>e.category).filter(Boolean)))]:["Todos"],[e,l]);return{products:l?e:[],loading:a||!l,categories:b,addProduct:u,updateProduct:h,deleteProduct:p,filterProducts:t=>l?e.filter(e=>{let a=e.name.toLowerCase().includes(t.query.toLowerCase()),s="Todos"===t.category||!t.category||e.category===t.category;return a&&s}):[],refresh:m}}(),[x,m]=(0,r.useState)(!1),[h]=(0,r.useState)(void 0),[p,b]=(0,r.useState)(null),[g,v]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[w,C]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=async()=>{C(!0);try{let[e,t,a]=await Promise.all([eQ(),eK(5),eJ()]);b(e),v(t),N(a)}catch(e){}finally{C(!1)}};("dashboard"===a||"orders"===a||"ranking"===a)&&e()},[a]);let S=async e=>{if(h)await d({...h,...e,id:h.id,createdAt:h.createdAt});else{let t={name:e.name,description:e.description,category:e.category,basePrice:e.basePrice,images:e.images,stockBySize:e.stockBySize,totalStock:e.totalStock,status:e.status,margin:e.margin};await c(t)}m(!1)};return w&&("dashboard"===a||"orders"===a)?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[50vh]",children:[(0,s.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-emerald-500 mb-4"}),(0,s.jsx)("p",{className:"text-slate-500",children:"Cargando m\xe9tricas en tiempo real..."})]}):(0,s.jsxs)("div",{className:"space-y-8 pb-20",children:["dashboard"===a&&p&&(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-50 via-white to-blue-50/30 border border-slate-200/60 p-8 shadow-xl shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-blue-500/10 via-transparent to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 border border-blue-100",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-xs font-bold text-blue-700 uppercase tracking-wide",children:"En Tiempo Real"})]}),(0,s.jsxs)("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tighter",children:["Panel ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-600",children:"Principal"})]}),(0,s.jsx)("p",{className:"text-slate-600 text-lg font-medium max-w-2xl",children:"Resumen completo de tu negocio con m\xe9tricas actualizadas al instante."})]}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsxs)(u.z,{variant:"outline",className:"rounded-xl border-slate-300 bg-white hover:bg-slate-50 text-slate-700 shadow-sm hover:shadow-md transition-all",children:[(0,s.jsx)(G.Z,{className:"mr-2 h-4 w-4"})," Exportar"]})})]})]}),(0,s.jsx)(eC,{stats:p}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,s.jsx)(eq,{orders:g})}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white border border-slate-200/60 p-6 shadow-lg shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-amber-500/10 to-transparent rounded-full blur-2xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-black text-slate-900 tracking-tight",children:"Stock R\xe1pido"}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-lg shadow-amber-600/30",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]}),(0,s.jsx)("div",{className:"space-y-3",children:l.slice(0,4).map(e=>{var t;return(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-3 rounded-xl bg-slate-50/80 hover:bg-white border-2 border-transparent hover:border-slate-200/80 hover:shadow-md transition-all duration-300 cursor-pointer",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-slate-100 to-slate-200 relative overflow-hidden shadow-sm",children:(null===(t=e.images)||void 0===t?void 0:t[0])&&(0,s.jsx)(y.default,{src:e.images[0],alt:e.name,width:48,height:48,className:"object-cover w-full h-full group-hover:scale-110 transition-transform duration-300"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-bold text-slate-900 truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsxs)("div",{className:"text-xs text-slate-500 font-medium",children:[e.totalStock||0," unidades"]}),(0,s.jsx)("div",{className:"w-1 h-1 bg-slate-300 rounded-full"}),(0,s.jsx)("div",{className:"text-xs text-slate-400 capitalize",children:e.category})]})]}),(0,s.jsxs)("div",{suppressHydrationWarning:!0,className:"text-sm font-black text-amber-600",children:["$",e.basePrice.toLocaleString("es-AR")]})]},e.id)})}),(0,s.jsx)(u.z,{variant:"ghost",className:"w-full mt-4 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl font-bold",onClick:()=>window.location.href="/dashboard?view=products",children:"Ver todo el inventario →"})]})]})})]})]}),"products"===a&&(0,s.jsx)("div",{className:"space-y-6 animate-in fade-in duration-500",children:(0,s.jsx)(eN,{})}),"catalog"===a&&(0,s.jsx)("div",{className:"space-y-6 animate-in fade-in duration-500",children:(0,s.jsx)(eN,{})}),"orders"===a&&(0,s.jsx)("div",{className:"animate-in fade-in duration-500",children:(0,s.jsx)(eU,{})}),"customers"===a&&(0,s.jsx)(eX,{}),("profiles"===a||"users"===a)&&(0,s.jsx)("div",{className:"animate-in fade-in duration-500",children:(0,s.jsx)(tv.ProfilesManager,{})}),"ranking"===a&&(0,s.jsx)("div",{className:"animate-in fade-in duration-500",children:(0,s.jsx)(tf,{ranking:j,currentUserId:""})}),"messages"===a&&(0,s.jsx)(tc,{}),"settings"===a&&(0,s.jsx)(tm,{}),"academy"===a&&(0,s.jsx)("div",{className:"animate-in fade-in duration-500",children:(0,s.jsx)(tg,{isPremium:!1,items:[]})}),(0,s.jsx)(es.Vq,{open:x,onOpenChange:m,children:(0,s.jsx)(es.cZ,{className:"max-w-3xl bg-[#020617] border-slate-800 text-white p-0 overflow-hidden",children:(0,s.jsx)(k,{initialData:h,onSubmit:S,onCancel:()=>m(!1)})})})]})}function tN(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"h-96 w-full bg-white/5 animate-pulse rounded-xl"}),children:(0,s.jsx)(tj,{...e})})}},28449:function(e,t,a){"use strict";a.d(t,{AnalyticsDashboard:function(){return _}});var s=a(57437),r=a(2265),l=a(48279),i=a(14296),o=a(5481),n=a(56940),d=a(97059),c=a(62994),x=a(78155),m=a(26662),u=a(86810),h=a(10062),p=a(20407),b=a(53250),g=a(77031),f=a(10956),v=a(95252),j=a(42449),N=a(70525),w=a(95805),y=a(92735),k=a(17580),C=a(69430),S=a(12381);a(83079);var z=(0,a(12119).$)("4871bd491235a50ddbbb51a25ba96473943619d5"),E=a(74968);function _(){let[e,t]=(0,r.useState)(null),[a,_]=(0,r.useState)(!0),[A,Z]=(0,r.useState)({start:(0,E.k)(new Date,30).toISOString(),end:new Date().toISOString()}),[P,F]=(0,r.useState)("\xdaltimos 30 d\xedas"),D=(0,r.useCallback)(async()=>{_(!0);try{let e=await z(A);t(e)}catch(e){console.error("Error loading analytics:",e)}finally{_(!1)}},[A]);(0,r.useEffect)(()=>{D()},[D,A]);let I=(e,t)=>{let a=new Date;Z({start:(0,E.k)(a,e).toISOString(),end:a.toISOString()}),F(t)};if(a&&!e)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});let B=[{label:"Ingresos Totales",value:null==e?void 0:e.summary.totalRevenue.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}),icon:v.Z,color:"blue",trend:"+12.5%"},{label:"Pedidos Totales",value:null==e?void 0:e.summary.totalOrders,icon:j.Z,color:"emerald",trend:"+5.2%"},{label:"Ticket Promedio",value:null==e?void 0:e.summary.averageOrderValue.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}),icon:N.Z,color:"amber",trend:"+2.1%"},{label:"Conversi\xf3n",value:"".concat(null==e?void 0:e.summary.conversionRate,"%"),icon:w.Z,color:"purple",trend:"-0.5%"}];return(0,s.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-black text-slate-900 tracking-tight mb-2",children:["An\xe1lisis ",(0,s.jsx)("span",{className:"text-blue-600",children:"Avanzado"})]}),(0,s.jsx)("p",{className:"text-slate-600",children:"Visualiza el rendimiento de tu negocio en tiempo real."})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("div",{className:"bg-white border border-slate-200 rounded-lg p-1 flex items-center",children:[{label:"7D",days:7,text:"\xdaltimos 7 d\xedas"},{label:"30D",days:30,text:"\xdaltimos 30 d\xedas"},{label:"90D",days:90,text:"\xdaltimos 3 meses"},{label:"YTD",days:365,text:"Este a\xf1o"}].map(e=>(0,s.jsx)("button",{onClick:()=>I(e.days,e.text),className:"px-3 py-1.5 text-xs font-bold rounded-md transition-all ".concat(P===e.text?"bg-blue-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"),children:e.label},e.label))}),(0,s.jsxs)(S.z,{variant:"outline",className:"gap-2",children:[(0,s.jsx)(y.Z,{size:16})," Exportar"]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:B.map((e,t)=>(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-".concat(e.color,"-50 text-").concat(e.color,"-600"),children:(0,s.jsx)(e.icon,{size:24})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ".concat(e.trend.startsWith("+")?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"),children:[e.trend.startsWith("+")?(0,s.jsx)(k.Z,{size:12}):(0,s.jsx)(C.Z,{size:12}),e.trend]})]}),(0,s.jsx)("p",{className:"text-sm font-medium text-slate-500 mb-1",children:e.label}),(0,s.jsx)("h3",{className:"text-2xl font-black text-slate-900",children:e.value})]},e.label))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg",children:"Evoluci\xf3n de Ingresos"}),(0,s.jsx)("div",{className:"text-sm text-slate-500 font-medium bg-slate-50 px-3 py-1 rounded-lg border border-slate-100",children:P})]}),(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(o.T,{data:null==e?void 0:e.revenueOverTime,children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.2}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),(0,s.jsx)(n.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#E2E8F0"}),(0,s.jsx)(d.K,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748B",fontSize:12},dy:10}),(0,s.jsx)(c.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748B",fontSize:12},tickFormatter:e=>"$".concat(e/1e3,"k")}),(0,s.jsx)(x.u,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:e=>[null==e?void 0:e.toLocaleString("es-AR",{style:"currency",currency:"ARS"}),"Ingresos"]}),(0,s.jsx)(m.uN,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg mb-6",children:"Ventas por Categor\xeda"}),(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(u.u,{children:[(0,s.jsx)(h.by,{data:null==e?void 0:e.salesByCategory,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:null==e?void 0:e.salesByCategory.map((e,t)=>(0,s.jsx)(p.b,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(x.u,{formatter:e=>["".concat(e," uds"),"Ventas"],contentStyle:{borderRadius:"12px"}}),(0,s.jsx)(b.D,{verticalAlign:"bottom",height:36,iconType:"circle"})]})})})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg mb-6",children:"Estado de Pedidos"}),(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(g.v,{data:null==e?void 0:e.ordersByStatus,layout:"vertical",margin:{left:20},children:[(0,s.jsx)(n.q,{strokeDasharray:"3 3",horizontal:!0,vertical:!1}),(0,s.jsx)(d.K,{type:"number",hide:!0}),(0,s.jsx)(c.B,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fill:"#475569",fontSize:12,fontWeight:500},width:80}),(0,s.jsx)(x.u,{cursor:{fill:"#F1F5F9"},contentStyle:{borderRadius:"8px"}}),(0,s.jsx)(f.$Q,{dataKey:"value",radius:[0,4,4,0],barSize:20,children:null==e?void 0:e.ordersByStatus.map((e,t)=>(0,s.jsx)(p.b,{fill:e.color},"cell-".concat(t)))})]})})})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 text-lg mb-4",children:"Productos M\xe1s Vendidos"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 rounded-l-lg",children:"Producto"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Ventas"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right rounded-r-lg",children:"Ingresos"})]})}),(0,s.jsx)("tbody",{children:null==e?void 0:e.topProducts.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50/50",children:[(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-slate-900",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-3 text-right font-bold text-blue-600",children:e.sales}),(0,s.jsx)("td",{className:"px-4 py-3 text-right font-medium text-slate-600",children:e.revenue.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0})})]},t))})]})})]})]})]})}},24459:function(e,t,a){"use strict";a.d(t,{C:function(){return i},W:function(){return l}});var s=a(57437),r=a(93448);let l=e=>{let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("bg-slate-900/40 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden",a),children:t})},i=e=>{let{children:t,variant:a="default",className:l}=e;return(0,s.jsx)("span",{className:(0,r.cn)("px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all duration-300 hover:scale-105 cursor-default",{default:"bg-slate-800 text-slate-300",gold:"bg-amber-500/20 text-amber-500 border border-amber-500/30 shadow-[0_0_10px_rgba(245,158,11,0.2)]",blue:"bg-sky-500/20 text-sky-500 border border-sky-500/30 shadow-[0_0_10px_rgba(14,165,233,0.2)]",orange:"bg-orange-500/20 text-orange-500 border border-orange-500/30 shadow-[0_0_10px_rgba(249,115,22,0.2)]"}[a],l),children:t})}},44923:function(e,t,a){"use strict";a.d(t,{ResellerDashboard:function(){return j},SupportDashboard:function(){return N},UserDashboard:function(){return w}});var s=a(57437),r=a(80652),l=a(2725),i=a(91343),o=a(95798),n=a(60351),d=a(2265),c=a(90535),x=a(93448);let m=(0,c.j)("relative w-full rounded-lg border p-4 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),u=d.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,x.cn)(m({variant:r}),a),...l})});u.displayName="Alert";let h=d.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,x.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});h.displayName="AlertTitle";let p=d.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,x.cn)("text-sm [&_p]:leading-relaxed",a),...r})});p.displayName="AlertDescription";var b=a(42449),g=a(84286),f=a(92369),v=a(12381);function j(e){let{stats:t,recentOrders:a=[]}=e;return(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-50 via-white to-blue-50/30 border border-slate-200/60 p-8 shadow-xl shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-blue-500/10 via-transparent to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 border border-blue-100 mb-4",children:[(0,s.jsx)(b.Z,{size:12,className:"text-blue-600",strokeWidth:2.5}),(0,s.jsx)("span",{className:"text-xs font-bold text-blue-700 uppercase tracking-wide",children:"Modo Reseller"})]}),(0,s.jsxs)("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tighter mb-3",children:["Panel ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"Reseller"})]}),(0,s.jsx)("p",{className:"text-slate-600 text-lg font-medium",children:"Gestiona tus ventas y cat\xe1logo mayorista."})]})]}),(0,s.jsxs)(u,{className:"bg-blue-50 border-blue-200 text-blue-900 rounded-2xl shadow-sm",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)(h,{className:"font-black text-blue-900",children:"Acceso Mayorista Activo"}),(0,s.jsx)(p,{className:"text-blue-700 font-medium",children:"Tienes acceso a precios mayoristas y cat\xe1logo exclusivo."})]}),(0,s.jsxs)(r.S,{children:[(0,s.jsx)(l.WelcomeWidget,{}),(0,s.jsx)(i.StatsWidget,{stats:t||null,mode:"reseller"}),(0,s.jsx)(o.QuickActionsWidget,{role:"reseller"}),(0,s.jsx)(n.RecentOrdersWidget,{orders:a})]})]})}function N(){return(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-50 via-white to-orange-50/30 border border-slate-200/60 p-8 shadow-xl shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-orange-500/10 via-transparent to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 border border-orange-100 mb-4",children:[(0,s.jsx)(g.Z,{size:12,className:"text-orange-600",strokeWidth:2.5}),(0,s.jsx)("span",{className:"text-xs font-bold text-orange-700 uppercase tracking-wide",children:"Soporte T\xe9cnico"})]}),(0,s.jsxs)("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tighter mb-3",children:["Panel ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600",children:"Soporte"})]}),(0,s.jsx)("p",{className:"text-slate-600 text-lg font-medium",children:"Atenci\xf3n al cliente y resoluci\xf3n de problemas."})]})]}),(0,s.jsxs)(u,{className:"bg-orange-50 border-orange-200 text-orange-900 rounded-2xl shadow-sm",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5 text-orange-600"}),(0,s.jsx)(h,{className:"font-black text-orange-900",children:"Modo Soporte Activo"}),(0,s.jsx)(p,{className:"text-orange-700 font-medium",children:"Visualizaci\xf3n limitada para asistencia a usuarios."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white border border-slate-200/60 p-8 shadow-lg shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-orange-100 to-transparent rounded-full blur-2xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("h3",{className:"text-xl font-black text-slate-900 mb-3 tracking-tight",children:"Tickets Recientes"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium mb-6",children:"No hay tickets pendientes."}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1.5 border border-emerald-200",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-emerald-600 rounded-full"}),(0,s.jsx)("span",{className:"text-xs font-bold text-emerald-700",children:"Todo al d\xeda"})]})]})]}),(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white border border-slate-200/60 p-8 shadow-lg shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-100 to-transparent rounded-full blur-2xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("h3",{className:"text-xl font-black text-slate-900 mb-3 tracking-tight",children:"B\xfasqueda de Usuarios"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium mb-6",children:"Encuentra y asiste a cualquier usuario."}),(0,s.jsx)(v.z,{className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 rounded-xl font-bold shadow-lg shadow-blue-600/30",children:"Buscar Usuario"})]})]})]})]})}function w(e){let{recentOrders:t=[]}=e;return(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-700",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-50 via-white to-emerald-50/30 border border-slate-200/60 p-8 shadow-xl shadow-slate-900/5",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-emerald-500/10 via-transparent to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 border border-emerald-100 mb-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-emerald-600 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-xs font-bold text-emerald-700 uppercase tracking-wide",children:"Cuenta Personal"})]}),(0,s.jsxs)("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tighter mb-3",children:["Mi ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600",children:"Cuenta"})]}),(0,s.jsx)("p",{className:"text-slate-600 text-lg font-medium",children:"Bienvenido a \xc9ter Store."})]})]}),(0,s.jsxs)(r.S,{children:[(0,s.jsx)(l.WelcomeWidget,{}),(0,s.jsx)(o.QuickActionsWidget,{role:"user"}),(0,s.jsx)(n.RecentOrdersWidget,{orders:t}),0===t.length&&(0,s.jsxs)("div",{className:"col-span-full relative overflow-hidden rounded-2xl bg-white border border-slate-200/60 p-8 shadow-lg shadow-slate-900/5 min-h-[280px] flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-48 h-48 bg-gradient-to-bl from-blue-100 to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,s.jsx)(f.Z,{className:"w-10 h-10 text-blue-600",strokeWidth:1.5})}),(0,s.jsx)("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Tu actividad reciente"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium max-w-sm mx-auto",children:"Realiza tu primera compra para ver actividad aqu\xed."})]})]})]})]})}},80652:function(e,t,a){"use strict";a.d(t,{S:function(){return l},c:function(){return i}});var s=a(57437),r=a(93448);let l=e=>{let{children:t,className:a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 auto-rows-[minmax(140px,auto)] gap-3",a),children:t})},i=e=>{let{children:t,className:a,colSpan:l=1,rowSpan:i=1}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("group relative overflow-hidden rounded-2xl border border-[#E2E8F0] bg-white/70 p-3 backdrop-blur-xl transition-all duration-300","hover:border-[#3B82F6]/40 hover:bg-white/80 hover:shadow-[0_12px_30px_rgba(15,23,42,0.08)]",1===l&&"md:col-span-1",2===l&&"md:col-span-2",3===l&&"md:col-span-3",4===l&&"md:col-span-2 lg:col-span-4",2===i&&"row-span-2",a),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-noise opacity-[0.04] pointer-events-none mix-blend-soft-light"}),(0,s.jsx)("div",{className:"absolute -top-[150px] -right-[150px] w-[300px] h-[300px] bg-[#F59E0B]/12 rounded-full blur-[80px] opacity-0 group-hover:opacity-100 transition-opacity duration-700 ease-in-out pointer-events-none"}),(0,s.jsx)("div",{className:"absolute -bottom-[150px] -left-[150px] w-[300px] h-[300px] bg-[#3B82F6]/12 rounded-full blur-[80px] opacity-0 group-hover:opacity-100 transition-opacity duration-700 ease-in-out pointer-events-none"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-transparent to-transparent opacity-50 pointer-events-none group-hover:opacity-70 transition-opacity duration-500"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tl from-[#1E40AF]/10 via-transparent to-transparent opacity-40 pointer-events-none"}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-3xl border border-black/5 group-hover:border-[#3B82F6]/30 transition-colors duration-300 pointer-events-none"}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-3xl ring-1 ring-inset ring-black/5 group-hover:ring-[#3B82F6]/20 transition-all duration-300 pointer-events-none"}),(0,s.jsx)("div",{className:"relative z-10 h-full flex flex-col",children:t})]})}},71620:function(e,t,a){"use strict";a.d(t,{ActivityWidget:function(){return u}});var s=a(57437),r=a(80652),l=a(48279),i=a(93448),o=a(42488),n=a(16275),d=a(95805),c=a(95252),x=a(44794),m=a(82718);function u(e){let{activities:t=[]}=e;return(0,s.jsxs)(r.c,{colSpan:1,rowSpan:2,className:"overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4 relative z-20",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-[#EFF6FF] to-[#DBEAFE] border border-[#3B82F6]/20",children:(0,s.jsx)(o.Z,{size:14,className:"text-[#1E40AF]",strokeWidth:2.5})}),(0,s.jsx)("h3",{className:"text-[#0F172A] font-black text-lg tracking-tight uppercase",children:"Actividad"})]}),(0,s.jsx)("div",{className:"space-y-2 relative z-10 overflow-y-auto max-h-[340px] -mr-3 pr-3 scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:0===t.length?(0,s.jsx)("div",{className:"text-center py-8 text-xs text-slate-400",children:"No hay actividad reciente"}):t.map((e,a)=>{let r=p(e.type);return(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.08*a},className:(0,i.cn)("group relative p-2.5 rounded-xl transition-all duration-300 cursor-pointer","bg-white/40 hover:bg-white/80 border border-slate-200/50 hover:border-slate-300/80","hover:shadow-md hover:scale-[1.02]"),children:[(0,s.jsx)("div",{className:(0,i.cn)("absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300","bg-gradient-to-r ".concat(r.bgSoft," to-transparent"))}),(0,s.jsxs)("div",{className:"relative z-10 flex items-start gap-2.5",children:[(0,s.jsx)("div",{className:(0,i.cn)("w-9 h-9 rounded-lg flex items-center justify-center text-white shadow-md flex-shrink-0","group-hover:scale-110 transition-transform duration-300",r.bg,"ring-2 ".concat(r.ring)),children:h(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-0.5",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-[#0F172A] group-hover:text-[#1E40AF] transition-colors line-clamp-1",children:e.title}),e.value&&(0,s.jsx)("span",{className:(0,i.cn)("text-[9px] font-extrabold px-1.5 py-0.5 rounded-md whitespace-nowrap",r.text,r.bgSoft),children:e.value})]}),(0,s.jsx)("p",{className:"text-[10px] text-[#64748B] mb-1 line-clamp-1",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-[9px] text-[#94A3B8]",children:[(0,s.jsx)("div",{className:"w-1 h-1 rounded-full bg-[#94A3B8]"}),(0,s.jsx)("span",{children:new Date(e.timestamp).toLocaleDateString("es-ES",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})})]})]})]}),a<t.length-1&&(0,s.jsx)("div",{className:"absolute left-[22px] top-[46px] w-[1px] h-[8px] bg-gradient-to-b from-slate-300 to-transparent"})]},e.id)})})]})}let h=e=>{switch(e){case"order":return(0,s.jsx)(n.Z,{size:14});case"customer":return(0,s.jsx)(d.Z,{size:14});case"revenue":return(0,s.jsx)(c.Z,{size:14});case"product":return(0,s.jsx)(x.Z,{size:14});case"message":return(0,s.jsx)(m.Z,{size:14});default:return(0,s.jsx)(o.Z,{size:14})}},p=e=>{switch(e){case"order":return{bg:"bg-blue-600",bgSoft:"bg-blue-50",text:"text-blue-700",ring:"ring-blue-100"};case"customer":return{bg:"bg-purple-600",bgSoft:"bg-purple-50",text:"text-purple-700",ring:"ring-purple-100"};case"revenue":return{bg:"bg-emerald-600",bgSoft:"bg-emerald-50",text:"text-emerald-700",ring:"ring-emerald-100"};case"product":return{bg:"bg-amber-600",bgSoft:"bg-amber-50",text:"text-amber-700",ring:"ring-amber-100"};case"message":return{bg:"bg-indigo-600",bgSoft:"bg-indigo-50",text:"text-indigo-700",ring:"ring-indigo-100"};default:return{bg:"bg-slate-600",bgSoft:"bg-slate-50",text:"text-slate-700",ring:"ring-slate-100"}}}},76737:function(e,t,a){"use strict";a.d(t,{AdvancedAnalyticsWidget:function(){return j}});var s=a(57437),r=a(80652),l=a(48279),i=a(14296),o=a(77031),n=a(78155),d=a(10956),c=a(86810),x=a(10062),m=a(20407),u=a(93448),h=a(2265),p=a(70525),b=a(44794),g=a(95252);let f=e=>{let{active:t,payload:a,label:r}=e;if(t&&a&&a.length){var l;return(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-md border border-slate-200 p-3 rounded-xl shadow-xl",children:[(0,s.jsx)("p",{className:"font-bold text-slate-800 mb-1",children:r}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-xs text-blue-600 font-medium flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Ventas: ",(0,s.jsx)("span",{className:"font-bold",children:a[0].value})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-slate-300"}),"Objetivo: ",(0,s.jsx)("span",{className:"font-bold",children:(null===(l=a[1])||void 0===l?void 0:l.value)||0})]})]})]})}return null},v=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0];return(0,s.jsx)("div",{className:"bg-white/95 backdrop-blur-md border border-slate-200 p-2 rounded-lg shadow-xl",children:(0,s.jsxs)("p",{className:"text-xs font-bold text-slate-700 flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.payload.color}}),e.name,": ",(0,s.jsx)("span",{className:"font-black ml-auto pl-2",children:e.value})]})})}return null};function j(e){let{salesByCategory:t=[],monthlyData:a=[]}=e,[j,N]=(0,h.useState)(!1),[w,y]=(0,h.useState)("bar");(0,h.useEffect)(()=>{N(!0)},[]);let k=t.length>0?t:[{name:"Sin datos",value:1,color:"#E2E8F0"}],C=a.length>0?a:[],S=t.reduce((e,t)=>e+t.value,0),z=t.length>0?t.reduce((e,t)=>e.value>t.value?e:t):{name:"N/A",value:0},E=t.length>0?Math.round(S/t.length):0;return j?(0,s.jsxs)(r.c,{colSpan:2,rowSpan:2,className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-blue-100/30 to-transparent rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-purple-100/30 to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative z-10 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.E.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0,ease:"easeInOut"}},className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200",children:(0,s.jsx)(p.Z,{size:14,className:"text-blue-600",strokeWidth:2.5})}),(0,s.jsx)("h3",{className:"text-slate-900 font-black text-lg tracking-tight uppercase",children:"An\xe1lisis"})]}),(0,s.jsx)("div",{className:"flex items-center gap-1 p-1 bg-white/80 border border-slate-200 rounded-xl backdrop-blur-sm shadow-sm",children:[{id:"bar",label:"Barras"},{id:"pie",label:"Circular"}].map(e=>(0,s.jsx)("button",{onClick:()=>y(e.id),className:(0,u.cn)("px-3 py-1 text-[10px] font-bold rounded-lg transition-all duration-300",w===e.id?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"text-slate-600 hover:text-blue-600 hover:bg-slate-50"),children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-2.5 rounded-xl bg-gradient-to-br from-blue-50 to-white border border-blue-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,s.jsx)(b.Z,{size:12,className:"text-blue-600",strokeWidth:2.5}),(0,s.jsx)("p",{className:"text-[9px] font-bold text-blue-600 uppercase",children:"Total"})]}),(0,s.jsx)("p",{className:"text-xl font-black text-blue-700",children:S}),(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-medium",children:"unidades"})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-2.5 rounded-xl bg-gradient-to-br from-emerald-50 to-white border border-emerald-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,s.jsx)(p.Z,{size:12,className:"text-emerald-600",strokeWidth:2.5}),(0,s.jsx)("p",{className:"text-[9px] font-bold text-emerald-600 uppercase",children:"Top"})]}),(0,s.jsx)("p",{className:"text-sm font-black text-emerald-700 truncate",children:z.name}),(0,s.jsxs)("p",{className:"text-[9px] text-slate-500 font-medium",children:[z.value," uds"]})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-2.5 rounded-xl bg-gradient-to-br from-amber-50 to-white border border-amber-200 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,s.jsx)(g.Z,{size:12,className:"text-amber-600",strokeWidth:2.5}),(0,s.jsx)("p",{className:"text-[9px] font-bold text-amber-600 uppercase",children:"Promedio"})]}),(0,s.jsx)("p",{className:"text-xl font-black text-amber-700",children:E}),(0,s.jsx)("p",{className:"text-[9px] text-slate-500 font-medium",children:"por categor\xeda"})]})]}),(0,s.jsx)("div",{className:"flex-1 min-h-0",children:(0,s.jsx)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"h-full",children:"bar"===w?(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(o.v,{data:C,margin:{top:10,right:10,left:-20,bottom:0},children:[(0,s.jsx)(n.u,{content:(0,s.jsx)(f,{})}),(0,s.jsx)(d.$Q,{dataKey:"ventas",fill:"#3B82F6",radius:[8,8,0,0],animationDuration:1e3}),(0,s.jsx)(d.$Q,{dataKey:"objetivo",fill:"#E2E8F0",radius:[8,8,0,0],animationDuration:1e3})]})}):(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(c.u,{children:[(0,s.jsx)(x.by,{data:k,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",animationBegin:0,animationDuration:800,children:k.map((e,t)=>(0,s.jsx)(m.b,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(n.u,{content:(0,s.jsx)(v,{})})]})})},w)}),"pie"===w&&(0,s.jsx)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-3 pt-3 border-t border-slate-200",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:k.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-slate-600",children:e.name})]},e.name))})}),"bar"===w&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-3 pt-3 border-t border-slate-200 flex items-center justify-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded bg-blue-500"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-slate-600",children:"Ventas"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded bg-slate-300"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-slate-600",children:"Objetivo"})]})]})]})]}):(0,s.jsx)(r.c,{colSpan:2,rowSpan:2,className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-full w-full"})})}},35156:function(e,t,a){"use strict";a.d(t,{NotificationsWidget:function(){return N}});var s=a(57437),r=a(29),l=a.n(r),i=a(80652),o=a(48279),n=a(57586),d=a(41671),c=a(49322),x=a(33245),m=a(99388),u=a(32489),h=a(94766),p=a(67782),b=a(93448),g=a(2265),f=a(25458),v=a(57240);function j(e){let{notification:t,onDismiss:a,onToggleRead:r,index:l}=e,[i,h]=(0,g.useState)(!1),p={success:{icon:d.Z,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",dotColor:"bg-emerald-500"},warning:{icon:c.Z,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",dotColor:"bg-amber-500"},info:{icon:x.Z,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",dotColor:"bg-blue-500"},error:{icon:m.Z,color:"text-rose-600",bgColor:"bg-rose-50",borderColor:"border-rose-200",dotColor:"bg-rose-500"}}[t.type],j=p.icon;return(0,s.jsx)(o.E.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20,height:0},transition:{duration:.3,delay:.05*l},onHoverStart:()=>h(!0),onHoverEnd:()=>h(!1),className:"relative",children:(0,s.jsxs)("div",{onClick:()=>r(t.id),className:(0,b.cn)("relative group cursor-pointer p-3 rounded-xl border transition-all duration-300",p.bgColor,p.borderColor,t.read?"opacity-60 hover:opacity-100":"","hover:shadow-md"),children:[!t.read&&(0,s.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},className:(0,b.cn)("absolute top-2 left-2 w-2 h-2 rounded-full",p.dotColor),children:(0,s.jsx)(o.E.div,{animate:{scale:[1,1.5,1]},transition:{duration:2,repeat:1/0},className:(0,b.cn)("absolute inset-0 rounded-full opacity-50",p.dotColor)})}),(0,s.jsx)(n.M,{children:i&&(0,s.jsx)(o.E.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:e=>{e.stopPropagation(),a(t.id)},className:"absolute top-2 right-2 p-1 rounded-lg bg-white border border-slate-200 hover:bg-slate-50 transition-colors z-10",children:(0,s.jsx)(u.Z,{size:12,className:"text-slate-500"})})}),(0,s.jsxs)("div",{className:"flex items-start gap-3 pl-4",children:[(0,s.jsx)(o.E.div,{animate:{rotate:i?5:0},className:(0,b.cn)("p-1.5 rounded-lg border bg-white shadow-sm mt-0.5",p.borderColor),children:(0,s.jsx)(j,{size:14,className:p.color,strokeWidth:2.5})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:(0,b.cn)("text-xs font-black mb-0.5 truncate",p.color.replace("600","700")),children:t.title}),(0,s.jsx)("p",{className:"text-[10px] text-slate-600 font-medium leading-tight mb-1.5",children:t.message}),(0,s.jsx)("p",{className:"text-[9px] text-slate-400 font-medium",children:(0,f.Q)(t.timestamp,{addSuffix:!0,locale:v.es})})]})]})]})})}function N(e){let{initialNotifications:t=[]}=e,[a,r]=(0,g.useState)([]),[d,c]=(0,g.useState)("all"),[x,m]=(0,g.useState)(!1);(0,g.useEffect)(()=>{r(t.map(e=>({id:e.id,type:e.type||"info",title:e.title||"Notificaci\xf3n",message:e.content||e.message||"",timestamp:e.created_at?new Date(e.created_at):new Date,read:e.read||!1}))),m(!0)},[t]);let u=e=>{r(t=>t.filter(t=>t.id!==e))},f=e=>{r(t=>t.map(t=>t.id===e?{...t,read:!t.read}:t))},v="all"===d?a:a.filter(e=>!e.read),N=a.filter(e=>!e.read).length;return x?(0,s.jsxs)(i.c,{colSpan:1,rowSpan:2,className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 absolute top-0 right-0 w-48 h-48 bg-gradient-to-bl from-purple-100/40 to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 relative z-10 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 relative",children:[(0,s.jsx)(o.E.div,{animate:{rotate:[0,15,-15,0]},transition:{duration:.5,delay:2,repeat:1/0,repeatDelay:5},className:"p-1.5 rounded-lg bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200",children:(0,s.jsx)(h.Z,{size:14,className:"text-purple-600",strokeWidth:2.5})}),N>0&&(0,s.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-4 h-4 bg-rose-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"jsx-83efdd1de76c2a06 text-[8px] font-black text-white",children:N})})]}),(0,s.jsx)("h3",{className:"jsx-83efdd1de76c2a06 text-slate-900 font-black text-lg tracking-tight uppercase",children:"Alertas"})]}),(0,s.jsx)("button",{onClick:()=>{r(e=>e.map(e=>({...e,read:!0})))},disabled:0===N,className:"jsx-83efdd1de76c2a06 "+((0,b.cn)("text-[9px] font-bold px-2 py-1 rounded-lg transition-all",N>0?"text-purple-600 hover:bg-purple-50":"text-slate-400 cursor-not-allowed")||""),children:"Marcar todas"})]}),(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 flex items-center gap-1 p-1 bg-white/80 border border-slate-200 rounded-xl backdrop-blur-sm shadow-sm mb-3",children:[{id:"all",label:"Todas (".concat(a.length,")")},{id:"unread",label:"No le\xeddas (".concat(N,")")}].map(e=>(0,s.jsx)("button",{onClick:()=>c(e.id),className:"jsx-83efdd1de76c2a06 "+((0,b.cn)("flex-1 px-2 py-1 text-[10px] font-bold rounded-lg transition-all duration-300",d===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-md":"text-slate-600 hover:text-purple-600 hover:bg-slate-50")||""),children:e.label},e.id))}),(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:(0,s.jsx)(n.M,{mode:"popLayout",children:0===v.length?(0,s.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full text-center",children:[(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:(0,s.jsx)(h.Z,{size:32,className:"text-slate-300"})}),(0,s.jsx)("p",{className:"jsx-83efdd1de76c2a06 text-[11px] text-slate-400 font-medium",children:"unread"===d?"No hay notificaciones nuevas":"No hay notificaciones"})]}):(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 space-y-2",children:v.map((e,t)=>(0,s.jsx)(j,{notification:{id:e.id,type:e.type||"info",title:e.title,message:e.message,timestamp:new Date(e.timestamp),read:e.read},onDismiss:u,onToggleRead:f,index:t},e.id))})})}),a.length>0&&(0,s.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-3 pt-3 border-t border-slate-200",children:(0,s.jsxs)("button",{className:"jsx-83efdd1de76c2a06 w-full py-2 px-3 rounded-xl bg-slate-50 hover:bg-slate-100 border border-slate-200 text-slate-600 hover:text-slate-900 text-[10px] font-bold transition-all duration-300 flex items-center justify-center gap-1.5",children:[(0,s.jsx)(p.Z,{size:12,strokeWidth:2.5}),"Ver Todas las Notificaciones"]})})]}),(0,s.jsx)(l(),{id:"83efdd1de76c2a06",children:".custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar{width:4px}.custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar-track{background:transparent}.custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar-thumb{background:#CBD5E1;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar-thumb:hover{background:#94A3B8}"})]}):(0,s.jsx)(i.c,{colSpan:1,rowSpan:2,className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-full w-full"})})}},71054:function(e,t,a){"use strict";a.d(t,{PerformanceMetricsWidget:function(){return N}});var s=a(57437),r=a(80652),l=a(48279),i=a(70525),o=a(3085),n=a(16275),d=a(58896),c=a(95805),x=a(95252),m=a(42488),u=a(11239),h=a(82023),p=a(51817),b=a(42208),g=a(93448),f=a(2265),v=a(88127);function j(e){let{label:t,value:a,target:r,icon:n,color:d,delay:c=0}=e,[x,m]=(0,f.useState)(0),u=Math.min(a/r*100,100),h=a>=r;(0,f.useEffect)(()=>{let e=setTimeout(()=>{m(u)},c);return()=>clearTimeout(e)},[u,c]);let p={blue:{gradient:"from-blue-500 to-blue-600",bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",progressBg:"bg-blue-200/40",progressBar:"from-blue-500 to-blue-600",glow:"shadow-blue-500/20"},emerald:{gradient:"from-emerald-500 to-emerald-600",bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-700",progressBg:"bg-emerald-200/40",progressBar:"from-emerald-500 to-emerald-600",glow:"shadow-emerald-500/20"},amber:{gradient:"from-amber-500 to-amber-600",bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",progressBg:"bg-amber-200/40",progressBar:"from-amber-500 to-amber-600",glow:"shadow-amber-500/20"},purple:{gradient:"from-purple-500 to-purple-600",bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",progressBg:"bg-purple-200/40",progressBar:"from-purple-500 to-purple-600",glow:"shadow-purple-500/20"}}[d];return(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:c},className:"group relative",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(l.E.div,{whileHover:{scale:1.1,rotate:5},className:(0,g.cn)("p-2 rounded-xl border",p.bg,p.border,"shadow-sm transition-all duration-300",p.glow),children:(0,s.jsx)(n,{size:16,className:(0,g.cn)("bg-gradient-to-br bg-clip-text text-transparent",p.gradient),strokeWidth:2.5})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-slate-700",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[h?(0,s.jsx)(i.Z,{size:12,className:"text-emerald-600",strokeWidth:2.5}):(0,s.jsx)(o.Z,{size:12,className:"text-rose-500",strokeWidth:2.5}),(0,s.jsxs)("span",{className:(0,g.cn)("text-xs font-black",h?"text-emerald-600":"text-rose-500"),children:[u.toFixed(0),"%"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,g.cn)("relative h-1.5 flex-1 rounded-full overflow-hidden",p.progressBg),children:(0,s.jsx)(l.E.div,{initial:{width:0},animate:{width:"".concat(x,"%")},transition:{duration:1,delay:c+.2,ease:"easeOut"},className:(0,g.cn)("h-full bg-gradient-to-r rounded-full",p.progressBar)})}),(0,s.jsxs)("p",{className:"text-[10px] font-bold text-slate-500 min-w-[50px] text-right",children:[a,"/",r]})]})]})]})})}function N(e){let{metrics:t}=e,[a,N]=(0,f.useState)(!1),[w,y]=(0,f.useState)(null),[k,C]=(0,f.useState)(!1);(0,f.useEffect)(()=>{N(!0)},[]);let S=async()=>{if(t&&0!==t.length){C(!0);try{let e=await (0,v.V)(t);e.success&&e.text&&y(e.text)}finally{C(!1)}}},z=t||[],E=z.length>0?Math.round(z.reduce((e,t)=>e+Math.min(t.value/t.target*100,100),0)/z.length):0,_=e=>{let t=e.toLowerCase();return t.includes("ventas")?n.Z:t.includes("conversi\xf3n")||t.includes("conversion")?d.Z:t.includes("clientes")?c.Z:t.includes("objetivo")?x.Z:m.Z},A=e=>{let t=["blue","emerald","purple","amber"];return t[e%t.length]};return a?(0,s.jsxs)(r.c,{colSpan:1,rowSpan:2,className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-blue-100/50 to-transparent rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-purple-100/50 to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200",children:(0,s.jsx)(m.Z,{size:14,className:"text-blue-600",strokeWidth:2.5})}),(0,s.jsx)("h3",{className:"text-slate-900 font-black text-lg tracking-tight uppercase",children:"M\xe9tricas"}),(0,s.jsx)(l.E.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"ml-auto",children:(0,s.jsx)(u.Z,{size:16,className:"text-amber-500",fill:"currentColor"})})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative mb-6 p-4 rounded-2xl bg-gradient-to-br from-slate-50 to-white border border-slate-200 shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-200/30 to-transparent rounded-full blur-2xl"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Performance Score"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.E.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:E}),z[0]&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:["up"===z[0].trend?(0,s.jsx)(i.Z,{size:12,className:"text-emerald-600",strokeWidth:2.5}):(0,s.jsx)(o.Z,{size:12,className:"text-rose-500",strokeWidth:2.5}),(0,s.jsxs)("span",{className:(0,g.cn)("text-xs font-black","up"===z[0].trend?"text-emerald-600":"text-rose-600"),children:["up"===z[0].trend?"+":"-",z[0].trendValue.toFixed(0),"%"]})]}),(0,s.jsx)("span",{className:"text-[9px] text-slate-500 font-medium",children:"vs. ayer"})]})]})]}),(0,s.jsxs)(l.E.div,{initial:{rotate:-90},animate:{rotate:270},transition:{duration:20,repeat:1/0,ease:"linear"},className:"relative w-16 h-16",children:[(0,s.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 100 100",children:[(0,s.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#E2E8F0",strokeWidth:"8"}),(0,s.jsx)(l.E.circle,{cx:"50",cy:"50",r:"40",fill:"none",stroke:"url(#gradient)",strokeWidth:"8",strokeLinecap:"round",initial:{strokeDasharray:"0 251.2"},animate:{strokeDasharray:"".concat(E/100*251.2," 251.2")},transition:{duration:1.5,ease:"easeOut"}}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#3B82F6"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#A855F7"})]})})]}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(d.Z,{size:20,className:"text-blue-600",strokeWidth:2})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[z.map((e,t)=>(0,s.jsx)(j,{label:e.label,value:e.value,target:e.target,icon:_(e.label),color:A(t),delay:.1*t},e.label)),0===z.length&&(0,s.jsx)("div",{className:"text-center py-4 text-xs text-slate-400",children:"No hay m\xe9tricas disponibles"})]}),w&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 p-3 rounded-xl bg-orange-50 border border-orange-200 text-orange-900 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(h.Z,{size:12,className:"text-orange-500"}),(0,s.jsx)("span",{className:"font-bold uppercase tracking-wider",children:"\xc9ter AI Insights"})]}),(0,s.jsx)("p",{className:"whitespace-pre-line leading-relaxed font-medium",children:w})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-4 pt-4 border-t border-slate-200 flex flex-col gap-2",children:[(0,s.jsxs)("button",{onClick:S,disabled:k,className:"w-full py-2 px-4 rounded-xl border border-blue-200 bg-white hover:bg-blue-50 text-blue-700 text-[10px] font-bold transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50",children:[k?(0,s.jsx)(p.Z,{size:12,className:"animate-spin"}):(0,s.jsx)(h.Z,{size:12,strokeWidth:2.5}),k?"Analizando...":"Generar Insights con IA"]}),(0,s.jsxs)("button",{className:"w-full py-2.5 px-4 rounded-xl bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white text-xs font-bold shadow-lg shadow-blue-600/30 hover:shadow-xl hover:shadow-blue-600/40 transition-all duration-300 flex items-center justify-center gap-2",children:[(0,s.jsx)(b.Z,{size:14,strokeWidth:2.5}),"Ver Detalles Completos"]})]})]})]}):(0,s.jsx)(r.c,{colSpan:1,rowSpan:2,className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-full w-full"})})}},95798:function(e,t,a){"use strict";a.d(t,{QuickActionsWidget:function(){return z}});var s=a(57437),r=a(29),l=a.n(r),i=a(80652),o=a(48279),n=a(99397),d=a(17689),c=a(48736),x=a(68919),m=a(95805),u=a(44794),h=a(92735),p=a(98728),b=a(42449),g=a(16275),f=a(82718),v=a(64413),j=a(70525),N=a(94766),w=a(93448),y=a(2265),k=a(27648);let C=[{id:"new-product",label:"Nuevo Producto",description:"Agregar producto al cat\xe1logo",icon:n.Z,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",href:"/dashboard?view=products&action=new"},{id:"upload-catalog",label:"Subir Cat\xe1logo",description:"Importar productos en lote",icon:d.Z,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",href:"/dashboard?view=products&action=import"},{id:"new-order",label:"Nuevo Pedido",description:"Crear pedido manualmente",icon:c.Z,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",href:"/dashboard?view=orders&action=new"},{id:"share-catalog",label:"Compartir Cat\xe1logo",description:"Enviar cat\xe1logo a clientes",icon:x.Z,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",href:"/dashboard?view=catalog"},{id:"manage-clients",label:"Clientes",description:"Ver y gestionar clientes",icon:m.Z,color:"text-rose-600",bgColor:"bg-rose-50",borderColor:"border-rose-200",href:"/dashboard?view=customers",badge:"3"},{id:"inventory",label:"Inventario",description:"Actualizar stock",icon:u.Z,color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200",href:"/dashboard?view=products&tab=inventory"},{id:"reports",label:"Reportes",description:"Descargar estad\xedsticas",icon:h.Z,color:"text-teal-600",bgColor:"bg-teal-50",borderColor:"border-teal-200",href:"/dashboard?view=reports"},{id:"settings",label:"Configuraci\xf3n",description:"Ajustes del sistema",icon:p.Z,color:"text-slate-600",bgColor:"bg-slate-50",borderColor:"border-slate-200",href:"/dashboard?view=settings"}];function S(e){let{action:t,index:a}=e,[r,l]=(0,y.useState)(!1);return(0,s.jsx)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.05*a},onHoverStart:()=>l(!0),onHoverEnd:()=>l(!1),children:(0,s.jsx)(k.default,{href:t.href,children:(0,s.jsxs)(o.E.div,{whileHover:{scale:1.05,y:-4},whileTap:{scale:.98},className:(0,w.cn)("relative group cursor-pointer p-3 rounded-xl border transition-all duration-300 overflow-hidden",t.bgColor,t.borderColor,"hover:shadow-lg"),children:[(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:r?1:0},className:(0,w.cn)("absolute inset-0 opacity-20",t.bgColor.replace("50","100"))}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)(o.E.div,{animate:{rotate:r?5:0},transition:{duration:.2},className:(0,w.cn)("p-2 rounded-lg border bg-white shadow-sm",t.borderColor),children:(0,s.jsx)(t.icon,{size:18,className:t.color,strokeWidth:2.5})}),t.badge&&(0,s.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},className:"px-2 py-0.5 rounded-full bg-rose-500 text-white text-[9px] font-black",children:t.badge})]}),(0,s.jsx)("h4",{className:(0,w.cn)("text-xs font-black mb-0.5",t.color.replace("600","700")),children:t.label}),(0,s.jsx)("p",{className:"text-[10px] text-slate-500 font-medium leading-tight",children:t.description})]}),(0,s.jsx)(o.E.div,{initial:{width:0},animate:{width:r?"100%":0},className:(0,w.cn)("absolute bottom-0 left-0 h-0.5",t.color.replace("text-","bg-"))})]})})})}function z(e){let{customerCount:t=0,unreadNotifications:a=0,role:r="admin"}=e,[n,d]=(0,y.useState)("all"),c=[{id:"new-order",label:"Nuevo Pedido",description:"Explorar cat\xe1logo completo",icon:b.Z,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",href:"/dashboard?view=catalog"},{id:"my-orders",label:"Mis Pedidos",description:"Ver historial de compras",icon:u.Z,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",href:"/dashboard?view=orders"},{id:"cart",label:"Mi Carrito",description:"Ver productos pendientes",icon:g.Z,color:"text-amber-600",bgColor:"bg-amber-50",borderColor:"border-amber-200",href:"/cart"},{id:"support",label:"Soporte",description:"Contactar ayuda",icon:f.Z,color:"text-slate-600",bgColor:"bg-slate-50",borderColor:"border-slate-200",href:"/dashboard?view=support"}],x=[{id:"catalog",label:"Ver Productos",description:"Explorar tienda",icon:v.Z,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",href:"/"},{id:"my-orders",label:"Mis Compras",description:"Ver historial",icon:u.Z,color:"text-emerald-600",bgColor:"bg-emerald-50",borderColor:"border-emerald-200",href:"/dashboard?view=orders"}],m=C;"reseller"===r?m=c:"user"===r&&(m=x);let h=m.map(e=>"manage-clients"===e.id?{...e,badge:t>0?t.toString():void 0}:e),p="admin"===r?["new-product","upload-catalog","share-catalog","manage-clients"]:"reseller"===r?["new-order","my-orders","cart"]:["catalog","my-orders"],k="all"===n?h:h.filter(e=>p.includes(e.id));return(0,s.jsxs)(i.c,{colSpan:2,rowSpan:2,className:"relative overflow-hidden",children:[(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-amber-100/30 to-transparent rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-blue-100/30 to-transparent rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 relative z-10 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 flex items-center gap-2",children:[(0,s.jsx)(o.E.div,{animate:{boxShadow:["0 0 0 0 rgba(59, 130, 246, 0)","0 0 0 8px rgba(59, 130, 246, 0)"]},transition:{duration:1.5,repeat:1/0},className:"p-1.5 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200",children:(0,s.jsx)(j.Z,{size:14,className:"text-blue-600",strokeWidth:2.5})}),(0,s.jsx)("h3",{className:"jsx-83efdd1de76c2a06 text-slate-900 font-black text-lg tracking-tight uppercase",children:"Acciones R\xe1pidas"})]}),(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 flex items-center gap-1 p-1 bg-white/80 border border-slate-200 rounded-xl backdrop-blur-sm shadow-sm",children:[{id:"all",label:"Todas"},{id:"frequent",label:"Frecuentes"}].map(e=>(0,s.jsx)("button",{onClick:()=>d(e.id),className:"jsx-83efdd1de76c2a06 "+((0,w.cn)("px-3 py-1 text-[10px] font-bold rounded-lg transition-all duration-300",n===e.id?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"text-slate-600 hover:text-blue-600 hover:bg-slate-50")||""),children:e.label},e.id))})]}),(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 flex-1 overflow-y-auto pr-1 custom-scrollbar",children:(0,s.jsx)(o.E.div,{layout:!0,className:"grid grid-cols-2 md:grid-cols-4 gap-2.5",children:k.map((e,t)=>(0,s.jsx)(S,{action:e,index:t},e.id))})}),(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-4 pt-4 border-t border-slate-200 flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"jsx-83efdd1de76c2a06 w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,s.jsx)("span",{className:"jsx-83efdd1de76c2a06 text-[10px] font-medium text-slate-500",children:"Sistema operativo"})]}),(0,s.jsxs)("div",{className:"jsx-83efdd1de76c2a06 flex items-center gap-1.5 ml-auto",children:[(0,s.jsx)(N.Z,{size:12,className:a>0?"text-rose-500":"text-slate-400"}),(0,s.jsx)("span",{className:"jsx-83efdd1de76c2a06 "+((0,w.cn)("text-[10px] font-bold",a>0?"text-rose-600":"text-slate-500")||""),children:a>0?"".concat(a," notificaciones nuevas"):"Sin notificaciones nuevas"})]})]})]}),(0,s.jsx)(l(),{id:"83efdd1de76c2a06",children:".custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar{width:4px}.custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar-track{background:transparent}.custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar-thumb{background:#CBD5E1;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.custom-scrollbar.jsx-83efdd1de76c2a06::-webkit-scrollbar-thumb:hover{background:#94A3B8}"})]})}},60351:function(e,t,a){"use strict";a.d(t,{RecentOrdersWidget:function(){return b}});var s=a(57437),r=a(80652),l=a(69174),i=a(92934),o=a(91723),n=a(49322),d=a(99388),c=a(44794),x=a(67782),m=a(48279),u=a(93448);let h=e=>{switch(e.toLowerCase()){case"completado":return{badge:(0,s.jsxs)(l.C,{variant:"success",className:"gap-1",children:[(0,s.jsx)(i.Z,{size:10}),"Completado"]}),icon:(0,s.jsx)(i.Z,{size:16,className:"text-emerald-600"}),color:"emerald"};case"procesando":return{badge:(0,s.jsxs)(l.C,{variant:"blue",className:"gap-1",children:[(0,s.jsx)(o.Z,{size:10}),"Procesando"]}),icon:(0,s.jsx)(o.Z,{size:16,className:"text-blue-600"}),color:"blue"};case"pendiente":return{badge:(0,s.jsxs)(l.C,{variant:"warning",className:"gap-1",children:[(0,s.jsx)(n.Z,{size:10}),"Pendiente"]}),icon:(0,s.jsx)(n.Z,{size:16,className:"text-amber-600"}),color:"amber"};case"cancelado":return{badge:(0,s.jsxs)(l.C,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(d.Z,{size:10}),"Cancelado"]}),icon:(0,s.jsx)(d.Z,{size:16,className:"text-rose-600"}),color:"rose"};default:return{badge:(0,s.jsx)(l.C,{variant:"outline",children:e}),icon:(0,s.jsx)(c.Z,{size:16,className:"text-slate-600"}),color:"slate"}}},p=e=>{let t=e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),a=["bg-gradient-to-br from-blue-500 to-blue-600","bg-gradient-to-br from-purple-500 to-purple-600","bg-gradient-to-br from-pink-500 to-pink-600","bg-gradient-to-br from-emerald-500 to-emerald-600","bg-gradient-to-br from-amber-500 to-amber-600"],s=e.length%a.length;return{initials:t,colorClass:a[s]}};function b(e){let{orders:t=[]}=e,a=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(e);return(0,s.jsxs)(r.c,{colSpan:2,className:"overflow-hidden group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-[#EFF6FF] to-[#DBEAFE] border border-[#3B82F6]/20",children:(0,s.jsx)(c.Z,{size:14,className:"text-[#1E40AF]",strokeWidth:2.5})}),(0,s.jsx)("h3",{className:"text-[#0F172A] font-black text-lg tracking-tight uppercase",children:"Pedidos Recientes"})]}),(0,s.jsx)("button",{className:"h-8 w-8 flex items-center justify-center rounded-xl bg-white/80 hover:bg-white text-[#94A3B8] hover:text-[#1E40AF] hover:scale-105 transition-all border border-[#E2E8F0] hover:shadow-md",children:(0,s.jsx)(x.Z,{size:16})})]}),(0,s.jsx)("div",{className:"overflow-x-auto relative z-10 -mx-3 px-3",children:0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:(0,s.jsx)(c.Z,{size:32,className:"text-slate-300"})}),(0,s.jsx)("p",{className:"text-[#94A3B8] text-xs font-medium",children:"No hay pedidos recientes"})]}):(0,s.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>{var r;let l=h(e.status||"pendiente"),i=p(e.customer_name);return(0,s.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:(0,u.cn)("group/row relative p-3 rounded-xl transition-all duration-300 cursor-pointer","bg-white/40 hover:bg-white/80 border border-slate-200/50 hover:border-slate-300/80","hover:shadow-lg hover:scale-[1.01]"),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-transparent rounded-xl opacity-0 group-hover/row:opacity-100 transition-opacity duration-300"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center gap-3",children:[(0,s.jsx)(m.E.div,{whileHover:{scale:1.1,rotate:5},className:(0,u.cn)("w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-xs shadow-md",i.colorClass),children:i.initials}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-[#0F172A] group-hover/row:text-[#1E40AF] transition-colors truncate",children:e.customer_name}),(0,s.jsxs)("div",{className:"px-1.5 py-0.5 rounded bg-slate-100 text-[9px] font-mono text-slate-600",children:["#",e.id.slice(0,6)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-[#64748B]",children:[(0,s.jsx)(o.Z,{size:10}),(0,s.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"text-right mr-2",children:[(0,s.jsx)("p",{className:"text-sm font-black text-[#0F172A] tracking-tight",children:a(e.total_amount||0)}),(0,s.jsxs)("p",{className:"text-[9px] text-[#64748B] font-medium",children:[(null===(r=e.items)||void 0===r?void 0:r.length)||0," items"]})]}),(0,s.jsx)("div",{className:"transform group-hover/row:scale-105 transition-transform duration-300",children:l.badge})]}),(0,s.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover/row:opacity-100 transition-opacity",children:(0,s.jsx)("div",{className:"w-1 h-8 bg-gradient-to-b from-[#3B82F6] to-[#1E40AF] rounded-full"})})]},e.id)})})})]})}},69546:function(e,t,a){"use strict";a.d(t,{RevenueChartWidget:function(){return j}});var s=a(57437),r=a(80652),l=a(14296),i=a(5481),o=a(56940),n=a(97059),d=a(62994),c=a(78155),x=a(26662),m=a(96215),u=a(70525),h=a(3085),p=a(31047),b=(a(51817),a(2265)),g=a(48279),f=a(93448);function v(e){let{active:t,payload:a}=e;if(t&&a&&a.length){var r;let e=a[0];return(0,s.jsxs)(g.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/95 backdrop-blur-xl border border-slate-200/80 rounded-2xl shadow-2xl px-4 py-3",children:[(0,s.jsx)("p",{className:"text-[10px] font-bold text-[#64748B] uppercase tracking-wider mb-1",children:e.payload.date}),(0,s.jsxs)("p",{className:"text-xl font-black bg-gradient-to-br from-[#1E40AF] to-[#3B82F6] bg-clip-text text-transparent",children:["$",null===(r=e.value)||void 0===r?void 0:r.toLocaleString()]})]})}return null}function j(e){let{data:t=[]}=e,[a,j]=(0,b.useState)(!1),[N,w]=(0,b.useState)("30d");(0,b.useEffect)(()=>{j(!0)},[]);let y=(0,b.useMemo)(()=>{if(t.length<2)return{total:0,change:0,trend:"up"};let e=t.reduce((e,t)=>e+t.revenue,0),a=t.slice(0,Math.floor(t.length/2)),s=t.slice(Math.floor(t.length/2)),r=a.reduce((e,t)=>e+t.revenue,0)/a.length,l=(s.reduce((e,t)=>e+t.revenue,0)/s.length-r)/r*100;return{total:e,change:Math.abs(l),trend:l>=0?"up":"down"}},[t]);return a?(0,s.jsxs)(r.c,{colSpan:2,rowSpan:2,className:"flex flex-col justify-between group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-20",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-br from-[#EFF6FF] to-[#DBEAFE] border border-[#3B82F6]/20",children:(0,s.jsx)(m.Z,{size:14,className:"text-[#1E40AF]",strokeWidth:2.5})}),(0,s.jsx)("h3",{className:"text-[#0F172A] font-black text-lg tracking-tight uppercase",children:"Ingresos"}),t.length>0&&(0,s.jsxs)(g.E.div,{initial:{scale:0},animate:{scale:1},className:(0,f.cn)("flex items-center gap-1 px-2 py-0.5 rounded-full text-[9px] font-extrabold border","up"===y.trend?"bg-emerald-500/10 text-emerald-700 border-emerald-500/30":"bg-rose-500/10 text-rose-700 border-rose-500/30"),children:["up"===y.trend?(0,s.jsx)(u.Z,{size:10,strokeWidth:3}):(0,s.jsx)(h.Z,{size:10,strokeWidth:3}),y.change.toFixed(1),"%"]})]}),(0,s.jsx)("p",{className:"text-[#64748B] text-[10px] font-medium pl-7",children:t.length>0?"Total: $".concat(y.total.toLocaleString()):"Rendimiento de los \xfaltimos d\xedas"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 bg-white/80 border border-[#E2E8F0] rounded-xl p-1 backdrop-blur-sm",children:[(0,s.jsx)(p.Z,{size:12,className:"text-[#64748B] ml-1.5"}),["7d","30d","90d"].map(e=>(0,s.jsx)("button",{onClick:()=>w(e),className:(0,f.cn)("px-2.5 py-1 text-[10px] font-bold rounded-lg transition-all duration-300",N===e?"bg-gradient-to-br from-[#1E40AF] to-[#3B82F6] text-white shadow-md":"text-[#64748B] hover:text-[#1E40AF] hover:bg-slate-50"),children:e},e))]})]}),(0,s.jsx)("div",{className:"w-full h-[220px] relative z-10",children:0===t.length?(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center h-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:(0,s.jsx)(m.Z,{size:32,className:"text-slate-300"})}),(0,s.jsx)("p",{className:"text-[#94A3B8] text-xs font-medium",children:"No hay datos de ingresos suficientes"})]}):(0,s.jsx)(l.h,{width:"100%",height:"100%",children:(0,s.jsxs)(i.T,{data:t,margin:{top:10,right:0,left:-20,bottom:0},children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.35}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.02})]}),(0,s.jsxs)("filter",{id:"glow",children:[(0,s.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,s.jsxs)("feMerge",{children:[(0,s.jsx)("feMergeNode",{in:"coloredBlur"}),(0,s.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,s.jsx)(o.q,{strokeDasharray:"3 3",stroke:"rgba(15,23,42,0.06)",vertical:!1}),(0,s.jsx)(n.K,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748B",fontSize:10,fontWeight:600},dy:10}),(0,s.jsx)(d.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748B",fontSize:10,fontWeight:600},tickFormatter:e=>"$".concat(e),dx:-5}),(0,s.jsx)(c.u,{content:(0,s.jsx)(v,{})}),(0,s.jsx)(x.uN,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)",activeDot:{r:6,strokeWidth:3,stroke:"#fff",fill:"#F59E0B",filter:"url(#glow)"}})]})})})]}):(0,s.jsx)(r.c,{colSpan:2,rowSpan:2,className:"flex flex-col justify-between group bg-white/70 animate-pulse",children:(0,s.jsx)("div",{className:"h-full w-full"})})}},91343:function(e,t,a){"use strict";a.d(t,{StatsWidget:function(){return b}});var s=a(57437),r=a(80652),l=a(70525),i=a(3085),o=a(95252),n=a(42449),d=a(95805),c=a(88226),x=a(44794),m=a(93448),u=a(48279),h=a(2265);function p(e){let{title:t,value:a,trend:r,trendUp:o,icon:n,delay:d=0,loading:c,color:x="blue"}=e,[p,b]=(0,h.useState)(a);(0,h.useEffect)(()=>{b(a)},[a]);let g={blue:{icon:"from-[#3B82F6] to-[#1E40AF]",iconBg:"bg-gradient-to-br from-[#EFF6FF] to-[#DBEAFE]",iconShadow:"shadow-[0_8px_16px_rgba(59,130,246,0.25)]",iconHover:"group-hover:shadow-[0_12px_24px_rgba(59,130,246,0.35)]",glow:"group-hover:shadow-[0_0_40px_rgba(59,130,246,0.15)]",border:"group-hover:border-[#3B82F6]/30"},purple:{icon:"from-[#A855F7] to-[#7C3AED]",iconBg:"bg-gradient-to-br from-[#FAF5FF] to-[#F3E8FF]",iconShadow:"shadow-[0_8px_16px_rgba(168,85,247,0.25)]",iconHover:"group-hover:shadow-[0_12px_24px_rgba(168,85,247,0.35)]",glow:"group-hover:shadow-[0_0_40px_rgba(168,85,247,0.15)]",border:"group-hover:border-[#A855F7]/30"},amber:{icon:"from-[#F59E0B] to-[#D97706]",iconBg:"bg-gradient-to-br from-[#FFFBEB] to-[#FEF3C7]",iconShadow:"shadow-[0_8px_16px_rgba(245,158,11,0.25)]",iconHover:"group-hover:shadow-[0_12px_24px_rgba(245,158,11,0.35)]",glow:"group-hover:shadow-[0_0_40px_rgba(245,158,11,0.15)]",border:"group-hover:border-[#F59E0B]/30"},emerald:{icon:"from-[#10B981] to-[#059669]",iconBg:"bg-gradient-to-br from-[#ECFDF5] to-[#D1FAE5]",iconShadow:"shadow-[0_8px_16px_rgba(16,185,129,0.25)]",iconHover:"group-hover:shadow-[0_12px_24px_rgba(16,185,129,0.35)]",glow:"group-hover:shadow-[0_0_40px_rgba(16,185,129,0.15)]",border:"group-hover:border-[#10B981]/30"}}[x];return(0,s.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:d},className:"flex flex-col h-full justify-between relative group cursor-pointer",children:[(0,s.jsx)("div",{className:(0,m.cn)("absolute -inset-0.5 rounded-2xl opacity-0 blur-xl transition-all duration-500",g.glow)}),(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3 relative",children:[(0,s.jsxs)(u.E.div,{whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},className:(0,m.cn)("p-2.5 rounded-xl border border-white/60 transition-all duration-300 relative overflow-hidden",g.iconBg,g.iconShadow,g.iconHover),children:[(0,s.jsx)("div",{className:(0,m.cn)("absolute inset-0 bg-gradient-to-br opacity-10",g.icon)}),(0,s.jsx)(n,{size:20,strokeWidth:2.5,className:(0,m.cn)("relative z-10 bg-gradient-to-br bg-clip-text text-transparent",g.icon)})]}),!c&&(0,s.jsxs)(u.E.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:d+.2},className:(0,m.cn)("flex items-center text-[10px] font-extrabold px-2.5 py-1 rounded-full border backdrop-blur-md transition-all",o?"text-emerald-700 bg-emerald-500/10 border-emerald-500/30 shadow-[0_0_12px_rgba(16,185,129,0.12)]":"text-rose-700 bg-rose-500/10 border-rose-500/30 shadow-[0_0_12px_rgba(244,63,94,0.12)]"),children:[o?(0,s.jsx)(l.Z,{size:11,className:"mr-1",strokeWidth:3}):(0,s.jsx)(i.Z,{size:11,className:"mr-1",strokeWidth:3}),r]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("h3",{className:"text-[#64748B] text-[10px] font-bold mb-1 tracking-widest uppercase",children:t}),c?(0,s.jsx)("div",{className:"h-9 w-28 bg-slate-200/60 animate-pulse rounded-lg"}):(0,s.jsx)(u.E.p,{initial:{opacity:0},animate:{opacity:1},className:(0,m.cn)("text-3xl font-black tracking-tighter transition-all duration-300","bg-gradient-to-br from-[#0F172A] to-[#1E3A8A] bg-clip-text text-transparent",g.border.replace("border","group-hover:from")),children:p})]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-0 h-[2px] bg-gradient-to-r from-[#1E40AF] via-[#F59E0B] to-[#1E40AF] group-hover:w-full transition-all duration-700"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[#E2E8F0] to-transparent"})]})}function b(e){let{stats:t,mode:a="admin"}=e,l=!t,i=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(e),m=(null==t?void 0:t.totalOrders)?t.totalRevenue/t.totalOrders:0,u={admin:{card1:{title:"Ingresos Totales",value:t?i(t.totalRevenue):"$0",icon:o.Z,color:"emerald"},card2:{title:"Pedidos",value:t?t.totalOrders.toString():"0",icon:n.Z,color:"blue"},card3:{title:"Clientes Activos",value:t?t.activeCustomers.toString():"0",icon:d.Z,color:"purple"},card4:{title:"Ticket Promedio",value:i(m),icon:c.Z,color:"amber"}},reseller:{card1:{title:"Total Comprado",value:t?i(t.totalRevenue):"$0",icon:o.Z,color:"emerald"},card2:{title:"Mis Pedidos",value:t?t.totalOrders.toString():"0",icon:n.Z,color:"blue"},card3:{title:"Pedidos Activos",value:t?t.revenueGrowth.toString():"0",icon:x.Z,color:"purple"},card4:{title:"Gasto Promedio",value:i(m),icon:c.Z,color:"amber"}},user:{card1:{title:"Total Gastado",value:t?i(t.totalRevenue):"$0",icon:o.Z,color:"emerald"},card2:{title:"Mis Compras",value:t?t.totalOrders.toString():"0",icon:n.Z,color:"blue"},card3:{title:"En Proceso",value:t?t.revenueGrowth.toString():"0",icon:x.Z,color:"purple"},card4:{title:"Promedio",value:i(m),icon:c.Z,color:"amber"}}}[a];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.c,{colSpan:1,children:(0,s.jsx)(p,{title:u.card1.title,value:u.card1.value,trend:t?"".concat(t.revenueGrowth,"%"):"0%",trendUp:!t||t.revenueGrowth>=0,icon:u.card1.icon,delay:.1,loading:l,color:u.card1.color})}),(0,s.jsx)(r.c,{colSpan:1,children:(0,s.jsx)(p,{title:u.card2.title,value:u.card2.value,trend:t?"".concat(t.ordersGrowth,"%"):"0%",trendUp:!t||t.ordersGrowth>=0,icon:u.card2.icon,delay:.2,loading:l,color:u.card2.color})}),(0,s.jsx)(r.c,{colSpan:1,children:(0,s.jsx)(p,{title:u.card3.title,value:u.card3.value,trend:"+0%",trendUp:!0,icon:u.card3.icon,delay:.3,loading:l,color:u.card3.color})}),(0,s.jsx)(r.c,{colSpan:1,children:(0,s.jsx)(p,{title:u.card4.title,value:u.card4.value,trend:"0%",trendUp:!0,icon:u.card4.icon,delay:.4,loading:l,color:u.card4.color})})]})}},35694:function(e,t,a){"use strict";a.d(t,{TopProductsWidget:function(){return m}});var s=a(57437),r=a(80652),l=a(33145),i=a(48279),o=a(49474),n=a(66142),d=a(33327),c=a(70525),x=a(93448);function m(e){let{products:t=[]}=e,a=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(e),m=e=>0===e?(0,s.jsx)(o.Z,{size:14,className:"text-[#F59E0B]",strokeWidth:2.5}):1===e?(0,s.jsx)(n.Z,{size:14,className:"text-[#94A3B8]",strokeWidth:2.5}):2===e?(0,s.jsx)(d.Z,{size:14,className:"text-[#92400E]",strokeWidth:2.5}):null,u=e=>0===e?"bg-gradient-to-br from-amber-500/15 to-amber-600/10 border-amber-400/30":1===e?"bg-gradient-to-br from-slate-400/15 to-slate-500/10 border-slate-400/30":2===e?"bg-gradient-to-br from-amber-700/15 to-amber-800/10 border-amber-700/30":"bg-white/40 border-slate-200/50",h=t.length>0?Math.max(...t.map(e=>e.revenue)):1;return(0,s.jsxs)(r.c,{colSpan:1,rowSpan:2,className:"overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4 relative z-20",children:[(0,s.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-[#F59E0B] animate-pulse motion-reduce:animate-none"}),(0,s.jsx)("h3",{className:"text-[#0F172A] font-black text-lg tracking-tight uppercase",children:"Top Productos"}),(0,s.jsx)(c.Z,{size:16,className:"text-[#10B981] ml-auto"})]}),0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:(0,s.jsx)(o.Z,{size:32,className:"text-slate-300"})}),(0,s.jsx)("p",{className:"text-[#94A3B8] text-xs font-medium",children:"No hay ventas registradas"})]}):(0,s.jsx)("div",{className:"space-y-2.5 relative z-10",children:t.map((e,r)=>{var o;let n=e.revenue/h*100;return(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*r},className:(0,x.cn)("relative group cursor-pointer p-2.5 rounded-xl border transition-all duration-300",u(r),"hover:scale-[1.02] hover:shadow-lg"),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-[#3B82F6]/5 to-transparent rounded-xl transition-all duration-500",style:{width:"".concat(n,"%")}}),(0,s.jsxs)("div",{className:"flex items-center gap-2.5 relative z-10",children:[(0,s.jsx)("div",{className:(0,x.cn)("flex items-center justify-center w-6 h-6 rounded-lg font-bold text-xs transition-all duration-300",r<3?"bg-white/80 border border-white/60 shadow-md group-hover:scale-110":"text-[#94A3B8] group-hover:text-[#1E40AF]"),children:r<3?m(r):r+1}),(0,s.jsx)(i.E.div,{whileHover:{scale:1.1,rotate:3},className:"relative w-11 h-11 rounded-lg overflow-hidden bg-white border-2 border-white/80 shadow-md",children:(0,s.jsx)(l.default,{src:e.image||"/placeholder-shoe.png",alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-[#0F172A] truncate group-hover:text-[#1E40AF] transition-colors",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,s.jsxs)("span",{className:"text-[9px] text-[#64748B] font-medium",children:[e.sales," ventas"]}),(0,s.jsx)("div",{className:"w-1 h-1 rounded-full bg-[#E2E8F0]"}),(0,s.jsx)("div",{className:"h-1 flex-1 bg-slate-200/60 rounded-full overflow-hidden max-w-[40px]",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-[#3B82F6] to-[#1E40AF] transition-all duration-500",style:{width:"".concat(e.sales/((null===(o=t[0])||void 0===o?void 0:o.sales)||1)*100,"%")}})})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"text-xs font-black text-[#1E40AF] tracking-tight",children:a(e.revenue)})})]}),r<3&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-amber-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"})]},e.id)})})]})}},2725:function(e,t,a){"use strict";a.d(t,{WelcomeWidget:function(){return v}});var s=a(57437),r=a(9945),l=a(19653),i=a(48279),o=a(80652),n=a(12381),d=a(99397),c=a(16275),x=a(42449),m=a(44794),u=a(64413),h=a(11239),p=a(70525),b=a(82023),g=a(27648),f=a(2265);function v(e){var t;let{role:a="admin"}=e,{profile:v,user:j}=(0,r.t)(),N=new Date().getHours(),w="Buenos d\xedas",y="\uD83C\uDF05";N>=12&&(w="Buenas tardes",y="☀️"),N>=19&&(w="Buenas noches",y="\uD83C\uDF19");let[k,C]=(0,f.useState)(!1),S=(0,l.E)(),{message:z,primaryAction:E,secondaryAction:_}={admin:{message:"Aqu\xed tienes un resumen de la actividad de tu imperio hoy.",primaryAction:{label:"Nuevo Producto",href:"/dashboard?view=products&action=new",icon:d.Z,color:"from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700",shadow:"shadow-amber-500/30"},secondaryAction:{label:"Ver Pedidos",href:"/dashboard?view=orders",icon:c.Z}},reseller:{message:"Gestiona tus pedidos y explora el cat\xe1logo mayorista.",primaryAction:{label:"Nuevo Pedido",href:"/dashboard?view=catalog",icon:x.Z,color:"from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",shadow:"shadow-blue-600/30"},secondaryAction:{label:"Mis Pedidos",href:"/dashboard?view=orders",icon:m.Z}},user:{message:"Explora nuestras novedades y encuentra lo que buscas.",primaryAction:{label:"Ir a la Tienda",href:"/catalog",icon:u.Z,color:"from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800",shadow:"shadow-emerald-600/30"},secondaryAction:{label:"Mis Compras",href:"/dashboard?view=orders",icon:c.Z}}}[a];(0,f.useEffect)(()=>{C(!0),S.start({scale:[1,1.02,1],transition:{duration:4,repeat:1/0,ease:"easeInOut"}})},[S]);let A=(null==v?void 0:v.full_name)||(null==j?void 0:null===(t=j.email)||void 0===t?void 0:t.split("@")[0])||"Usuario",Z=Array.from({length:8},(e,t)=>({id:t,delay:.2*t,duration:3+2*Math.random(),x:100*Math.random(),y:100*Math.random()}));return k?(0,s.jsxs)(o.c,{colSpan:2,className:"relative overflow-hidden group border-slate-200/60",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-slate-50 to-blue-50/30 z-0"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-amber-500/10 to-transparent rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-to-tr from-blue-500/10 to-transparent rounded-full blur-3xl"}),Z.map(e=>(0,s.jsx)(i.E.div,{className:"absolute w-1 h-1 bg-blue-400/20 rounded-full",initial:{opacity:0,x:"".concat(e.x,"%"),y:"".concat(e.y,"%")},animate:{opacity:[0,.6,0],y:["".concat(e.y,"%"),"".concat(e.y-20,"%")],scale:[0,1.5,0]},transition:{duration:e.duration,delay:e.delay,repeat:1/0,ease:"easeInOut"}},e.id)),(0,s.jsx)(i.E.div,{className:"absolute inset-0 bg-gradient-to-b from-transparent via-slate-200/20 to-transparent",initial:{y:"-100%"},animate:{y:"200%"},transition:{duration:4,repeat:1/0,ease:"linear",repeatDelay:3}}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col justify-between h-full",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 mb-6 rounded-full bg-emerald-50 border border-emerald-200 shadow-sm",children:[(0,s.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,s.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-600 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-600"})]}),(0,s.jsxs)("span",{className:"text-[10px] font-extrabold tracking-widest text-emerald-700 uppercase flex items-center gap-1.5",children:[(0,s.jsx)(h.Z,{size:11,className:"text-emerald-600"}),"Sistema Operativo"]})]}),(0,s.jsxs)(i.E.h2,{className:"text-4xl md:text-5xl font-black text-slate-900 mb-2 tracking-tighter leading-tight",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[w,", ",(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"relative inline-block",children:[(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700",children:A}),(0,s.jsx)(i.E.span,{className:"absolute -right-8 top-0 text-2xl",animate:{rotate:[0,14,-8,14,0],scale:[1,1.2,1.1,1.2,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:y})]})]}),(0,s.jsx)(i.E.p,{className:"text-slate-600 font-medium max-w-md text-base mt-4 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:z}),"admin"===a&&(0,s.jsxs)(i.E.div,{className:"flex gap-3 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-emerald-50 border border-emerald-200 shadow-sm",children:[(0,s.jsx)(p.Z,{size:14,className:"text-emerald-600",strokeWidth:2.5}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[9px] text-emerald-600 font-medium uppercase tracking-wider",children:"Hoy"}),(0,s.jsx)("p",{className:"text-sm font-black text-emerald-900",children:"+24.5%"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-50 border border-amber-200 shadow-sm",children:[(0,s.jsx)(b.Z,{size:14,className:"text-amber-600",strokeWidth:2.5}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[9px] text-amber-600 font-medium uppercase tracking-wider",children:"Racha"}),(0,s.jsx)("p",{className:"text-sm font-black text-amber-900",children:"7 d\xedas"})]})]})]})]})}),(0,s.jsxs)(i.E.div,{className:"flex gap-3 flex-wrap",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:[(0,s.jsx)(n.z,{asChild:!0,className:"bg-gradient-to-r ".concat(E.color," text-white font-black rounded-xl px-6 h-12 shadow-lg ").concat(E.shadow," hover:shadow-xl transition-all duration-300"),children:(0,s.jsxs)(g.default,{href:E.href,children:[(0,s.jsx)(E.icon,{size:20,className:"mr-2",strokeWidth:3}),E.label]})}),(0,s.jsx)(n.z,{asChild:!0,variant:"outline",className:"h-12 px-6 rounded-xl border-2 border-slate-300 hover:bg-slate-100 text-slate-700 hover:text-slate-900 hover:border-slate-400 transition-all font-bold shadow-sm hover:shadow-md",children:(0,s.jsxs)(g.default,{href:_.href,children:[(0,s.jsx)(_.icon,{size:20,className:"mr-2",strokeWidth:2.5}),_.label]})})]})]}),(0,s.jsx)(i.E.div,{className:"absolute right-[-30px] bottom-[-50px] opacity-[0.04] pointer-events-none",animate:{rotate:[12,6,12],scale:[1,1.05,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},children:(0,s.jsx)(c.Z,{size:320,strokeWidth:1.5,className:"text-slate-400"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-50/50 via-transparent to-transparent opacity-40 pointer-events-none"})]}):(0,s.jsx)(o.c,{colSpan:2,className:"relative overflow-hidden group bg-white/70 animate-pulse",children:(0,s.jsx)("div",{className:"h-full w-full"})})}},79820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return n}});var s=a(57437),r=a(2265),l=a(93448);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border border-white/10 bg-surface text-content-body shadow-sm backdrop-blur-sm",a),...r})});i.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight text-content-heading",a),...r})});n.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-content-muted",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},74291:function(e,t,a){"use strict";a.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return n},cN:function(){return u},cZ:function(){return x},fK:function(){return m}});var s=a(57437),r=a(2265),l=a(70001),i=a(32489),o=a(93448);let n=l.fC;l.xz;let d=l.h_;l.x8;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-stone-950/20 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=l.aV.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",a),...n,children:[r,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=l.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=l.dk.displayName},32060:function(e,t,a){"use strict";a.d(t,{$F:function(){return x},AW:function(){return m},Ju:function(){return h},VD:function(){return p},Xi:function(){return u},h_:function(){return c}});var s=a(57437),r=a(2265),l=a(12465),i=a(10407),o=a(30401),n=a(40519),d=a(93448);let c=l.fC,x=l.xz;l.ZA,l.Uv,l.Tr,l.Ee,r.forwardRef((e,t)=>{let{className:a,inset:r,children:o,...n}=e;return(0,s.jsxs)(l.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...n,children:[o,(0,s.jsx)(i.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=l.fF.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=l.tu.displayName;let m=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,s.jsx)(l.Uv,{children:(0,s.jsx)(l.VY,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});m.displayName=l.VY.displayName;let u=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(l.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...i})});u.displayName=l.ck.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:i,...n}=e;return(0,s.jsxs)(l.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),r]})}).displayName=l.oC.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(l.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(n.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.Rk.displayName;let h=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(l.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...i})});h.displayName=l.__.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});p.displayName=l.Z0.displayName},75060:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var s=a(57437),r=a(2265),l=a(370),i=a(90535),o=a(93448);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,o.cn)(n(),a),...r})});d.displayName=l.f.displayName},23675:function(e,t,a){"use strict";a.d(t,{g:function(){return i}});var s=a(57437),r=a(2265),l=a(93448);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});i.displayName="Textarea"},84603:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return n},a:function(){return d}});var s=a(57437),r=a(2265),l=a(99376),i=a(69649);let o=(0,r.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),x=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("eter_user");e&&n(JSON.parse(e)),c(!1)},[]);let m=async(e,t)=>{let a={id:"admin"===t?"admin-1":"user-1",email:e,name:t.charAt(0).toUpperCase()+t.slice(1)+" User",role:t,avatar_url:"https://ui-avatars.com/api/?name=".concat(t,"&background=random")};try{await (0,i.h)()}catch(e){console.error("Bypass login failed:",e)}localStorage.setItem("eter_user",JSON.stringify(a)),n(a);let s=new URLSearchParams;"admin"===t?s.set("view","admin"):"reseller"===t?s.set("view","reseller"):"support"===t&&s.set("view","support");let r=s.toString();x.push(r?"/dashboard?".concat(r):"/dashboard"),x.refresh()},u=async()=>{try{await (0,i.C)()}catch(e){}localStorage.removeItem("eter_user"),document.cookie="eter_dev_session=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",document.cookie="eter_dev_mode=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",n(null),x.push("/login"),x.refresh()};return(0,s.jsx)(o.Provider,{value:{user:a,login:m,setRealUser:e=>{localStorage.setItem("eter_user",JSON.stringify(e)),n(e);let t=new URLSearchParams;"admin"===e.role?t.set("view","admin"):"reseller"===e.role?t.set("view","reseller"):"support"===e.role&&t.set("view","support");let a=t.toString();x.push(a?"/dashboard?".concat(a):"/dashboard"),x.refresh()},logout:u,loading:d},children:t})}function d(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9945:function(e,t,a){"use strict";a.d(t,{t:function(){return i}});var s=a(3011),r=a(65346),l=a(69649);let i=(0,s.U)(e=>({user:null,profile:null,isLoading:!0,checkSession:async()=>{e({isLoading:!0});let t=(0,r.e)(),a=(e,t)=>{if(t&&"feitopepe510@gmail.com"===t.toLowerCase())return"admin";if(!e)return"user";let a=e.toLowerCase();return"admin"===a?"admin":"support"===a?"support":"reseller"===a?"reseller":"user"};try{let{data:{user:s},error:r}=await t.auth.getUser();if(r||!s){e({user:null,profile:null,isLoading:!1});return}let{data:l,error:i}=await t.from("profiles").select("id, full_name, role, is_premium, points, streak_days, avatar_url").eq("id",s.id).single();if(i||!l){let t=a(void 0,s.email),r={id:s.id,full_name:s.email||"Usuario",email:s.email||"",role:t,is_premium:!1,points:0,streak_days:0};e({user:s,profile:r,isLoading:!1});return}e({user:s,profile:{...l,email:s.email||"",role:a(l.role,s.email)},isLoading:!1})}catch(t){console.error("Auth check error:",t),e({user:null,profile:null,isLoading:!1})}},signOut:async()=>{let t=(0,r.e)();await t.auth.signOut();try{await (0,l.C)()}catch(e){}e({user:null,profile:null}),window.location.href="/login"}}))},65346:function(e,t,a){"use strict";a.d(t,{e:function(){return r}});var s=a(11259);function r(){return(0,s.createBrowserClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o")}}},function(e){e.O(0,[1425,6137,4438,8279,2972,5878,4077,1259,1855,41,1977,1,9762,7126,6231,9360,2971,2117,1744],function(){return e(e.s=17054)}),_N_E=e.O()}]);