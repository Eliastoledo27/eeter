(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{70617:function(e,t,r){Promise.resolve().then(r.bind(r,90195))},68755:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(2265);let o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},c=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:f,...p}=e;return(0,n.createElement)("svg",{ref:t,...s,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:o("lucide",c),...!d&&!u(p)&&{"aria-hidden":"true"},...p},[...f.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{let{className:s,...u}=r;return(0,n.createElement)(c,{ref:i,iconNode:t,className:o("lucide-".concat(a(l(e))),"lucide-".concat(e),s),...u})});return r.displayName=l(e),r}},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return o.a}});var n=r(72972),o=r.n(n)},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},12119:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return o}});let n=r(83079);function o(e){let{createServerReference:t}=r(6671);return t(e,n.callServer)}},90195:function(e,t,r){"use strict";r.d(t,{default:function(){return h}});var n=r(57437),o=r(2265),a=r(27648),i=r(84603),l=r(48279),s=r(51817);let u=(0,r(68755).Z)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var c=r(14438),d=r(40279),f=r(12381),p=r(75060),m=r(65346);function h(e){let{isModal:t=!1,onRegisterClick:r}=e,[h,v]=(0,o.useState)(""),[b,y]=(0,o.useState)(""),[g,x]=(0,o.useState)(!1),{setRealUser:w}=(0,i.a)(),j=(0,m.e)(),N=async e=>{e.preventDefault(),x(!0);try{let{data:e,error:r}=await j.auth.signInWithPassword({email:h,password:b});if(r){console.error("Supabase auth error:",r),c.A.error(r.message||"Credenciales inv\xe1lidas"),x(!1);return}if(e.user){var t;let{data:r}=await j.from("profiles").select("role, full_name, avatar_url").eq("id",e.user.id).single(),n=(null==r?void 0:null===(t=r.role)||void 0===t?void 0:t.toLowerCase())||"user",o={id:e.user.id,email:e.user.email||"",name:(null==r?void 0:r.full_name)||"Usuario",role:n,avatar_url:null==r?void 0:r.avatar_url};w(o),c.A.success("Bienvenido de nuevo")}}catch(e){console.error("Unexpected error during login:",e),c.A.error("Ocurri\xf3 un error inesperado")}finally{x(!1)}};return(0,n.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:t?"w-full":"glass p-8 rounded-3xl border border-stone-200/70 bg-white/70 backdrop-blur-xl w-full max-w-md mx-auto shadow-[0_30px_80px_rgba(12,10,9,0.12)]",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2 text-[#0C0A09]",children:"\xc9ter Store"}),(0,n.jsx)("p",{className:"text-stone-500 text-sm",children:"Ingresa a tu panel de control"})]}),(0,n.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(p._,{htmlFor:"email",className:"text-xs text-stone-500 uppercase ml-1",children:"Email"}),(0,n.jsx)(d.I,{id:"email",type:"email",value:h,onChange:e=>v(e.target.value),className:"bg-white/80 border-stone-200 text-[#0C0A09] placeholder:text-stone-400 focus-visible:ring-[#CA8A04]/40",placeholder:"usuario@tuemail.com",required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(p._,{htmlFor:"password",className:"text-xs text-stone-500 uppercase ml-1",children:"Contrase\xf1a"}),(0,n.jsx)(d.I,{id:"password",type:"password",value:b,onChange:e=>y(e.target.value),className:"bg-white/80 border-stone-200 text-[#0C0A09] placeholder:text-stone-400 focus-visible:ring-[#CA8A04]/40",placeholder:"••••••••",required:!0})]}),(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(f.z,{type:"submit",disabled:g,className:"w-full bg-[#1C1917] text-white hover:bg-[#0C0A09] transition-colors font-bold",children:g?(0,n.jsx)(s.Z,{className:"w-5 h-5 animate-spin"}):(0,n.jsxs)(n.Fragment,{children:["Ingresar ",(0,n.jsx)(u,{className:"ml-2 w-4 h-4"})]})})})]}),(0,n.jsxs)("div",{className:"mt-6 text-center text-sm text-stone-500",children:["\xbfNo tienes cuenta?"," ",r?(0,n.jsx)("button",{type:"button",onClick:r,className:"text-[#0C0A09] hover:text-[#CA8A04] transition-colors font-bold",children:"Reg\xedstrate"}):(0,n.jsx)(a.default,{href:"/register",className:"text-[#0C0A09] hover:text-[#CA8A04] transition-colors",children:"Reg\xedstrate"})]})]})}},69649:function(e,t,r){"use strict";r.d(t,{C:function(){return o},h:function(){return a}}),r(83079);var n=r(12119),o=(0,n.$)("79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2"),a=(0,n.$)("b9fdf25a15fb84304180adce81eea9b6b985602a")},12381:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(57437),o=r(2265),a=r(37053),i=r(90535),l=r(93448);let s=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white hover:bg-white/20"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,t)=>{let{className:r,variant:o,size:i,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,l.cn)(s({variant:o,size:i,className:r})),ref:t,...c})});u.displayName="Button"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(57437),o=r(2265),a=r(93448);let i=o.forwardRef((e,t)=>{let{className:r,type:o,...i}=e;return(0,n.jsx)("input",{type:o,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},75060:function(e,t,r){"use strict";r.d(t,{_:function(){return u}});var n=r(57437),o=r(2265),a=r(370),i=r(90535),l=r(93448);let s=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,l.cn)(s(),r),...o})});u.displayName=a.f.displayName},84603:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return s},a:function(){return u}});var n=r(57437),o=r(2265),a=r(99376),i=r(69649);let l=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[u,c]=(0,o.useState)(!0),d=(0,a.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("eter_user");e&&s(JSON.parse(e)),c(!1)},[]);let f=async(e,t)=>{let r={id:"admin"===t?"admin-1":"user-1",email:e,name:t.charAt(0).toUpperCase()+t.slice(1)+" User",role:t,avatar_url:"https://ui-avatars.com/api/?name=".concat(t,"&background=random")};try{await (0,i.h)()}catch(e){console.error("Bypass login failed:",e)}localStorage.setItem("eter_user",JSON.stringify(r)),s(r);let n=new URLSearchParams;"admin"===t?n.set("view","admin"):"reseller"===t?n.set("view","reseller"):"support"===t&&n.set("view","support");let o=n.toString();d.push(o?"/dashboard?".concat(o):"/dashboard"),d.refresh()},p=async()=>{try{await (0,i.C)()}catch(e){}localStorage.removeItem("eter_user"),document.cookie="eter_dev_session=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",document.cookie="eter_dev_mode=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",s(null),d.push("/login"),d.refresh()};return(0,n.jsx)(l.Provider,{value:{user:r,login:f,setRealUser:e=>{localStorage.setItem("eter_user",JSON.stringify(e)),s(e);let t=new URLSearchParams;"admin"===e.role?t.set("view","admin"):"reseller"===e.role?t.set("view","reseller"):"support"===e.role&&t.set("view","support");let r=t.toString();d.push(r?"/dashboard?".concat(r):"/dashboard"),d.refresh()},logout:p,loading:u},children:t})}function u(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(61994),o=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},65346:function(e,t,r){"use strict";r.d(t,{e:function(){return o}});var n=r(11259);function o(){return(0,n.createBrowserClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o")}},98575:function(e,t,r){"use strict";r.d(t,{F:function(){return a},e:function(){return i}});var n=r(2265);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,n=e.map(e=>{let n=o(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():o(e[t],null)}}}}function i(...e){return n.useCallback(a(...e),e)}},370:function(e,t,r){"use strict";r.d(t,{f:function(){return s}});var n=r(2265);r(54887);var o=r(37053),a=r(57437),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,o.Z8)(`Primitive.${t}`),i=n.forwardRef((e,n)=>{let{asChild:o,...i}=e,l=o?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...i,ref:n})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),l=n.forwardRef((e,t)=>(0,a.jsx)(i.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var s=l},37053:function(e,t,r){"use strict";r.d(t,{Z8:function(){return c},g7:function(){return d}});var n,o=r(2265),a=r(98575),i=r(57437),l=Symbol.for("react.lazy"),s=(n||(n=r.t(o,2)))[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=o.forwardRef((e,t)=>{let{children:r,...n}=e;if(u(r)&&"function"==typeof s&&(r=s(r._payload)),o.isValidElement(r)){var i;let e,l;let s=(i=r,(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.props.ref:i.props.ref||i.ref),u=function(e,t){let r={...t};for(let n in t){let o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...e)=>{let t=a(...e);return o(...e),t}:o&&(r[n]=o):"style"===n?r[n]={...o,...a}:"className"===n&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==o.Fragment&&(u.ref=t?(0,a.F)(t,s):s),o.cloneElement(r,u)}return o.Children.count(r)>1?o.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=o.forwardRef((e,r)=>{let{children:n,...a}=e;u(n)&&"function"==typeof s&&(n=s(n._payload));let l=o.Children.toArray(n),c=l.find(p);if(c){let e=c.props.children,n=l.map(t=>t!==c?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...a,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,n):null})}return(0,i.jsx)(t,{...a,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var d=c("Slot"),f=Symbol("radix.slottable");function p(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},90535:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=r(61994);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=n.W,i=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,s=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==l?void 0:l[e];if(null===t)return null;let a=o(t)||o(n);return i[e][a]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return a(e,s,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...u}[t]):({...l,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},5853:function(e,t,r){"use strict";r.d(t,{_T:function(){return o},ev:function(){return i},mG:function(){return a},pi:function(){return n}});var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function a(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{s(n.next(e))}catch(e){a(e)}}function l(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,l)}s((n=n.apply(e,t||[])).next())})}function i(e,t,r){if(r||2==arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError}},function(e){e.O(0,[6137,4438,8279,2972,1259,2971,2117,1744],function(){return e(e.s=70617)}),_N_E=e.O()}]);