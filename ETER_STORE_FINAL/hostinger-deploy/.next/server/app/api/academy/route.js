"use strict";(()=>{var e={};e.id=983,e.ids=[983],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},37690:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>u});var i={};r.r(i),r.d(i,{GET:()=>d});var a=r(49303),s=r(88716),o=r(60670),n=r(56751),p=r(87070);async function d(e){let{searchParams:t}=new URL(e.url),r=t.get("type"),i="true"===t.get("vip"),a=t.get("q")||"",s=(0,n.e)(),{data:{user:o}}=await s.auth.getUser();if(!o)return p.NextResponse.json({error:"Unauthorized"},{status:401});let{data:d}=await s.from("profiles").select("is_premium").eq("id",o.id).single(),l=d?.is_premium||!1,c=s.from("academy_content").select("id, title, type, url, description, is_vip").order("title",{ascending:!0});r&&"all"!==r&&(c=c.eq("type",r)),i&&(c=c.eq("is_vip",!0)),a&&(c=c.ilike("title",`%${a}%`));let{data:u,error:m}=await c;if(m||!u)return console.warn("API Academy: DB Error, returning MOCK data",m),p.NextResponse.json({items:[{id:"mock-1",title:"Fundamentos de \xc9ter (Demo)",type:"video",url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",description:"Curso introductorio simulado para desarrollo.",is_vip:!1},{id:"mock-2",title:"Gu\xeda de Ventas PDF (Demo)",type:"pdf",url:"https://example.com/guide.pdf",description:"Material de lectura simulado.",is_vip:!0}],isPremium:l});i||u?.some(e=>e.is_vip);let x=u?.map(e=>e.is_vip&&!l?{...e,url:null}:e);return p.NextResponse.json({items:x,isPremium:l})}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/academy/route",pathname:"/api/academy",filename:"route",bundlePath:"app/api/academy/route"},resolvedPagePath:"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\api\\academy\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:u,serverHooks:m}=l,x="/api/academy/route";function g(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:u})}},56751:(e,t,r)=>{r.d(t,{e:()=>s});var i=r(72728),a=r(71615);function s(){let e=(0,a.cookies)();return(0,i.createServerClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:i})=>e.set(t,r,i))}catch{}}}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,637,972],()=>r(37690));module.exports=i})();