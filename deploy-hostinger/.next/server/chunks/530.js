exports.id=530,exports.ids=[530],exports.modules={4252:(e,r,a)=>{Promise.resolve().then(a.bind(a,41512))},35303:()=>{},26092:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});let s=(0,a(25578).Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},41512:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var s=a(10326);a(17577);var t=a(50949),l=a(91468),i=a(24258);function n({error:e,reset:r}){return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)(i.W,{className:"p-8 max-w-md w-full text-center border-red-500/20 bg-red-500/5",children:[s.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500",children:s.jsx(t.Z,{size:32})}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Algo sali\xf3 mal"}),(0,s.jsxs)("p",{className:"text-slate-400 text-sm mb-6",children:["No pudimos cargar el panel correctamente. Error: ",e.message]}),(0,s.jsxs)("button",{onClick:()=>r(),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-bold transition-all flex items-center gap-2 mx-auto",children:[s.jsx(l.Z,{size:18})," Reintentar"]})]})})}},58269:(e,r,a)=>{"use strict";a.d(r,{A9:()=>t,Px:()=>l}),a(15424);var s=a(46242);(0,s.$)("0de1aa3ed13a01031d13c75725707c8e3d1371b2"),(0,s.$)("0caaf2772a0e64695c49e8e86fc10813cc7f5681");var t=(0,s.$)("b14c462104f8c3657d1b43d696f9b15ce1cc49f6");(0,s.$)("402efe60e8d81cc7452c2e1d85a7551831a98b6d");var l=(0,s.$)("d80deeeb025a64ae47304816810f7fe2c2ef7dcb");(0,s.$)("e7382504c848abbb6f66f361ae2547249774d2e0"),(0,s.$)("4bde44252ce3eec499e9fcfa450646c34b167f5c")},24258:(e,r,a)=>{"use strict";a.d(r,{C:()=>i,W:()=>l});var s=a(10326),t=a(51223);let l=({children:e,className:r})=>s.jsx("div",{className:(0,t.cn)("bg-slate-900/40 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden",r),children:e}),i=({children:e,variant:r="default",className:a})=>s.jsx("span",{className:(0,t.cn)("px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all duration-300 hover:scale-105 cursor-default",{default:"bg-slate-800 text-slate-300",gold:"bg-amber-500/20 text-amber-500 border border-amber-500/30 shadow-[0_0_10px_rgba(245,158,11,0.2)]",blue:"bg-sky-500/20 text-sky-500 border border-sky-500/30 shadow-[0_0_10px_rgba(14,165,233,0.2)]",orange:"bg-orange-500/20 text-orange-500 border border-orange-500/30 shadow-[0_0_10px_rgba(249,115,22,0.2)]"}[r],a),children:e})},5697:(e,r,a)=>{"use strict";a.d(r,{ProfilesManager:()=>k});var s=a(10326),t=a(17577),l=a(58269),i=a(46226),n=a(91664),o=a(38443),d=a(51223);let c=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:a,className:(0,d.cn)("w-full caption-bottom text-sm",e),...r})}));c.displayName="Table";let u=t.forwardRef(({className:e,...r},a)=>s.jsx("thead",{ref:a,className:(0,d.cn)("[&_tr]:border-b",e),...r}));u.displayName="TableHeader";let m=t.forwardRef(({className:e,...r},a)=>s.jsx("tbody",{ref:a,className:(0,d.cn)("[&_tr:last-child]:border-0",e),...r}));m.displayName="TableBody",t.forwardRef(({className:e,...r},a)=>s.jsx("tfoot",{ref:a,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let x=t.forwardRef(({className:e,...r},a)=>s.jsx("tr",{ref:a,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));x.displayName="TableRow";let h=t.forwardRef(({className:e,...r},a)=>s.jsx("th",{ref:a,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));h.displayName="TableHead";let f=t.forwardRef(({className:e,...r},a)=>s.jsx("td",{ref:a,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));f.displayName="TableCell",t.forwardRef(({className:e,...r},a)=>s.jsx("caption",{ref:a,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption";var p=a(29280),b=a(41190),g=a(26092);let w=(0,a(25578).Z)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);var j=a(22915),v=a(79635),N=a(88307),y=a(32933),_=a(94019),z=a(85999);let S={admin:g.Z,support:w,reseller:j.Z,user:v.Z},P={admin:"bg-error/10 text-error border-error/20",support:"bg-warning/10 text-warning border-warning/20",reseller:"bg-primary/10 text-primary border-primary/20",user:"bg-content-muted/10 text-content-muted border-content-muted/20"},R={admin:"Admin",support:"Soporte",reseller:"Revendedor",user:"Usuario"};function k(){let[e,r]=(0,t.useState)([]),[a,d]=(0,t.useState)(!0),[g,w]=(0,t.useState)(""),[j,v]=(0,t.useState)("all"),[k,E]=(0,t.useState)(null),[C,A]=(0,t.useState)("user"),Z=async()=>{d(!0);let{data:e,error:a}=await (0,l.A9)();a?z.A.error(a):e&&r(e),d(!1)},U=async(e,r)=>{let{success:a,error:s}=await (0,l.Px)(e,{role:r});a?(z.A.success("Rol actualizado correctamente"),E(null),Z()):z.A.error(s||"Error al actualizar rol")},B=e.filter(e=>{let r=e.full_name?.toLowerCase().includes(g.toLowerCase())||e.email?.toLowerCase().includes(g.toLowerCase())||e.whatsapp_number?.includes(g),a="all"===j||e.role===j;return r&&a}),$={admin:e.filter(e=>"admin"===e.role).length,support:e.filter(e=>"support"===e.role).length,reseller:e.filter(e=>"reseller"===e.role).length,user:e.filter(e=>"user"===e.role).length};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-content-heading",children:"Gesti\xf3n de Perfiles"}),s.jsx("p",{className:"text-content-muted mt-1",children:"Administra usuarios, roles y permisos"})]}),s.jsx(n.z,{onClick:Z,variant:"outline",children:"Actualizar"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.keys(R).map(e=>{let r=S[e];return s.jsx("div",{className:"border border-border rounded-lg p-4 bg-surface hover:shadow-md transition-shadow",children:s.jsx("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${P[e]}`,children:s.jsx(r,{size:20})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-content-muted",children:R[e]}),s.jsx("p",{className:"text-2xl font-bold text-content-heading",children:$[e]})]})]})})},e)})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[s.jsx(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-content-muted h-4 w-4"}),s.jsx(b.I,{placeholder:"Buscar por nombre, email o tel\xe9fono...",value:g,onChange:e=>w(e.target.value),className:"pl-10"})]}),(0,s.jsxs)(p.Ph,{value:j,onValueChange:e=>v(e),children:[s.jsx(p.i4,{className:"w-full md:w-[200px]",children:s.jsx(p.ki,{placeholder:"Filtrar por rol"})}),(0,s.jsxs)(p.Bw,{children:[s.jsx(p.Ql,{value:"all",children:"Todos los roles"}),s.jsx(p.Ql,{value:"admin",children:"Admin"}),s.jsx(p.Ql,{value:"support",children:"Soporte"}),s.jsx(p.Ql,{value:"reseller",children:"Revendedor"}),s.jsx(p.Ql,{value:"user",children:"Usuario"})]})]})]}),s.jsx("div",{className:"border border-border rounded-lg overflow-hidden bg-surface",children:(0,s.jsxs)(c,{children:[s.jsx(u,{children:(0,s.jsxs)(x,{children:[s.jsx(h,{children:"Usuario"}),s.jsx(h,{children:"Email"}),s.jsx(h,{children:"WhatsApp"}),s.jsx(h,{children:"Rol"}),s.jsx(h,{children:"Slug"}),s.jsx(h,{children:"Premium"}),s.jsx(h,{children:"Puntos"}),s.jsx(h,{children:"Acciones"})]})}),s.jsx(m,{children:a?s.jsx(x,{children:s.jsx(f,{colSpan:8,className:"text-center py-8 text-content-muted",children:"Cargando perfiles..."})}):0===B.length?s.jsx(x,{children:s.jsx(f,{colSpan:8,className:"text-center py-8 text-content-muted",children:"No se encontraron perfiles"})}):B.map(e=>{let r=S[e.role],a=k===e.id;return(0,s.jsxs)(x,{children:[s.jsx(f,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.avatar_url?s.jsx(i.default,{src:e.avatar_url,alt:e.full_name||"Avatar",width:32,height:32,className:"w-8 h-8 rounded-full"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-sm",children:e.full_name?.charAt(0)||e.email?.charAt(0)||"U"}),s.jsx("span",{className:"font-medium text-content-heading",children:e.full_name||"Sin nombre"})]})}),s.jsx(f,{className:"text-content-muted",children:e.email}),s.jsx(f,{className:"text-content-muted",children:e.whatsapp_number||"-"}),s.jsx(f,{children:a?(0,s.jsxs)(p.Ph,{value:C,onValueChange:e=>A(e),children:[s.jsx(p.i4,{className:"w-[140px]",children:s.jsx(p.ki,{})}),(0,s.jsxs)(p.Bw,{children:[s.jsx(p.Ql,{value:"user",children:"Usuario"}),s.jsx(p.Ql,{value:"reseller",children:"Revendedor"}),s.jsx(p.Ql,{value:"support",children:"Soporte"}),s.jsx(p.Ql,{value:"admin",children:"Admin"})]})]}):(0,s.jsxs)(o.C,{className:P[e.role],children:[s.jsx(r,{size:14,className:"mr-1"}),R[e.role]]})}),s.jsx(f,{className:"text-content-muted font-mono text-sm",children:e.reseller_slug||"-"}),s.jsx(f,{children:e.is_premium?s.jsx(o.C,{className:"bg-warning/10 text-warning border-warning/20",children:"Premium"}):s.jsx("span",{className:"text-content-muted text-sm",children:"-"})}),s.jsx(f,{className:"text-content-heading font-medium",children:e.points}),s.jsx(f,{children:s.jsx("div",{className:"flex items-center gap-2",children:a?(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.z,{size:"sm",variant:"ghost",onClick:()=>U(e.id,C),className:"h-8 w-8 p-0 text-success hover:bg-success/10",children:s.jsx(y.Z,{size:16})}),s.jsx(n.z,{size:"sm",variant:"ghost",onClick:()=>E(null),className:"h-8 w-8 p-0 text-error hover:bg-error/10",children:s.jsx(_.Z,{size:16})})]}):s.jsx(n.z,{size:"sm",variant:"outline",onClick:()=>{E(e.id),A(e.role)},children:"Editar Rol"})})})]},e.id)})})]})})]})}},38443:(e,r,a)=>{"use strict";a.d(r,{C:()=>n});var s=a(10326);a(17577);var t=a(79360),l=a(51223);let i=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-error text-white hover:bg-error/80",outline:"text-content-body border-white/20",success:"border-transparent bg-success/20 text-success hover:bg-success/30",warning:"border-transparent bg-warning/20 text-warning hover:bg-warning/30",blue:"border-transparent bg-accent-blue/20 text-accent-blue hover:bg-accent-blue/30",purple:"border-transparent bg-accent-purple/20 text-accent-purple hover:bg-accent-purple/30"}},defaultVariants:{variant:"default"}});function n({className:e,variant:r,...a}){return s.jsx("div",{className:(0,l.cn)(i({variant:r}),e),...a})}},29280:(e,r,a)=>{"use strict";a.d(r,{Bw:()=>f,Ph:()=>c,Ql:()=>p,i4:()=>m,ki:()=>u});var s=a(10326),t=a(17577),l=a(22389),i=a(941),n=a(96633),o=a(32933),d=a(51223);let c=l.fC;l.ZA;let u=l.B4,m=t.forwardRef(({className:e,children:r,...a},t)=>(0,s.jsxs)(l.xz,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[r,s.jsx(l.JO,{asChild:!0,children:s.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=l.xz.displayName;let x=t.forwardRef(({className:e,...r},a)=>s.jsx(l.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:s.jsx(n.Z,{className:"h-4 w-4"})}));x.displayName=l.u_.displayName;let h=t.forwardRef(({className:e,...r},a)=>s.jsx(l.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:s.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let f=t.forwardRef(({className:e,children:r,position:a="popper",...t},i)=>s.jsx(l.h_,{children:(0,s.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...t,children:[s.jsx(x,{}),s.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),s.jsx(h,{})]})}));f.displayName=l.VY.displayName,t.forwardRef(({className:e,...r},a)=>s.jsx(l.__,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...r})).displayName=l.__.displayName;let p=t.forwardRef(({className:e,children:r,...a},t)=>(0,s.jsxs)(l.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.wU,{children:s.jsx(o.Z,{className:"h-4 w-4"})})}),s.jsx(l.eT,{children:r})]}));p.displayName=l.ck.displayName,t.forwardRef(({className:e,...r},a)=>s.jsx(l.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=l.Z0.displayName},27310:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Users\Tole\Desktop\Pegada Solo\eter-store\src\app\(protected)\dashboard\error.tsx#default`)},51801:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>l});var s=a(19510),t=a(13657);function l(){return s.jsx("div",{className:"space-y-4",children:(0,s.jsxs)(t.S,{children:[(0,s.jsxs)(t.c,{colSpan:2,className:"h-full min-h-[300px] animate-pulse bg-white/5",children:[s.jsx("div",{className:"h-8 w-32 bg-white/10 rounded-full mb-8"}),s.jsx("div",{className:"h-12 w-64 bg-white/10 rounded-lg mb-4"}),s.jsx("div",{className:"h-6 w-48 bg-white/10 rounded-lg"}),(0,s.jsxs)("div",{className:"flex gap-4 mt-8",children:[s.jsx("div",{className:"h-12 w-32 bg-white/10 rounded-xl"}),s.jsx("div",{className:"h-12 w-32 bg-white/10 rounded-xl"})]})]}),(0,s.jsxs)(t.c,{colSpan:1,className:"animate-pulse bg-white/5",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-xl bg-white/10"}),s.jsx("div",{className:"h-5 w-16 rounded-full bg-white/10"})]}),s.jsx("div",{className:"h-3 w-20 bg-white/10 rounded mb-2"}),s.jsx("div",{className:"h-8 w-32 bg-white/10 rounded"})]}),(0,s.jsxs)(t.c,{colSpan:1,className:"animate-pulse bg-white/5",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-xl bg-white/10"}),s.jsx("div",{className:"h-5 w-16 rounded-full bg-white/10"})]}),s.jsx("div",{className:"h-3 w-20 bg-white/10 rounded mb-2"}),s.jsx("div",{className:"h-8 w-32 bg-white/10 rounded"})]}),(0,s.jsxs)(t.c,{colSpan:1,className:"animate-pulse bg-white/5",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-xl bg-white/10"}),s.jsx("div",{className:"h-5 w-16 rounded-full bg-white/10"})]}),s.jsx("div",{className:"h-3 w-20 bg-white/10 rounded mb-2"}),s.jsx("div",{className:"h-8 w-32 bg-white/10 rounded"})]}),(0,s.jsxs)(t.c,{colSpan:1,className:"animate-pulse bg-white/5",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-xl bg-white/10"}),s.jsx("div",{className:"h-5 w-16 rounded-full bg-white/10"})]}),s.jsx("div",{className:"h-3 w-20 bg-white/10 rounded mb-2"}),s.jsx("div",{className:"h-8 w-32 bg-white/10 rounded"})]}),(0,s.jsxs)(t.c,{colSpan:2,rowSpan:2,className:"animate-pulse bg-white/5 min-h-[400px]",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-6",children:[s.jsx("div",{className:"h-6 w-48 bg-white/10 rounded"}),s.jsx("div",{className:"h-8 w-32 bg-white/10 rounded"})]}),s.jsx("div",{className:"h-64 w-full bg-white/10 rounded-xl mt-8"})]}),(0,s.jsxs)(t.c,{colSpan:1,rowSpan:2,className:"animate-pulse bg-white/5",children:[s.jsx("div",{className:"h-6 w-32 bg-white/10 rounded mb-6"}),s.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[s.jsx("div",{className:"h-8 w-8 rounded bg-white/10"}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 w-24 bg-white/10 rounded"}),s.jsx("div",{className:"h-2 w-16 bg-white/10 rounded"})]})]},e))})]}),(0,s.jsxs)(t.c,{colSpan:2,className:"animate-pulse bg-white/5",children:[s.jsx("div",{className:"flex justify-between mb-4",children:s.jsx("div",{className:"h-6 w-48 bg-white/10 rounded"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-8 w-full bg-white/10 rounded"}),s.jsx("div",{className:"h-8 w-full bg-white/10 rounded"}),s.jsx("div",{className:"h-8 w-full bg-white/10 rounded"})]})]})]})})}},75540:(e,r,a)=>{"use strict";a.r(r),a.d(r,{adminUpdateProfile:()=>h,getAllProfiles:()=>m,getProfile:()=>u,getProfilesByRole:()=>b,getResellerStats:()=>p,updateProfile:()=>x,updateUserRole:()=>f});var s=a(27745);a(26461);var t=a(57070);let l=new Map;async function i(e,r){!function(){let e=Date.now();for(let[r,a]of l.entries())e-a.timestamp>3e5&&l.delete(r)}();let a=l.get(e);if(a&&Date.now()-a.timestamp<3e5)return a.role;let{data:s}=await r.from("user_roles").select("role").eq("user_id",e).single();if(s?.role)return l.set(e,{role:s.role,timestamp:Date.now()}),s.role;let{data:t}=await r.from("profiles").select("role").eq("id",e).single();if(t?.role){let r=t.role;return l.set(e,{role:r,timestamp:Date.now()}),r}return null}async function n(){let e=(0,t.e)(),{data:{user:r},error:a}=await e.auth.getUser();if(a||!r)return{user:null,role:null,isAdmin:!1,isSupport:!1,isReseller:!1,canManageProfiles:!1,error:"No autorizado"};let s=await i(r.id,e);return{user:r,role:s,isAdmin:"admin"===s,isSupport:"support"===s,isReseller:"reseller"===s,canManageProfiles:"admin"===s||"support"===s,error:null}}async function o(){let{user:e,role:r,error:a}=await n();if(a||!e)throw Error("No autorizado");return{user:e,role:r}}async function d(){let{user:e,role:r,canManageProfiles:a,error:s}=await n();if(s||!e||!a)throw Error("Permisos insuficientes - Se requiere rol de administrador o soporte");return{user:e,role:r}}var c=a(30207);async function u(e){try{let{user:r}=await o(),a=(0,t.e)(),s=e||r.id,{data:l,error:i}=await a.from("profiles").select("*").eq("id",s).single();if(i)return console.error("Error fetching profile:",i),{data:null,error:`Error al obtener perfil: ${i.message}`};return{data:l,error:null}}catch(e){return console.error("Error in getProfile:",e),{data:null,error:e instanceof Error?e.message:"No autorizado"}}}async function m(){let e=(0,t.e)(),{data:{user:r}}=await e.auth.getUser();if(!r)return{data:null,error:"No autorizado"};let{data:a}=await e.from("profiles").select("role").eq("id",r.id).single();if(!a||!["admin","support"].includes(a.role))return{data:null,error:"Permisos insuficientes"};let{data:s,error:l}=await e.from("profiles").select("*");return l?(console.error("Error fetching all profiles:",l),{data:null,error:`Error al obtener perfiles: ${l.message}`}):{data:s,error:null}}async function x(e){let r=(0,t.e)(),{data:{user:a},error:s}=await r.auth.getUser();if(s||!a)return{success:!1,error:"No autorizado"};let{error:l}=await r.from("profiles").update(e).eq("id",a.id);return l?(console.error("Error updating profile:",l),{success:!1,error:"Error al actualizar perfil"}):((0,c.revalidatePath)("/dashboard/profile"),(0,c.revalidatePath)("/dashboard/settings"),{success:!0,error:null})}async function h(e,r){try{await d();let a=(0,t.e)(),{error:s}=await a.from("profiles").update(r).eq("id",e);if(s)return console.error("Error updating profile (admin):",s),{success:!1,error:`Error al actualizar perfil: ${s.message}`};return r.role&&l.delete(e),(0,c.revalidatePath)("/dashboard/profiles"),(0,c.revalidatePath)("/dashboard"),(0,c.revalidatePath)("/dashboard/users"),{success:!0,error:null}}catch(e){return console.error("Error in adminUpdateProfile:",e),{success:!1,error:e instanceof Error?e.message:"Permisos insuficientes"}}}async function f(e,r){return h(e,{role:r})}async function p(e){let r=(0,t.e)(),{data:{user:a},error:s}=await r.auth.getUser();if(s||!a)return{data:null,error:"No autorizado"};let l=e||a.id,{data:i,error:n}=await r.from("reseller_orders").select("*").eq("reseller_id",l);if(n)return console.error("Error fetching reseller stats:",n),{data:null,error:"Error al obtener estad\xedsticas"};if(!i||0===i.length)return{data:{total_orders:0,total_revenue:0,total_profit:0,active_customers:0,conversion_rate:0},error:null};let o=i.length,d=i.filter(e=>"completed"===e.status),c=d.reduce((e,r)=>e+(r.sale_price||0),0),u=d.reduce((e,r)=>e+(r.profit||0),0),m=new Set(i.map(e=>e.customer_phone).filter(Boolean)).size,x=o>0?d.length/o*100:0;return{data:{total_orders:o,total_revenue:c,total_profit:u,active_customers:m,conversion_rate:Number(x.toFixed(2))},error:null}}async function b(e){let r=(0,t.e)(),{data:a,error:s}=await r.from("profiles").select("*").eq("role",e).order("full_name",{ascending:!0});return s?(console.error("Error fetching profiles by role:",s),{data:null,error:"Error al obtener perfiles"}):{data:a,error:null}}(0,a(85723).h)([u,m,x,h,f,p,b]),(0,s.j)("0caaf2772a0e64695c49e8e86fc10813cc7f5681",u),(0,s.j)("b14c462104f8c3657d1b43d696f9b15ce1cc49f6",m),(0,s.j)("402efe60e8d81cc7452c2e1d85a7551831a98b6d",x),(0,s.j)("d80deeeb025a64ae47304816810f7fe2c2ef7dcb",h),(0,s.j)("e7382504c848abbb6f66f361ae2547249774d2e0",f),(0,s.j)("4bde44252ce3eec499e9fcfa450646c34b167f5c",p),(0,s.j)("0de1aa3ed13a01031d13c75725707c8e3d1371b2",b)},13657:(e,r,a)=>{"use strict";a.d(r,{S:()=>l,c:()=>i});var s=a(19510),t=a(40644);let l=({children:e,className:r})=>s.jsx("div",{className:(0,t.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 auto-rows-[minmax(140px,auto)] gap-3",r),children:e}),i=({children:e,className:r,colSpan:a=1,rowSpan:l=1})=>(0,s.jsxs)("div",{className:(0,t.cn)("group relative overflow-hidden rounded-2xl border border-[#E2E8F0] bg-white/70 p-3 backdrop-blur-xl transition-all duration-300","hover:border-[#3B82F6]/40 hover:bg-white/80 hover:shadow-[0_12px_30px_rgba(15,23,42,0.08)]",1===a&&"md:col-span-1",2===a&&"md:col-span-2",3===a&&"md:col-span-3",4===a&&"md:col-span-2 lg:col-span-4",2===l&&"row-span-2",r),children:[s.jsx("div",{className:"absolute inset-0 bg-noise opacity-[0.04] pointer-events-none mix-blend-soft-light"}),s.jsx("div",{className:"absolute -top-[150px] -right-[150px] w-[300px] h-[300px] bg-[#F59E0B]/12 rounded-full blur-[80px] opacity-0 group-hover:opacity-100 transition-opacity duration-700 ease-in-out pointer-events-none"}),s.jsx("div",{className:"absolute -bottom-[150px] -left-[150px] w-[300px] h-[300px] bg-[#3B82F6]/12 rounded-full blur-[80px] opacity-0 group-hover:opacity-100 transition-opacity duration-700 ease-in-out pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-transparent to-transparent opacity-50 pointer-events-none group-hover:opacity-70 transition-opacity duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-tl from-[#1E40AF]/10 via-transparent to-transparent opacity-40 pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-3xl border border-black/5 group-hover:border-[#3B82F6]/30 transition-colors duration-300 pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-3xl ring-1 ring-inset ring-black/5 group-hover:ring-[#3B82F6]/20 transition-all duration-300 pointer-events-none"}),s.jsx("div",{className:"relative z-10 h-full flex flex-col",children:e})]})},40644:(e,r,a)=>{"use strict";a.d(r,{cn:()=>l});var s=a(55761),t=a(62386);function l(...e){return(0,t.m6)((0,s.W)(e))}}};