exports.id=8630,exports.ids=[8630],exports.modules={91342:(e,t,r)=>{let a={"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":()=>Promise.resolve().then(r.bind(r,41418)).then(e=>e.logoutAction),b9fdf25a15fb84304180adce81eea9b6b985602a:()=>Promise.resolve().then(r.bind(r,41418)).then(e=>e.bypassLogin)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":s.bind(null,"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2"),b9fdf25a15fb84304180adce81eea9b6b985602a:s.bind(null,"b9fdf25a15fb84304180adce81eea9b6b985602a")}},73582:(e,t,r)=>{let a={"197801779373472057917955eb08dc056d65e73c":()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.getProducts),"1d1ecad8c7a07318f0eb63fd9b7ad167522cbe49":()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.updateProduct),"6853ccbc56f0d770fd65e278d296db834a4265cc":()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.bulkDeleteProducts),"6eddd26a4302e1b6f8ed7c36231e178db18ebfa6":()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.bulkUpdateProducts),a5f078fbd7f40fbe6edec152b4ca638a63b71caa:()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.createProduct),ecbce8da19ebef56e49982efb9e7efd14fd2f7c0:()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.deleteProduct),fb12ccb96b2e451645061970795dfe5910cdc6f3:()=>Promise.resolve().then(r.bind(r,3115)).then(e=>e.bulkImportProducts)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"197801779373472057917955eb08dc056d65e73c":s.bind(null,"197801779373472057917955eb08dc056d65e73c"),"1d1ecad8c7a07318f0eb63fd9b7ad167522cbe49":s.bind(null,"1d1ecad8c7a07318f0eb63fd9b7ad167522cbe49"),"6853ccbc56f0d770fd65e278d296db834a4265cc":s.bind(null,"6853ccbc56f0d770fd65e278d296db834a4265cc"),"6eddd26a4302e1b6f8ed7c36231e178db18ebfa6":s.bind(null,"6eddd26a4302e1b6f8ed7c36231e178db18ebfa6"),a5f078fbd7f40fbe6edec152b4ca638a63b71caa:s.bind(null,"a5f078fbd7f40fbe6edec152b4ca638a63b71caa"),ecbce8da19ebef56e49982efb9e7efd14fd2f7c0:s.bind(null,"ecbce8da19ebef56e49982efb9e7efd14fd2f7c0"),fb12ccb96b2e451645061970795dfe5910cdc6f3:s.bind(null,"fb12ccb96b2e451645061970795dfe5910cdc6f3")}},57687:(e,t,r)=>{"use strict";r.d(t,{FloatingCartButton:()=>b});var a=r(10326),s=r(39183),c=r(57671),o=r(30768),i=r(9086),d=r(38091),n=r(51223),l=r(17577),u=r(46226);function b(){let{totals:e,items:t,openCart:r}=(0,o.j)(),[b,p]=(0,l.useState)(!1),[f,m]=(0,l.useState)(!1),[g,h]=(0,l.useState)(!1),[x,_]=(0,l.useState)(e.itemCount);if(!f||0===e.itemCount)return null;let v=e=>e>=8?"bg-red-500":e>=4?"bg-orange-500":"bg-green-500";return(0,a.jsxs)("div",{className:"fixed z-50 flex flex-col items-end gap-3   bottom-4 right-4    md:bottom-6 md:right-6    lg:bottom-6 lg:right-8",children:[a.jsx(i.M,{children:b&&t.length>0&&(0,a.jsxs)(d.E.div,{initial:{opacity:0,scale:.9,y:10,originY:1},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{duration:.2},className:"hidden lg:block absolute bottom-[110%] right-0 w-72 bg-white/95 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[a.jsx("h4",{className:"font-bold text-sm text-gray-900",children:"Resumen del Carrito"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.itemCount," productos"]})]}),(0,a.jsxs)("div",{className:"max-h-64 overflow-y-auto p-2",children:[t.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex gap-3 p-2 hover:bg-gray-50 rounded-xl transition-colors group/item",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden relative flex-shrink-0",children:a.jsx(u.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover",sizes:"40px"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-bold text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-500",children:["Qty: ",e.quantity," x $",e.price.toLocaleString()]})]})]},e.id)),t.length>3&&(0,a.jsxs)("div",{className:"p-2 text-center text-xs text-gray-500 border-t border-gray-50 mt-1",children:["+",t.length-3," m\xe1s..."]})]}),a.jsx("div",{className:"p-3 bg-gray-50/50",children:(0,a.jsxs)("div",{className:"w-full text-center text-xs font-bold text-accent-gold uppercase tracking-wider flex items-center justify-center gap-1 group-hover/btn:translate-x-1 transition-transform",children:["Ver todo ",a.jsx(s.Z,{size:12})]})})]})}),(0,a.jsxs)(d.E.button,{layout:!0,onClick:r,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),whileHover:{scale:1.05},whileTap:{scale:.95},className:(0,n.cn)("relative flex items-center justify-center backdrop-blur-xl transition-all duration-300 group","bg-black/90 text-white shadow-[0_8px_32px_rgba(0,0,0,0.2)] border border-white/10","hover:bg-black hover:border-accent/50 hover:shadow-[0_12px_40px_rgba(245,158,11,0.3)]","w-14 h-14 rounded-full","md:w-auto md:h-14 md:px-5 md:rounded-2xl md:gap-3","lg:h-16 lg:px-6 lg:rounded-2xl lg:gap-4 lg:min-w-[180px]",g&&"animate-pulse ring-2 ring-accent ring-offset-2 ring-offset-black"),"aria-label":`Abrir carrito con ${e.itemCount} productos`,children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(c.Z,{className:(0,n.cn)("w-6 h-6 transition-colors duration-300","group-hover:text-accent"),strokeWidth:1.5}),a.jsx("span",{className:(0,n.cn)("absolute -top-2 -right-2 flex items-center justify-center w-5 h-5 text-[10px] font-bold text-white rounded-full shadow-sm md:hidden transition-colors duration-300",v(e.itemCount)),children:e.itemCount})]}),(0,a.jsxs)("div",{className:"hidden md:flex flex-col items-start lg:hidden",children:[a.jsx("span",{className:"text-xs font-bold text-white leading-none",children:e.itemCount}),a.jsx("span",{className:"text-[10px] text-zinc-400 leading-none",children:"Items"})]}),(0,a.jsxs)("div",{className:"hidden lg:flex flex-col items-start",children:[a.jsx("span",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider flex items-center gap-1",children:"Total"}),(0,a.jsxs)("span",{className:"text-sm font-bold font-heading text-white group-hover:text-accent transition-colors",children:["$",e.total.toLocaleString()]})]}),a.jsx("span",{className:(0,n.cn)("hidden lg:flex items-center justify-center min-w-[24px] h-6 px-1.5 ml-auto text-xs font-bold text-white rounded-lg shadow-inner",v(e.itemCount)),children:e.itemCount})]})]})}},3115:(e,t,r)=>{"use strict";r.r(t),r.d(t,{bulkDeleteProducts:()=>b,bulkImportProducts:()=>l,bulkUpdateProducts:()=>u,createProduct:()=>f,deleteProduct:()=>g,getProducts:()=>p,updateProduct:()=>m});var a=r(24330);r(60166);var s=r(56751),c=r(37857),o=r(57708),i=r(96543),d=r(40618);let n=i.Ryn({name:i.Z_8().min(1,"Nombre es obligatorio"),description:i.Z_8().optional(),category:i.Z_8().optional().default("General"),base_price:i.Rxh().min(0,"Precio debe ser positivo"),stock_by_size:i.IMB(i.Z_8(),i.Rxh().min(0)).optional().default({}),image_url:i.Z_8().url().optional()});async function l(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return{success:!1,error:"Unauthorized",successCount:0,errors:[]};let a={successCount:0,errors:[]},c=[];for(let t=0;t<e.length;t++){let r=e[t];try{let e=n.parse({name:r.name||r.Nombre,description:r.description||r.Descripcion,category:r.category||r.Categoria,base_price:Number(r.base_price||r.Precio||0),stock_by_size:"string"==typeof r.stock_by_size?JSON.parse(r.stock_by_size):r.stock_by_size||{},image_url:r.image_url||r.Imagen});c.push(e)}catch(e){e instanceof i.jmq?a.errors.push({row:t+1,error:e.issues.map(e=>e.message).join(", ")}):a.errors.push({row:t+1,error:"Invalid format"})}}if(0===c.length)return{...a,success:!1,message:"No valid products found to import."};let d=c.map(e=>({name:e.name,description:e.description,category:e.category,price:e.base_price,images:e.image_url?[e.image_url]:[],stock_by_size:e.stock_by_size,stock:Object.values(e.stock_by_size).reduce((e,t)=>Number(e)+Number(t),0),status:"activo"})),{error:l}=await t.from("productos").insert(d);return l?{success:!1,error:"Failed to insert products into database",successCount:0,errors:a.errors}:(a.successCount=c.length,(0,o.revalidatePath)("/"),(0,o.revalidatePath)("/dashboard/products"),{success:!0,...a})}async function u(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return{error:"Unauthorized"};let a=0,c=[];for(let r of e){let{id:e,data:s}=r,o={};s.name&&(o.name=s.name),void 0!==s.base_price&&(o.price=s.base_price),s.stock_by_size&&(o.stock_by_size=s.stock_by_size,o.stock=Object.values(s.stock_by_size).reduce((e,t)=>Number(e)+Number(t),0)),s.description&&(o.description=s.description),void 0!==s.is_active&&(o.status=s.is_active?"activo":"inactivo");let{error:i}=await t.from("productos").update(o).eq("id",e);i?c.push({id:e,error:i.message}):a++}return(0,o.revalidatePath)("/"),(0,o.revalidatePath)("/dashboard/products"),{success:!0,successCount:a,errors:c}}async function b(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return{error:"Unauthorized"};let{error:a}=await t.from("productos").delete().in("id",e);return a?{error:"Failed to delete products"}:((0,o.revalidatePath)("/"),(0,o.revalidatePath)("/dashboard/products"),{success:!0,count:e.length})}async function p(e,t,r="active"){let a=(0,s.e)();process.env.SUPABASE_SERVICE_ROLE_KEY&&(a=(0,c.eI)("https://tolzrvsykzmvndvomllt.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}));try{let s=a.from("productos").select("id, name, description, category, price, images, stock_by_size, status, created_at").order("created_at",{ascending:!1});"active"===r&&(s=s.eq("status","activo")),"inactive"===r&&(s=s.eq("status","inactivo")),e&&(s=s.ilike("name",`%${e}%`)),t&&"Todos"!==t&&(s=s.eq("category",t));let{data:c,error:o}=await s;if(o)return console.error("Fetch products error:",o),[];return c.map(e=>({id:e.id,name:e.name,description:e.description,category:e.category,base_price:e.price,images:e.images||[],stock_by_size:e.stock_by_size||{},is_active:"activo"===e.status,created_at:e.created_at}))}catch(e){return console.error("Unexpected products fetch error:",e),[]}}async function f(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return{error:"Unauthorized"};let a=e.get("name"),c=e.get("description"),i=e.get("category"),d=parseFloat(e.get("base_price")),n=e.get("stock_by_size"),l=n?JSON.parse(n):{},u=e.get("image_file"),b=e.get("image_url");if(u&&u.size>0){let e=u.name.split(".").pop(),r=`products/${Date.now()}.${e}`,{error:a}=await t.storage.from("products").upload(r,u);if(a)console.error("Storage upload error:",a);else{let{data:e}=t.storage.from("products").getPublicUrl(r);b=e.publicUrl}}else b||(b="https://placehold.co/600x600?text=No+Image");let p={name:a,description:c,category:i,price:d,images:[b],stock_by_size:l,stock:Object.values(l).reduce((e,t)=>Number(e)+Number(t),0),status:"activo"},{data:f,error:m}=await t.from("productos").insert(p).select().single();return m?(console.error("Create product error:",m),{error:`Error al crear producto: ${m.message}`}):((0,o.revalidatePath)("/"),(0,o.revalidatePath)("/dashboard/products"),{success:!0,product:{id:f.id,name:f.name,description:f.description,category:f.category,base_price:f.price,images:f.images,stock_by_size:f.stock_by_size,is_active:"activo"===f.status,created_at:f.created_at}})}async function m(e,t){let r=(0,s.e)(),{data:{user:a}}=await r.auth.getUser();if(!a)return{error:"Unauthorized"};let c=t.get("name"),i=t.get("description"),d=t.get("category"),n=parseFloat(t.get("base_price")),l=t.get("stock_by_size"),u=l?JSON.parse(l):{},b=t.get("image_url"),p=t.get("image_file");if(p&&p.size>0){let e=p.name.split(".").pop(),t=`products/${Date.now()}.${e}`,{error:a}=await r.storage.from("products").upload(t,p);if(!a){let{data:e}=r.storage.from("products").getPublicUrl(t);b=e.publicUrl}}let f={name:c,description:i,category:d,price:n,stock_by_size:u,stock:Object.values(u).reduce((e,t)=>Number(e)+Number(t),0),images:[b]},{error:m}=await r.from("productos").update(f).eq("id",e);if(m)return{error:"Failed to update product"};let{data:g}=await r.from("productos").select("*").eq("id",e).single();return(0,o.revalidatePath)("/"),(0,o.revalidatePath)("/dashboard/products"),{success:!0,product:{id:g.id,name:g.name,description:g.description,category:g.category,base_price:g.price,images:g.images,stock_by_size:g.stock_by_size,is_active:"activo"===g.status,created_at:g.created_at}}}async function g(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return{error:"Unauthorized"};let{error:a}=await t.from("productos").delete().eq("id",e);return a?{error:"Failed to delete product"}:((0,o.revalidatePath)("/"),(0,o.revalidatePath)("/dashboard/products"),{success:!0})}(0,d.h)([l,u,b,p,f,m,g]),(0,a.j)("fb12ccb96b2e451645061970795dfe5910cdc6f3",l),(0,a.j)("6eddd26a4302e1b6f8ed7c36231e178db18ebfa6",u),(0,a.j)("6853ccbc56f0d770fd65e278d296db834a4265cc",b),(0,a.j)("197801779373472057917955eb08dc056d65e73c",p),(0,a.j)("a5f078fbd7f40fbe6edec152b4ca638a63b71caa",f),(0,a.j)("1d1ecad8c7a07318f0eb63fd9b7ad167522cbe49",m),(0,a.j)("ecbce8da19ebef56e49982efb9e7efd14fd2f7c0",g)},66578:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\Tole\Desktop\Pegada Solo\eter-store\src\components\cart\FloatingCartButton.tsx#FloatingCartButton`)},56751:(e,t,r)=>{"use strict";r.d(t,{e:()=>c});var a=r(67721),s=r(71615);function c(){let e=(0,s.cookies)();return(0,a.createServerClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}}};