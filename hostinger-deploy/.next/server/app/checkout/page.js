(()=>{var e={};e.id=285,e.ids=[285],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},42990:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>n}),r(51324),r(74782),r(22824),r(7629),r(12523);var a=r(23191),s=r(88716),o=r(37922),l=r.n(o),i=r(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let n=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,51324)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\checkout\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(r.bind(r,74782)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,22824)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\template.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],c=["C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\checkout\\page.tsx"],m="/checkout/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},26990:(e,t,r)=>{let a={"0963c52e3d0d38eaf6ceb3f4b61c834aa8a997dc":()=>Promise.resolve().then(r.bind(r,23302)).then(e=>e.getOrderById),"3b790d46d78ec4aa5c227581a09039c9638ab494":()=>Promise.resolve().then(r.bind(r,23302)).then(e=>e.updateOrderStatus),"578b188545d16cd2a826e5b634755f4bfde26286":()=>Promise.resolve().then(r.bind(r,23302)).then(e=>e.getOrders),"6351432df3e44edfcb8453490de17a143b0c5e26":()=>Promise.resolve().then(r.bind(r,23302)).then(e=>e.createOrderFromCart),"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":()=>Promise.resolve().then(r.bind(r,41418)).then(e=>e.logoutAction),b9fdf25a15fb84304180adce81eea9b6b985602a:()=>Promise.resolve().then(r.bind(r,41418)).then(e=>e.bypassLogin)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"0963c52e3d0d38eaf6ceb3f4b61c834aa8a997dc":s.bind(null,"0963c52e3d0d38eaf6ceb3f4b61c834aa8a997dc"),"3b790d46d78ec4aa5c227581a09039c9638ab494":s.bind(null,"3b790d46d78ec4aa5c227581a09039c9638ab494"),"578b188545d16cd2a826e5b634755f4bfde26286":s.bind(null,"578b188545d16cd2a826e5b634755f4bfde26286"),"6351432df3e44edfcb8453490de17a143b0c5e26":s.bind(null,"6351432df3e44edfcb8453490de17a143b0c5e26"),"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":s.bind(null,"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2"),b9fdf25a15fb84304180adce81eea9b6b985602a:s.bind(null,"b9fdf25a15fb84304180adce81eea9b6b985602a")}},21719:(e,t,r)=>{Promise.resolve().then(r.bind(r,66823))},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},32933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},28916:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},48705:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},58038:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},14228:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},46226:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(69029),s=r.n(a)},69029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},getImageProps:function(){return i}});let a=r(91174),s=r(23078),o=r(92481),l=a._(r(86820));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=o.Image},66823:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(10326),s=r(17577),o=r(30768);r(15424);var l=r(46242);(0,l.$)("0963c52e3d0d38eaf6ceb3f4b61c834aa8a997dc");var i=(0,l.$)("6351432df3e44edfcb8453490de17a143b0c5e26");(0,l.$)("578b188545d16cd2a826e5b634755f4bfde26286"),(0,l.$)("3b790d46d78ec4aa5c227581a09039c9638ab494");var d=r(48705),n=r(86333),c=r(77506),m=r(32933),u=r(58038),p=r(28916),b=r(14228),x=r(90434),h=r(46226),f=r(35047),g=r(85999);function y(){let e=(0,f.useRouter)(),{items:t,totals:r,clearCart:l}=(0,o.j)(),[y,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)({customerName:"",customerEmail:"",customerPhone:"",resellerName:"",deliveryAddress:"",postalCode:"",deliveryDate:"",paymentMethod:"efectivo",notes:""}),N=e=>{w(t=>({...t,[e.target.name]:e.target.value}))},k=async r=>{if(r.preventDefault(),0===t.length){g.A.error("El carrito est\xe1 vac\xedo");return}v(!0);try{let r={items:t.map(e=>({productId:e.productId.toString(),name:e.name,price:e.price,quantity:e.quantity,size:e.size?.toString(),image:e.image})),customerName:j.customerName,customerEmail:j.customerEmail||void 0,customerPhone:j.customerPhone,resellerName:j.resellerName,deliveryAddress:j.deliveryAddress,postalCode:j.postalCode||void 0,deliveryDate:j.deliveryDate||void 0,paymentMethod:j.paymentMethod,notes:j.notes||void 0},a=await i(r);a.success?(g.A.success("\xa1Pedido creado exitosamente!",{description:`C\xf3digo de referencia: ${a.referenceCode}`}),l(),setTimeout(()=>{e.push(`/order-confirmation?orderId=${a.orderId}&ref=${a.referenceCode}`)},1500)):g.A.error("Error al crear el pedido",{description:a.message})}catch(e){console.error("Checkout error:",e),g.A.error("Error inesperado",{description:"Por favor intenta nuevamente"})}finally{v(!1)}};return 0===t.length?a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-6 pt-20",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"w-32 h-32 mx-auto mb-6 bg-gradient-to-br from-white/5 to-white/0 rounded-full flex items-center justify-center border-4 border-white/10",children:a.jsx(d.Z,{className:"text-gray-600",size:64})}),a.jsx("h1",{className:"text-4xl font-black mb-4",children:"El carrito est\xe1 vac\xedo"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Agreg\xe1 productos antes de finalizar la compra"}),(0,a.jsxs)(x.default,{href:"/catalog",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-black rounded-2xl hover:scale-105 transition-transform",children:[a.jsx(n.Z,{size:20}),"VOLVER AL CAT\xc1LOGO"]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-black text-white pt-20",children:[a.jsx("section",{className:"border-b border-white/10 py-8 px-6",children:a.jsx("div",{className:"container mx-auto max-w-7xl",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(x.default,{href:"/cart",className:"p-3 hover:bg-yellow-500/10 rounded-xl transition-colors group",children:a.jsx(n.Z,{className:"text-gray-400 group-hover:text-yellow-500 transition-colors",size:24})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-5xl md:text-6xl font-black tracking-tight",children:a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:"CHECKOUT"})}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Complet\xe1 tus datos para finalizar el pedido"})]})]})})}),a.jsx("form",{onSubmit:k,className:"container mx-auto max-w-7xl px-6 py-12",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"backdrop-blur-2xl bg-white/5 rounded-[3rem] p-8 border-2 border-white/10",children:[(0,a.jsxs)("h2",{className:"text-2xl font-black mb-6 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center text-black font-black",children:"1"}),"Datos del Cliente"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Nombre Completo *"}),a.jsx("input",{type:"text",name:"customerName",value:j.customerName,onChange:N,required:!0,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors",placeholder:"Juan P\xe9rez"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Tel\xe9fono / WhatsApp *"}),a.jsx("input",{type:"tel",name:"customerPhone",value:j.customerPhone,onChange:N,required:!0,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors",placeholder:"223 456 7890"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Email (opcional)"}),a.jsx("input",{type:"email",name:"customerEmail",value:j.customerEmail,onChange:N,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors",placeholder:"juan@example.com"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Revendedor *"}),a.jsx("input",{type:"text",name:"resellerName",value:j.resellerName,onChange:N,required:!0,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors",placeholder:"Tu nombre o nombre de tu tienda"})]})]})]}),(0,a.jsxs)("div",{className:"backdrop-blur-2xl bg-white/5 rounded-[3rem] p-8 border-2 border-white/10",children:[(0,a.jsxs)("h2",{className:"text-2xl font-black mb-6 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center text-black font-black",children:"2"}),"Datos de Env\xedo"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Direcci\xf3n de Entrega *"}),a.jsx("input",{type:"text",name:"deliveryAddress",value:j.deliveryAddress,onChange:N,required:!0,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors",placeholder:"Calle 123, Piso 4, Depto B"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Ciudad"}),a.jsx("input",{type:"text",value:"Mar del Plata",disabled:!0,className:"w-full px-4 py-4 bg-white/10 border-2 border-white/10 rounded-xl text-gray-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Provincia"}),a.jsx("input",{type:"text",value:"Buenos Aires",disabled:!0,className:"w-full px-4 py-4 bg-white/10 border-2 border-white/10 rounded-xl text-gray-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"C\xf3digo Postal"}),a.jsx("input",{type:"text",name:"postalCode",value:j.postalCode,onChange:N,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors",placeholder:"7600"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Fecha Estimada de Entrega"}),a.jsx("input",{type:"date",name:"deliveryDate",value:j.deliveryDate,onChange:N,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors"})]})]})]}),(0,a.jsxs)("div",{className:"backdrop-blur-2xl bg-white/5 rounded-[3rem] p-8 border-2 border-white/10",children:[(0,a.jsxs)("h2",{className:"text-2xl font-black mb-6 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center text-black font-black",children:"3"}),"M\xe9todo de Pago"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"efectivo",label:"Efectivo",icon:"\uD83D\uDCB5"},{value:"transferencia",label:"Transferencia",icon:"\uD83C\uDFE6"},{value:"mercado_pago",label:"Mercado Pago",icon:"\uD83D\uDCB3"},{value:"tarjeta",label:"Tarjeta",icon:"\uD83D\uDCB3"}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>w(t=>({...t,paymentMethod:e.value})),className:`p-6 rounded-2xl border-2 transition-all duration-300 ${j.paymentMethod===e.value?"bg-yellow-500 border-yellow-500 text-black scale-105":"bg-white/5 border-white/10 hover:border-white/30"}`,children:[a.jsx("div",{className:"text-3xl mb-2",children:e.icon}),a.jsx("div",{className:"font-bold text-sm",children:e.label})]},e.value))}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Notas Adicionales (opcional)"}),a.jsx("textarea",{name:"notes",value:j.notes,onChange:N,rows:3,className:"w-full px-4 py-4 bg-white/5 border-2 border-white/10 focus:border-yellow-500 rounded-xl outline-none text-white transition-colors resize-none",placeholder:"Ej: Entregar en horario de tarde, Dejar con portero, etc."})]})]})]}),a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"sticky top-24 backdrop-blur-2xl bg-gradient-to-br from-white/10 to-white/5 rounded-[3rem] p-8 border-4 border-white/10 space-y-6",children:[a.jsx("h2",{className:"text-2xl font-black",children:"Resumen del Pedido"}),a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:t.map(e=>(0,a.jsxs)("div",{className:"flex gap-4 pb-4 border-b border-white/10 last:border-0",children:[a.jsx("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden bg-gray-800 flex-shrink-0",children:a.jsx(h.default,{src:e.image,fill:!0,className:"object-cover",alt:e.name})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-sm truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Talle ",e.size," • ",e.color]}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Cant: ",e.quantity]})]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:["$",(e.price*e.quantity).toLocaleString()]})})]},e.id))}),(0,a.jsxs)("div",{className:"space-y-3 py-4 border-y border-white/10",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-300",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-bold",children:["$",r.subtotal.toLocaleString()]})]}),r.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-400",children:[a.jsx("span",{children:"Descuento"}),(0,a.jsxs)("span",{className:"font-bold",children:["-$",r.discount.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-400",children:[a.jsx("span",{children:"Env\xedo"}),a.jsx("span",{className:"font-bold",children:"GRATIS"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-baseline pt-3",children:[a.jsx("span",{className:"text-2xl font-bold",children:"Total"}),(0,a.jsxs)("span",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500",children:["$",r.total.toLocaleString()]})]})]}),a.jsx("button",{type:"submit",disabled:y,className:"w-full py-6 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-black text-lg rounded-2xl transition-all duration-300 shadow-[0_0_40px_rgba(255,215,0,0.3)] hover:shadow-[0_0_60px_rgba(255,215,0,0.5)] flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:y?(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{className:"animate-spin",size:24}),"PROCESANDO..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{size:24}),"CONFIRMAR PEDIDO"]})}),a.jsx("div",{className:"grid grid-cols-3 gap-3 pt-4",children:[{icon:u.Z,label:"Pago seguro"},{icon:p.Z,label:"100% protegido"},{icon:b.Z,label:"24/48hs"}].map((e,t)=>(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(e.icon,{className:"mx-auto mb-2 text-yellow-500",size:20}),a.jsx("p",{className:"text-xs text-gray-400",children:e.label})]},t))})]})})]})})]})}},23302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createOrderFromCart:()=>m,getOrderById:()=>b,getOrders:()=>u,updateOrderStatus:()=>p});var a=r(27745);r(26461);var s=r(57070),o=r(98406),l=r(30207),i=r(9501),d=r(85723);let n=i.Ryn({productId:i.Z_8(),name:i.Z_8(),price:i.Rxh(),quantity:i.Rxh().min(1),size:i.Z_8().optional(),image:i.Z_8().optional()}),c=i.Ryn({items:i.IXX(n).min(1,"El carrito est\xe1 vac\xedo"),customerName:i.Z_8().min(2,"Nombre requerido"),customerEmail:i.Z_8().email("Email inv\xe1lido").optional(),customerPhone:i.Z_8().min(6,"Tel\xe9fono requerido"),resellerName:i.Z_8().min(2,"Nombre del revendedor requerido"),deliveryAddress:i.Z_8().min(5,"Direcci\xf3n requerida"),postalCode:i.Z_8().optional(),deliveryDate:i.Z_8().optional(),paymentMethod:i.KmV(["efectivo","transferencia","mercado_pago","tarjeta"]),notes:i.Z_8().optional()});async function m(e){let t;let r=(0,s.e)(),a=c.safeParse(e);if(!a.success)return{success:!1,message:"Error de validaci\xf3n",errors:a.error.flatten().fieldErrors};let{items:i,customerName:d,customerEmail:n,customerPhone:m,deliveryAddress:u,postalCode:p,deliveryDate:b,paymentMethod:x,notes:h,resellerName:f}=a.data,g=i.reduce((e,t)=>e+t.price*t.quantity,0),{data:{user:y}}=await r.auth.getUser(),v={customer_name:d,customer_email:n||null,total_amount:g,status:"pendiente",items:{products:i.map(e=>({productId:e.productId,name:e.name,price:e.price,quantity:e.quantity,size:e.size,image:e.image})),shipping:{address:u,city:"Mar del Plata",province:"Buenos Aires",postalCode:p,phone:m,date:b,method:x,notes:h,resellerName:f},reseller_id:y?.id||null}};if(process.env.SUPABASE_SERVICE_ROLE_KEY)t=(0,o.eI)("https://tolzrvsykzmvndvomllt.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});else{if(console.warn("⚠️ SUPABASE_SERVICE_ROLE_KEY no encontrada. Usando cliente est\xe1ndar."),!y)return console.error("❌ Intento de Guest Checkout sin SUPABASE_SERVICE_ROLE_KEY. Fallar\xe1 por RLS."),{success:!1,message:"Para realizar el pedido como invitado, el sistema requiere configuraci\xf3n adicional. Por favor, inicia sesi\xf3n para continuar o contacta al soporte."};t=(0,s.e)()}try{let{data:e,error:r}=await t.from("pedidos").insert(v).select("id, created_at").single();if(r)return console.error("Error creating order in Supabase:",r),{success:!1,message:`Error al guardar el pedido: ${r.message||"Error de base de datos"}`};let a=`ETER-${e.id.slice(0,4).toUpperCase()}-${new Date().getFullYear()}`;try{(0,l.revalidatePath)("/dashboard"),(0,l.revalidatePath)("/dashboard?view=orders")}catch(e){console.error("Error revalidating paths:",e)}return{success:!0,message:"Pedido creado exitosamente",orderId:e.id,referenceCode:a}}catch(e){return console.error("Unexpected error during order creation:",e),{success:!1,message:`Error inesperado: ${e.message||"Intente nuevamente"}`}}}async function u(e){let t=(0,s.e)().from("pedidos").select("*").order("created_at",{ascending:!1});e?.status&&"all"!==e.status&&(t=t.eq("status",e.status)),e?.limit&&(t=t.limit(e.limit));let{data:r,error:a}=await t;return a?(console.error("Error fetching orders:",a),[]):r.map(e=>{let t=Array.isArray(e.items)?e.items:e.items?.products||[],r=Array.isArray(e.items)?null:e.items?.shipping;return{id:e.id,reference_code:`ETER-${e.id.slice(0,4).toUpperCase()}-${new Date(e.created_at).getFullYear()}`,customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone||e.items?.shipping?.phone||null,status:e.status,total_amount:e.total_amount,items:t,shippingDetails:r,created_at:e.created_at}})}async function p(e,t){let r=(0,s.e)(),{data:{user:a}}=await r.auth.getUser();if(!a)return{success:!1,message:"No autorizado"};let{data:o}=await r.from("profiles").select("role").eq("id",a.id).single();if(o?.role!=="admin")return{success:!1,message:"Solo administradores pueden actualizar pedidos"};let{error:i}=await r.from("pedidos").update({status:t}).eq("id",e);return i?(console.error("Error updating order:",i),{success:!1,message:"Error al actualizar el pedido"}):((0,l.revalidatePath)("/dashboard"),(0,l.revalidatePath)("/dashboard?view=orders"),{success:!0,message:"Estado actualizado correctamente"})}async function b(e){let t=(0,s.e)(),{data:r,error:a}=await t.from("pedidos").select("*").eq("id",e).single();if(a)return null;let o=Array.isArray(r.items)?r.items:r.items?.products||[],l=Array.isArray(r.items)?null:r.items?.shipping;return{...r,items:o,shippingDetails:l,customer_phone:r.customer_phone||r.items?.shipping?.phone||null,reference_code:`ETER-${r.id.slice(0,4).toUpperCase()}-${new Date(r.created_at).getFullYear()}`}}(0,d.h)([m,u,p,b]),(0,a.j)("6351432df3e44edfcb8453490de17a143b0c5e26",m),(0,a.j)("578b188545d16cd2a826e5b634755f4bfde26286",u),(0,a.j)("3b790d46d78ec4aa5c227581a09039c9638ab494",p),(0,a.j)("0963c52e3d0d38eaf6ceb3f4b61c834aa8a997dc",b)},51324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\Tole\Desktop\Pegada Solo\eter-store\src\app\checkout\page.tsx#default`)},57070:(e,t,r)=>{"use strict";r.d(t,{e:()=>o});var a=r(26407),s=r(53973);function o(){let e=(0,s.cookies)();return(0,a.createServerClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,3314,5703,2481,4559,9501,6846],()=>r(42990));module.exports=a})();