(()=>{var e={};e.id=9879,e.ids=[9879],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},97151:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>i}),t(29859),t(27310),t(51801),t(52356),t(74782),t(22824),t(7629),t(12523);var a=t(23191),s=t(88716),l=t(37922),o=t.n(l),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let i=["",{children:["(protected)",{children:["dashboard",{children:["profiles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,29859)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\dashboard\\profiles\\page.tsx"]}]},{}]},{error:[()=>Promise.resolve().then(t.bind(t,27310)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\dashboard\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,51801)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,52356)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,97026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(t.bind(t,74782)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\layout.tsx"],template:[()=>Promise.resolve().then(t.bind(t,22824)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\template.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,97026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],c=["C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\dashboard\\profiles\\page.tsx"],u="/(protected)/dashboard/profiles/page",f={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(protected)/dashboard/profiles/page",pathname:"/dashboard/profiles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},30374:(e,r,t)=>{let a={"0caaf2772a0e64695c49e8e86fc10813cc7f5681":()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.getProfile),"0de1aa3ed13a01031d13c75725707c8e3d1371b2":()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.getProfilesByRole),"402efe60e8d81cc7452c2e1d85a7551831a98b6d":()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.updateProfile),"4bde44252ce3eec499e9fcfa450646c34b167f5c":()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.getResellerStats),b14c462104f8c3657d1b43d696f9b15ce1cc49f6:()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.getAllProfiles),d80deeeb025a64ae47304816810f7fe2c2ef7dcb:()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.adminUpdateProfile),e7382504c848abbb6f66f361ae2547249774d2e0:()=>Promise.resolve().then(t.bind(t,75540)).then(e=>e.updateUserRole),"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":()=>Promise.resolve().then(t.bind(t,41418)).then(e=>e.logoutAction),b9fdf25a15fb84304180adce81eea9b6b985602a:()=>Promise.resolve().then(t.bind(t,41418)).then(e=>e.bypassLogin)};async function s(e,...r){return(await a[e]()).apply(null,r)}e.exports={"0caaf2772a0e64695c49e8e86fc10813cc7f5681":s.bind(null,"0caaf2772a0e64695c49e8e86fc10813cc7f5681"),"0de1aa3ed13a01031d13c75725707c8e3d1371b2":s.bind(null,"0de1aa3ed13a01031d13c75725707c8e3d1371b2"),"402efe60e8d81cc7452c2e1d85a7551831a98b6d":s.bind(null,"402efe60e8d81cc7452c2e1d85a7551831a98b6d"),"4bde44252ce3eec499e9fcfa450646c34b167f5c":s.bind(null,"4bde44252ce3eec499e9fcfa450646c34b167f5c"),b14c462104f8c3657d1b43d696f9b15ce1cc49f6:s.bind(null,"b14c462104f8c3657d1b43d696f9b15ce1cc49f6"),d80deeeb025a64ae47304816810f7fe2c2ef7dcb:s.bind(null,"d80deeeb025a64ae47304816810f7fe2c2ef7dcb"),e7382504c848abbb6f66f361ae2547249774d2e0:s.bind(null,"e7382504c848abbb6f66f361ae2547249774d2e0"),"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":s.bind(null,"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2"),b9fdf25a15fb84304180adce81eea9b6b985602a:s.bind(null,"b9fdf25a15fb84304180adce81eea9b6b985602a")}},4252:(e,r,t)=>{Promise.resolve().then(t.bind(t,41512))},55002:(e,r,t)=>{Promise.resolve().then(t.bind(t,33436))},35303:()=>{},79635:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(25578).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},46226:(e,r,t)=>{"use strict";t.d(r,{default:()=>s.a});var a=t(69029),s=t.n(a)},69029:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return d},getImageProps:function(){return n}});let a=t(91174),s=t(23078),l=t(92481),o=a._(t(86820));function n(e){let{props:r}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let d=l.Image},41512:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(10326);t(17577);var s=t(50949),l=t(91468),o=t(24258);function n({error:e,reset:r}){return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)(o.W,{className:"p-8 max-w-md w-full text-center border-red-500/20 bg-red-500/5",children:[a.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500",children:a.jsx(s.Z,{size:32})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Algo sali\xf3 mal"}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm mb-6",children:["No pudimos cargar el panel correctamente. Error: ",e.message]}),(0,a.jsxs)("button",{onClick:()=>r(),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-bold transition-all flex items-center gap-2 mx-auto",children:[a.jsx(l.Z,{size:18})," Reintentar"]})]})})}},24258:(e,r,t)=>{"use strict";t.d(r,{C:()=>o,W:()=>l});var a=t(10326),s=t(51223);let l=({children:e,className:r})=>a.jsx("div",{className:(0,s.cn)("bg-slate-900/40 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden",r),children:e}),o=({children:e,variant:r="default",className:t})=>a.jsx("span",{className:(0,s.cn)("px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all duration-300 hover:scale-105 cursor-default",{default:"bg-slate-800 text-slate-300",gold:"bg-amber-500/20 text-amber-500 border border-amber-500/30 shadow-[0_0_10px_rgba(245,158,11,0.2)]",blue:"bg-sky-500/20 text-sky-500 border border-sky-500/30 shadow-[0_0_10px_rgba(14,165,233,0.2)]",orange:"bg-orange-500/20 text-orange-500 border border-orange-500/30 shadow-[0_0_10px_rgba(249,115,22,0.2)]"}[r],t),children:e})},33436:(e,r,t)=>{"use strict";t.d(r,{ProfilesManager:()=>T});var a=t(10326),s=t(17577);t(15424);var l=t(46242);(0,l.$)("0de1aa3ed13a01031d13c75725707c8e3d1371b2"),(0,l.$)("0caaf2772a0e64695c49e8e86fc10813cc7f5681");var o=(0,l.$)("b14c462104f8c3657d1b43d696f9b15ce1cc49f6");(0,l.$)("402efe60e8d81cc7452c2e1d85a7551831a98b6d");var n=(0,l.$)("d80deeeb025a64ae47304816810f7fe2c2ef7dcb");(0,l.$)("e7382504c848abbb6f66f361ae2547249774d2e0"),(0,l.$)("4bde44252ce3eec499e9fcfa450646c34b167f5c");var d=t(46226),i=t(91664),c=t(79360),u=t(51223);let f=(0,c.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-error text-white hover:bg-error/80",outline:"text-content-body border-white/20",success:"border-transparent bg-success/20 text-success hover:bg-success/30",warning:"border-transparent bg-warning/20 text-warning hover:bg-warning/30",blue:"border-transparent bg-accent-blue/20 text-accent-blue hover:bg-accent-blue/30",purple:"border-transparent bg-accent-purple/20 text-accent-purple hover:bg-accent-purple/30"}},defaultVariants:{variant:"default"}});function m({className:e,variant:r,...t}){return a.jsx("div",{className:(0,u.cn)(f({variant:r}),e),...t})}let p=s.forwardRef(({className:e,...r},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,u.cn)("w-full caption-bottom text-sm",e),...r})}));p.displayName="Table";let b=s.forwardRef(({className:e,...r},t)=>a.jsx("thead",{ref:t,className:(0,u.cn)("[&_tr]:border-b",e),...r}));b.displayName="TableHeader";let h=s.forwardRef(({className:e,...r},t)=>a.jsx("tbody",{ref:t,className:(0,u.cn)("[&_tr:last-child]:border-0",e),...r}));h.displayName="TableBody",s.forwardRef(({className:e,...r},t)=>a.jsx("tfoot",{ref:t,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let x=s.forwardRef(({className:e,...r},t)=>a.jsx("tr",{ref:t,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));x.displayName="TableRow";let g=s.forwardRef(({className:e,...r},t)=>a.jsx("th",{ref:t,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));g.displayName="TableHead";let v=s.forwardRef(({className:e,...r},t)=>a.jsx("td",{ref:t,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));v.displayName="TableCell",s.forwardRef(({className:e,...r},t)=>a.jsx("caption",{ref:t,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption";var j=t(29280),w=t(41190),y=t(25578);let N=(0,y.Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),P=(0,y.Z)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),_=(0,y.Z)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);var k=t(79635),z=t(88307),S=t(32933),C=t(94019),A=t(85999);let R={admin:N,support:P,reseller:_,user:k.Z},E={admin:"bg-error/10 text-error border-error/20",support:"bg-warning/10 text-warning border-warning/20",reseller:"bg-primary/10 text-primary border-primary/20",user:"bg-content-muted/10 text-content-muted border-content-muted/20"},U={admin:"Admin",support:"Soporte",reseller:"Revendedor",user:"Usuario"};function T(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(""),[f,y]=(0,s.useState)("all"),[N,P]=(0,s.useState)(null),[_,k]=(0,s.useState)("user"),T=async()=>{l(!0);let{data:e,error:t}=await o();t?A.A.error(t):e&&r(e),l(!1)},I=async(e,r)=>{let{success:t,error:a}=await n(e,{role:r});t?(A.A.success("Rol actualizado correctamente"),P(null),T()):A.A.error(a||"Error al actualizar rol")},M=e.filter(e=>{let r=e.full_name?.toLowerCase().includes(c.toLowerCase())||e.email?.toLowerCase().includes(c.toLowerCase())||e.whatsapp_number?.includes(c),t="all"===f||e.role===f;return r&&t}),Z={admin:e.filter(e=>"admin"===e.role).length,support:e.filter(e=>"support"===e.role).length,reseller:e.filter(e=>"reseller"===e.role).length,user:e.filter(e=>"user"===e.role).length};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-content-heading",children:"Gesti\xf3n de Perfiles"}),a.jsx("p",{className:"text-content-muted mt-1",children:"Administra usuarios, roles y permisos"})]}),a.jsx(i.z,{onClick:T,variant:"outline",children:"Actualizar"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.keys(U).map(e=>{let r=R[e];return a.jsx("div",{className:"border border-border rounded-lg p-4 bg-surface hover:shadow-md transition-shadow",children:a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${E[e]}`,children:a.jsx(r,{size:20})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-content-muted",children:U[e]}),a.jsx("p",{className:"text-2xl font-bold text-content-heading",children:Z[e]})]})]})})},e)})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(z.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-content-muted h-4 w-4"}),a.jsx(w.I,{placeholder:"Buscar por nombre, email o tel\xe9fono...",value:c,onChange:e=>u(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(j.Ph,{value:f,onValueChange:e=>y(e),children:[a.jsx(j.i4,{className:"w-full md:w-[200px]",children:a.jsx(j.ki,{placeholder:"Filtrar por rol"})}),(0,a.jsxs)(j.Bw,{children:[a.jsx(j.Ql,{value:"all",children:"Todos los roles"}),a.jsx(j.Ql,{value:"admin",children:"Admin"}),a.jsx(j.Ql,{value:"support",children:"Soporte"}),a.jsx(j.Ql,{value:"reseller",children:"Revendedor"}),a.jsx(j.Ql,{value:"user",children:"Usuario"})]})]})]}),a.jsx("div",{className:"border border-border rounded-lg overflow-hidden bg-surface",children:(0,a.jsxs)(p,{children:[a.jsx(b,{children:(0,a.jsxs)(x,{children:[a.jsx(g,{children:"Usuario"}),a.jsx(g,{children:"Email"}),a.jsx(g,{children:"WhatsApp"}),a.jsx(g,{children:"Rol"}),a.jsx(g,{children:"Slug"}),a.jsx(g,{children:"Premium"}),a.jsx(g,{children:"Puntos"}),a.jsx(g,{children:"Acciones"})]})}),a.jsx(h,{children:t?a.jsx(x,{children:a.jsx(v,{colSpan:8,className:"text-center py-8 text-content-muted",children:"Cargando perfiles..."})}):0===M.length?a.jsx(x,{children:a.jsx(v,{colSpan:8,className:"text-center py-8 text-content-muted",children:"No se encontraron perfiles"})}):M.map(e=>{let r=R[e.role],t=N===e.id;return(0,a.jsxs)(x,{children:[a.jsx(v,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.avatar_url?a.jsx(d.default,{src:e.avatar_url,alt:e.full_name||"Avatar",width:32,height:32,className:"w-8 h-8 rounded-full"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-sm",children:e.full_name?.charAt(0)||e.email?.charAt(0)||"U"}),a.jsx("span",{className:"font-medium text-content-heading",children:e.full_name||"Sin nombre"})]})}),a.jsx(v,{className:"text-content-muted",children:e.email}),a.jsx(v,{className:"text-content-muted",children:e.whatsapp_number||"-"}),a.jsx(v,{children:t?(0,a.jsxs)(j.Ph,{value:_,onValueChange:e=>k(e),children:[a.jsx(j.i4,{className:"w-[140px]",children:a.jsx(j.ki,{})}),(0,a.jsxs)(j.Bw,{children:[a.jsx(j.Ql,{value:"user",children:"Usuario"}),a.jsx(j.Ql,{value:"reseller",children:"Revendedor"}),a.jsx(j.Ql,{value:"support",children:"Soporte"}),a.jsx(j.Ql,{value:"admin",children:"Admin"})]})]}):(0,a.jsxs)(m,{className:E[e.role],children:[a.jsx(r,{size:14,className:"mr-1"}),U[e.role]]})}),a.jsx(v,{className:"text-content-muted font-mono text-sm",children:e.reseller_slug||"-"}),a.jsx(v,{children:e.is_premium?a.jsx(m,{className:"bg-warning/10 text-warning border-warning/20",children:"Premium"}):a.jsx("span",{className:"text-content-muted text-sm",children:"-"})}),a.jsx(v,{className:"text-content-heading font-medium",children:e.points}),a.jsx(v,{children:a.jsx("div",{className:"flex items-center gap-2",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.z,{size:"sm",variant:"ghost",onClick:()=>I(e.id,_),className:"h-8 w-8 p-0 text-success hover:bg-success/10",children:a.jsx(S.Z,{size:16})}),a.jsx(i.z,{size:"sm",variant:"ghost",onClick:()=>P(null),className:"h-8 w-8 p-0 text-error hover:bg-error/10",children:a.jsx(C.Z,{size:16})})]}):a.jsx(i.z,{size:"sm",variant:"outline",onClick:()=>{P(e.id),k(e.role)},children:"Editar Rol"})})})]},e.id)})})]})})]})}},29280:(e,r,t)=>{"use strict";t.d(r,{Bw:()=>b,Ph:()=>c,Ql:()=>h,i4:()=>f,ki:()=>u});var a=t(10326),s=t(17577),l=t(22389),o=t(941),n=t(96633),d=t(32933),i=t(51223);let c=l.fC;l.ZA;let u=l.B4,f=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(l.xz,{ref:s,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,a.jsx(l.JO,{asChild:!0,children:a.jsx(o.Z,{className:"h-4 w-4 opacity-50"})})]}));f.displayName=l.xz.displayName;let m=s.forwardRef(({className:e,...r},t)=>a.jsx(l.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:a.jsx(n.Z,{className:"h-4 w-4"})}));m.displayName=l.u_.displayName;let p=s.forwardRef(({className:e,...r},t)=>a.jsx(l.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:a.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=l.$G.displayName;let b=s.forwardRef(({className:e,children:r,position:t="popper",...s},o)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:o,className:(0,i.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:[a.jsx(m,{}),a.jsx(l.l_,{className:(0,i.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),a.jsx(p,{})]})}));b.displayName=l.VY.displayName,s.forwardRef(({className:e,...r},t)=>a.jsx(l.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",e),...r})).displayName=l.__.displayName;let h=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(l.ck,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:r})]}));h.displayName=l.ck.displayName,s.forwardRef(({className:e,...r},t)=>a.jsx(l.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=l.Z0.displayName},27310:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\Users\Tole\Desktop\Pegada Solo\eter-store\src\app\(protected)\dashboard\error.tsx#default`)},51801:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(19510);function s(){return a.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-[#0A0A0A]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative h-16 w-16",children:[a.jsx("div",{className:"absolute inset-0 rounded-full border-t-2 border-[#c88a04] opacity-20"}),a.jsx("div",{className:"absolute inset-0 animate-spin rounded-full border-t-2 border-[#c88a04] shadow-[0_0_10px_#c88a04]"})]}),a.jsx("div",{className:"animate-pulse font-mono text-xs tracking-[0.2em] text-[#c88a04]",children:"SYSTEM // ETER_CORE INITIALIZING..."})]})})}},29859:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o,metadata:()=>l});var a=t(19510);let s=(0,t(68570).createProxy)(String.raw`C:\Users\Tole\Desktop\Pegada Solo\eter-store\src\components\dashboard\admin\ProfilesManager.tsx#ProfilesManager`),l={title:"Gesti\xf3n de Perfiles | \xc9TER Store",description:"Administra usuarios, roles y permisos del sistema"};function o(){return a.jsx(s,{})}},75540:(e,r,t)=>{"use strict";t.r(r),t.d(r,{adminUpdateProfile:()=>p,getAllProfiles:()=>f,getProfile:()=>u,getProfilesByRole:()=>x,getResellerStats:()=>h,updateProfile:()=>m,updateUserRole:()=>b});var a=t(27745);t(26461);var s=t(57070);let l=new Map;async function o(e,r){!function(){let e=Date.now();for(let[r,t]of l.entries())e-t.timestamp>3e5&&l.delete(r)}();let t=l.get(e);if(t&&Date.now()-t.timestamp<3e5)return t.role;let{data:a}=await r.from("user_roles").select("role").eq("user_id",e).single();if(a?.role)return l.set(e,{role:a.role,timestamp:Date.now()}),a.role;let{data:s}=await r.from("profiles").select("role").eq("id",e).single();if(s?.role){let r=s.role;return l.set(e,{role:r,timestamp:Date.now()}),r}return null}async function n(){let e=(0,s.e)(),{data:{user:r},error:t}=await e.auth.getUser();if(t||!r)return{user:null,role:null,isAdmin:!1,isSupport:!1,isReseller:!1,canManageProfiles:!1,error:"No autorizado"};let a=await o(r.id,e);return{user:r,role:a,isAdmin:"admin"===a,isSupport:"support"===a,isReseller:"reseller"===a,canManageProfiles:"admin"===a||"support"===a,error:null}}async function d(){let{user:e,role:r,error:t}=await n();if(t||!e)throw Error("No autorizado");return{user:e,role:r}}async function i(){let{user:e,role:r,canManageProfiles:t,error:a}=await n();if(a||!e||!t)throw Error("Permisos insuficientes - Se requiere rol de administrador o soporte");return{user:e,role:r}}var c=t(30207);async function u(e){try{let{user:r}=await d(),t=(0,s.e)(),a=e||r.id,{data:l,error:o}=await t.from("profiles").select("*").eq("id",a).single();if(o)return console.error("Error fetching profile:",o),{data:null,error:`Error al obtener perfil: ${o.message}`};return{data:l,error:null}}catch(e){return console.error("Error in getProfile:",e),{data:null,error:e instanceof Error?e.message:"No autorizado"}}}async function f(){let e=(0,s.e)(),{data:{user:r}}=await e.auth.getUser();if(!r)return{data:null,error:"No autorizado"};let{data:t}=await e.from("profiles").select("role").eq("id",r.id).single();if(!t||!["admin","support"].includes(t.role))return{data:null,error:"Permisos insuficientes"};let{data:a,error:l}=await e.from("profiles").select("*");return l?(console.error("Error fetching all profiles:",l),{data:null,error:`Error al obtener perfiles: ${l.message}`}):{data:a,error:null}}async function m(e){let r=(0,s.e)(),{data:{user:t},error:a}=await r.auth.getUser();if(a||!t)return{success:!1,error:"No autorizado"};let{error:l}=await r.from("profiles").update(e).eq("id",t.id);return l?(console.error("Error updating profile:",l),{success:!1,error:"Error al actualizar perfil"}):((0,c.revalidatePath)("/dashboard/profile"),(0,c.revalidatePath)("/dashboard/settings"),{success:!0,error:null})}async function p(e,r){try{await i();let t=(0,s.e)(),{error:a}=await t.from("profiles").update(r).eq("id",e);if(a)return console.error("Error updating profile (admin):",a),{success:!1,error:`Error al actualizar perfil: ${a.message}`};return r.role&&l.delete(e),(0,c.revalidatePath)("/dashboard/profiles"),(0,c.revalidatePath)("/dashboard"),(0,c.revalidatePath)("/dashboard/users"),{success:!0,error:null}}catch(e){return console.error("Error in adminUpdateProfile:",e),{success:!1,error:e instanceof Error?e.message:"Permisos insuficientes"}}}async function b(e,r){return p(e,{role:r})}async function h(e){let r=(0,s.e)(),{data:{user:t},error:a}=await r.auth.getUser();if(a||!t)return{data:null,error:"No autorizado"};let l=e||t.id,{data:o,error:n}=await r.from("reseller_orders").select("*").eq("reseller_id",l);if(n)return console.error("Error fetching reseller stats:",n),{data:null,error:"Error al obtener estad\xedsticas"};if(!o||0===o.length)return{data:{total_orders:0,total_revenue:0,total_profit:0,active_customers:0,conversion_rate:0},error:null};let d=o.length,i=o.filter(e=>"completed"===e.status),c=i.reduce((e,r)=>e+(r.sale_price||0),0),u=i.reduce((e,r)=>e+(r.profit||0),0),f=new Set(o.map(e=>e.customer_phone).filter(Boolean)).size,m=d>0?i.length/d*100:0;return{data:{total_orders:d,total_revenue:c,total_profit:u,active_customers:f,conversion_rate:Number(m.toFixed(2))},error:null}}async function x(e){let r=(0,s.e)(),{data:t,error:a}=await r.from("profiles").select("*").eq("role",e).order("full_name",{ascending:!0});return a?(console.error("Error fetching profiles by role:",a),{data:null,error:"Error al obtener perfiles"}):{data:t,error:null}}(0,t(85723).h)([u,f,m,p,b,h,x]),(0,a.j)("0caaf2772a0e64695c49e8e86fc10813cc7f5681",u),(0,a.j)("b14c462104f8c3657d1b43d696f9b15ce1cc49f6",f),(0,a.j)("402efe60e8d81cc7452c2e1d85a7551831a98b6d",m),(0,a.j)("d80deeeb025a64ae47304816810f7fe2c2ef7dcb",p),(0,a.j)("e7382504c848abbb6f66f361ae2547249774d2e0",b),(0,a.j)("4bde44252ce3eec499e9fcfa450646c34b167f5c",h),(0,a.j)("0de1aa3ed13a01031d13c75725707c8e3d1371b2",x)},57070:(e,r,t)=>{"use strict";t.d(r,{e:()=>l});var a=t(26407),s=t(53973);function l(){let e=(0,s.cookies)();return(0,a.createServerClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o",{cookies:{getAll:()=>e.getAll(),setAll(r){try{r.forEach(({name:r,value:t,options:a})=>e.set(r,t,a))}catch{}}}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,3314,5703,2481,43,4559,4397,6846,3419],()=>t(97151));module.exports=a})();