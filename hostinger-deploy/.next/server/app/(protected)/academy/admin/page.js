(()=>{var e={};e.id=1600,e.ids=[1600],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},54539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),r(43470),r(52356),r(74782),r(22824),r(7629),r(12523);var a=r(23191),s=r(88716),d=r(37922),n=r.n(d),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let o=["",{children:["(protected)",{children:["academy",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43470)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\academy\\admin\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52356)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(r.bind(r,74782)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,22824)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\template.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,97026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],c=["C:\\Users\\Tole\\Desktop\\Pegada Solo\\eter-store\\src\\app\\(protected)\\academy\\admin\\page.tsx"],u="/(protected)/academy/admin/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(protected)/academy/admin/page",pathname:"/academy/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},99897:(e,t,r)=>{let a={"0bf380bc91f93549647f616bf6e65a935dd3e0c1":()=>Promise.resolve().then(r.bind(r,58507)).then(e=>e.createLesson),"14292334159141a2d2a5110225b42bf0b021ef58":()=>Promise.resolve().then(r.bind(r,58507)).then(e=>e.createCourse),"2398636c068ae8ecea9ccb6e6d18c2bf7d74474b":()=>Promise.resolve().then(r.bind(r,58507)).then(e=>e.completeLesson),"39e0b21b766fdbbcf9d3b0ecf081e0d8ecaf1948":()=>Promise.resolve().then(r.bind(r,58507)).then(e=>e.getAcademyJourney),"7b18d6afe53d36cbc468e15f46eb579998b015d3":()=>Promise.resolve().then(r.bind(r,58507)).then(e=>e.createModule),b61b29cce2a7184013bbdd8fe3206fadda4d89ea:()=>Promise.resolve().then(r.bind(r,58507)).then(e=>e.getLesson),"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":()=>Promise.resolve().then(r.bind(r,41418)).then(e=>e.logoutAction),b9fdf25a15fb84304180adce81eea9b6b985602a:()=>Promise.resolve().then(r.bind(r,41418)).then(e=>e.bypassLogin)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"0bf380bc91f93549647f616bf6e65a935dd3e0c1":s.bind(null,"0bf380bc91f93549647f616bf6e65a935dd3e0c1"),"14292334159141a2d2a5110225b42bf0b021ef58":s.bind(null,"14292334159141a2d2a5110225b42bf0b021ef58"),"2398636c068ae8ecea9ccb6e6d18c2bf7d74474b":s.bind(null,"2398636c068ae8ecea9ccb6e6d18c2bf7d74474b"),"39e0b21b766fdbbcf9d3b0ecf081e0d8ecaf1948":s.bind(null,"39e0b21b766fdbbcf9d3b0ecf081e0d8ecaf1948"),"7b18d6afe53d36cbc468e15f46eb579998b015d3":s.bind(null,"7b18d6afe53d36cbc468e15f46eb579998b015d3"),b61b29cce2a7184013bbdd8fe3206fadda4d89ea:s.bind(null,"b61b29cce2a7184013bbdd8fe3206fadda4d89ea"),"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2":s.bind(null,"79f3f00d4b0c2946f94fdcd69d6b36cb5d5604f2"),b9fdf25a15fb84304180adce81eea9b6b985602a:s.bind(null,"b9fdf25a15fb84304180adce81eea9b6b985602a")}},50887:(e,t,r)=>{Promise.resolve().then(r.bind(r,75469))},83855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(25578).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},69171:(e,t,r)=>{"use strict";r.d(t,{N:()=>d,P6:()=>n,aA:()=>s,l6:()=>i}),r(15424);var a=r(46242),s=(0,a.$)("0bf380bc91f93549647f616bf6e65a935dd3e0c1");(0,a.$)("39e0b21b766fdbbcf9d3b0ecf081e0d8ecaf1948");var d=(0,a.$)("2398636c068ae8ecea9ccb6e6d18c2bf7d74474b");(0,a.$)("b61b29cce2a7184013bbdd8fe3206fadda4d89ea");var n=(0,a.$)("14292334159141a2d2a5110225b42bf0b021ef58"),i=(0,a.$)("7b18d6afe53d36cbc468e15f46eb579998b015d3")},75469:(e,t,r)=>{"use strict";r.d(t,{AdminAcademyManager:()=>w});var a=r(10326),s=r(17577),d=r(69171),n=r(91664),i=r(41190),l=r(44794),o=r(51223);let c=s.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));c.displayName="Textarea";var u=r(29280),f=r(56627);let p=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("rounded-xl border border-white/10 bg-surface text-content-body shadow-sm backdrop-blur-sm",e),...t}));p.displayName="Card";let m=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));m.displayName="CardHeader";let b=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight text-content-heading",e),...t}));b.displayName="CardTitle";let h=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,o.cn)("text-sm text-content-muted",e),...t}));h.displayName="CardDescription";let x=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));x.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var g=r(83855),y=r(25578);let j=(0,y.Z)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),v=(0,y.Z)("file-play",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]]);function w({initialCourses:e,initialModules:t}){let{toast:r}=(0,f.p)(),[y,w]=(0,s.useState)("courses"),[_,N]=(0,s.useState)({title:"",description:"",slug:"",thumbnail_url:""}),[C,P]=(0,s.useState)({course_id:"",title:"",order:1}),[R,k]=(0,s.useState)({module_id:"",title:"",type:"video",url:"",description:"",xp_reward:50,order:1,is_vip:!0}),M=async()=>{try{await (0,d.P6)(_),r.success("Curso creado exitosamente"),N({title:"",description:"",slug:"",thumbnail_url:""})}catch{r.error("Error al crear curso")}},A=async()=>{try{await (0,d.l6)(C),r.success("M\xf3dulo creado exitosamente"),P({...C,title:""})}catch{r.error("Error al crear m\xf3dulo")}},I=async()=>{try{await (0,d.aA)(R),r.success("Lecci\xf3n creada exitosamente"),k({...R,title:"",url:""})}catch{r.error("Error al crear lecci\xf3n")}},S=({value:e,label:t})=>a.jsx("button",{onClick:()=>w(e),className:(0,o.cn)("px-4 py-2 text-sm font-medium rounded-lg transition-colors",y===e?"bg-gray-900 text-white shadow":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"),children:t});return(0,a.jsxs)("div",{className:"w-full space-y-6",children:[(0,a.jsxs)("div",{className:"flex space-x-2 bg-gray-100 p-1 rounded-xl w-fit",children:[a.jsx(S,{value:"courses",label:"Cursos"}),a.jsx(S,{value:"modules",label:"M\xf3dulos"}),a.jsx(S,{value:"lessons",label:"Lecciones"})]}),"courses"===y&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)(p,{children:[(0,a.jsxs)(m,{children:[a.jsx(b,{children:"Crear Nuevo Curso"}),a.jsx(h,{children:"Define la estructura principal."})]}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"T\xedtulo"}),a.jsx(i.I,{value:_.title,onChange:e=>N({..._,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Slug (URL amigable)"}),a.jsx(i.I,{value:_.slug,placeholder:"ej: fundamentos-ventas",onChange:e=>N({..._,slug:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Descripci\xf3n"}),a.jsx(c,{value:_.description,onChange:e=>N({..._,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Thumbnail URL"}),a.jsx(i.I,{value:_.thumbnail_url,placeholder:"https://...",onChange:e=>N({..._,thumbnail_url:e.target.value})})]}),(0,a.jsxs)(n.z,{onClick:M,className:"w-full",children:[a.jsx(g.Z,{className:"w-4 h-4 mr-2"})," Crear Curso"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Cursos Existentes"}),e.map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg flex items-center justify-between bg-white dark:bg-gray-900",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["/",e.slug]})]}),a.jsx("span",{className:e.is_published?"text-green-500 text-xs":"text-yellow-500 text-xs",children:e.is_published?"Publicado":"Borrador"})]},e.id))]})]}),"modules"===y&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)(p,{children:[(0,a.jsxs)(m,{children:[a.jsx(b,{children:"Agregar M\xf3dulo"}),a.jsx(h,{children:"Agrupa lecciones dentro de un curso."})]}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Seleccionar Curso"}),(0,a.jsxs)(u.Ph,{onValueChange:e=>P({...C,course_id:e}),children:[a.jsx(u.i4,{children:a.jsx(u.ki,{placeholder:"Elige un curso"})}),a.jsx(u.Bw,{children:e.map(e=>a.jsx(u.Ql,{value:e.id,children:e.title},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"T\xedtulo del M\xf3dulo"}),a.jsx(i.I,{value:C.title,onChange:e=>P({...C,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Orden"}),a.jsx(i.I,{type:"number",value:C.order,onChange:e=>P({...C,order:parseInt(e.target.value)})})]}),(0,a.jsxs)(n.z,{onClick:A,className:"w-full",children:[a.jsx(j,{className:"w-4 h-4 mr-2"})," Crear M\xf3dulo"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-bold text-lg",children:"M\xf3dulos Existentes"}),t.map(t=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white dark:bg-gray-900",children:[a.jsx("p",{className:"font-bold",children:t.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Curso: ",e.find(e=>e.id===t.course_id)?.title||"Desconocido"]})]},t.id))]})]}),"lessons"===y&&(0,a.jsxs)(p,{children:[(0,a.jsxs)(m,{children:[a.jsx(b,{children:"Subir Contenido (Lecci\xf3n)"}),a.jsx(h,{children:"Sube videos, PDFs o audios."})]}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"M\xf3dulo"}),(0,a.jsxs)(u.Ph,{onValueChange:e=>k({...R,module_id:e}),children:[a.jsx(u.i4,{children:a.jsx(u.ki,{placeholder:"Elige un m\xf3dulo"})}),a.jsx(u.Bw,{children:t.map(e=>a.jsx(u.Ql,{value:e.id,children:e.title},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Tipo"}),(0,a.jsxs)(u.Ph,{defaultValue:"video",onValueChange:e=>k({...R,type:e}),children:[a.jsx(u.i4,{children:a.jsx(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[a.jsx(u.Ql,{value:"video",children:"Video (YouTube/Vimeo)"}),a.jsx(u.Ql,{value:"pdf",children:"PDF"}),a.jsx(u.Ql,{value:"audio",children:"Audio"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"T\xedtulo"}),a.jsx(i.I,{value:R.title,onChange:e=>k({...R,title:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"URL del Contenido"}),a.jsx(i.I,{value:R.url,placeholder:"https://...",onChange:e=>k({...R,url:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Descripci\xf3n"}),a.jsx(c,{value:R.description,onChange:e=>k({...R,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"XP Recompensa"}),a.jsx(i.I,{type:"number",value:R.xp_reward,onChange:e=>k({...R,xp_reward:parseInt(e.target.value)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{children:"Orden"}),a.jsx(i.I,{type:"number",value:R.order,onChange:e=>k({...R,order:parseInt(e.target.value)})})]})]}),(0,a.jsxs)(n.z,{onClick:I,className:"w-full bg-green-600 hover:bg-green-700",children:[a.jsx(v,{className:"w-4 h-4 mr-2"})," Publicar Lecci\xf3n"]})]})]})]})}},29280:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>b,Ph:()=>c,Ql:()=>h,i4:()=>f,ki:()=>u});var a=r(10326),s=r(17577),d=r(22389),n=r(941),i=r(96633),l=r(32933),o=r(51223);let c=d.fC;d.ZA;let u=d.B4,f=s.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(d.xz,{ref:s,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,a.jsx(d.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));f.displayName=d.xz.displayName;let p=s.forwardRef(({className:e,...t},r)=>a.jsx(d.u_,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(i.Z,{className:"h-4 w-4"})}));p.displayName=d.u_.displayName;let m=s.forwardRef(({className:e,...t},r)=>a.jsx(d.$G,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(n.Z,{className:"h-4 w-4"})}));m.displayName=d.$G.displayName;let b=s.forwardRef(({className:e,children:t,position:r="popper",...s},n)=>a.jsx(d.h_,{children:(0,a.jsxs)(d.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[a.jsx(p,{}),a.jsx(d.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(m,{})]})}));b.displayName=d.VY.displayName,s.forwardRef(({className:e,...t},r)=>a.jsx(d.__,{ref:r,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=d.__.displayName;let h=s.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(d.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(d.wU,{children:a.jsx(l.Z,{className:"h-4 w-4"})})}),a.jsx(d.eT,{children:t})]}));h.displayName=d.ck.displayName,s.forwardRef(({className:e,...t},r)=>a.jsx(d.Z0,{ref:r,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=d.Z0.displayName},56627:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var a=r(85999);let s=()=>({toast:a.A})},58585:(e,t,r)=>{"use strict";var a=r(61085);r.o(a,"notFound")&&r.d(t,{notFound:function(){return a.notFound}}),r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}})},61085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return a.RedirectType},notFound:function(){return s.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect}});let a=r(83953),s=r(16399);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return s},notFound:function(){return a}});let r="NEXT_NOT_FOUND";function a(){let e=Error(r);throw e.digest=r,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83953:(e,t,r)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return a},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return f},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return o}});let s=r(54580),d=r(72934),n=r(8586),i="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let a=Error(i);a.digest=i+";"+t+";"+e+";"+r+";";let d=s.requestAsyncStorage.getStore();return d&&(a.mutableCookies=d.mutableCookies),a}function o(e,t){void 0===t&&(t="replace");let r=d.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=d.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,a,s]=e.digest.split(";",4),d=Number(s);return t===i&&("replace"===r||"push"===r)&&"string"==typeof a&&!isNaN(d)&&d in n.RedirectStatusCode}function f(e){return u(e)?e.digest.split(";",3)[2]:null}function p(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(a||(a={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},43470:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(19510),s=r(56751),d=r(58585);let n=(0,r(68570).createProxy)(String.raw`C:\Users\Tole\Desktop\Pegada Solo\eter-store\src\components\academy\admin\AdminAcademyManager.tsx#AdminAcademyManager`);async function i(){let e=(0,s.e)(),{data:{user:t}}=await e.auth.getUser();t||(0,d.redirect)("/login");let{data:r}=await e.from("profiles").select("role").eq("id",t.id).single();r?.role!=="admin"&&r?.role!=="support"&&(0,d.redirect)("/academy");let{data:i}=await e.from("academy_courses").select("*").order("created_at"),{data:l}=await e.from("academy_modules").select("*").order("created_at");return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Gesti\xf3n de Academia"}),a.jsx("div",{className:"bg-orange-100 text-orange-700 px-4 py-2 rounded-full font-bold text-sm",children:"Modo Admin"})]}),a.jsx(n,{initialCourses:i||[],initialModules:l||[]})]})}},58507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{completeLesson:()=>i,createCourse:()=>o,createLesson:()=>u,createModule:()=>c,getAcademyJourney:()=>n,getLesson:()=>l});var a=r(27745);r(26461);var s=r(57070),d=r(30207);async function n(){try{let e=(0,s.e)(),{data:{user:t},error:r}=await e.auth.getUser();if(r||!t)return[];let{data:a,error:d}=await e.from("academy_courses").select(`
        *,
        modules:academy_modules(
            *,
            lessons:academy_content(*)
        )
        `).eq("is_published",!0).order("created_at",{ascending:!0});if(d||!a)return[];let{data:n}=await e.from("academy_progress").select("content_id").eq("user_id",t.id),i=new Set(n?.map(e=>e.content_id)||[]);return a.map(e=>{let t=0,r=0,a=(e.modules||[]).sort((e,t)=>(e.order||0)-(t.order||0)).map(e=>{let a=(e.lessons||[]).sort((e,t)=>(e.order||0)-(t.order||0)).map(e=>{t++;let a=i.has(e.id);return a&&r++,{...e,completed:a}});return{...e,lessons:a}});return{...e,modules:a,progress:t>0?Math.round(r/t*100):0}})}catch(e){return console.error("Academy Error:",e),[]}}async function i(e){try{let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)throw Error("Not authorized");let{data:a}=await t.from("academy_progress").select("content_id").eq("user_id",r.id).eq("content_id",e).single();if(a)return{success:!0,message:"Already completed"};let{data:n}=await t.from("academy_content").select("xp_reward").eq("id",e).single();if(!n)throw Error("Lesson not found");let{error:i}=await t.from("academy_progress").insert({user_id:r.id,content_id:e});if(i)throw i;let{error:l}=await t.rpc("increment_points",{user_id:r.id,points_to_add:n.xp_reward});if(l){let{data:e}=await t.from("profiles").select("points").eq("id",r.id).single();await t.from("profiles").update({points:(e?.points||0)+(n.xp_reward||0)}).eq("id",r.id)}return(0,d.revalidatePath)("/academy"),{success:!0,xpGained:n.xp_reward}}catch(e){return console.error("Academy complete error:",e),{success:!1,error:"Failed to complete lesson"}}}async function l(e){try{let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return null;let{data:a,error:d}=await t.from("academy_content").select("*").eq("id",e).single();if(d||!a)return null;let{data:n}=await t.from("academy_progress").select("completed_at").eq("user_id",r.id).eq("content_id",e).single();return{...a,completed:!!n}}catch(e){return console.error("Academy get lesson error:",e),null}}async function o(e){let t=(0,s.e)(),{error:r}=await t.from("academy_courses").insert(e);if(r)throw r;return(0,d.revalidatePath)("/academy"),{success:!0}}async function c(e){let t=(0,s.e)(),{error:r}=await t.from("academy_modules").insert(e);if(r)throw r;return(0,d.revalidatePath)("/academy"),{success:!0}}async function u(e){let t=(0,s.e)(),{error:r}=await t.from("academy_content").insert(e);if(r)throw r;return(0,d.revalidatePath)("/academy"),{success:!0}}(0,r(85723).h)([n,i,l,o,c,u]),(0,a.j)("39e0b21b766fdbbcf9d3b0ecf081e0d8ecaf1948",n),(0,a.j)("2398636c068ae8ecea9ccb6e6d18c2bf7d74474b",i),(0,a.j)("b61b29cce2a7184013bbdd8fe3206fadda4d89ea",l),(0,a.j)("14292334159141a2d2a5110225b42bf0b021ef58",o),(0,a.j)("7b18d6afe53d36cbc468e15f46eb579998b015d3",c),(0,a.j)("0bf380bc91f93549647f616bf6e65a935dd3e0c1",u)},57070:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var a=r(26407),s=r(53973);function d(){let e=(0,s.cookies)();return(0,a.createServerClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}},56751:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var a=r(67721),s=r(71615);function d(){let e=(0,s.cookies)();return(0,a.createServerClient)("https://tolzrvsykzmvndvomllt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvbHpydnN5a3ptdm5kdm9tbGx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODQ5MDAsImV4cCI6MjA4NTY2MDkwMH0.pYQlxzkeUO6xsIDwe77kKCtapcVn507pgmcXPjhQH-o",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,3314,5703,7721,43,4559,4397,6846,3419],()=>r(54539));module.exports=a})();